<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Javascript on nodejh</title>
    <link>http://nodejh.com/tags/javascript/index.xml</link>
    <description>Recent content in Javascript on nodejh</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <atom:link href="http://nodejh.com/tags/javascript/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Is JavaScript a call by reference or call by value language?</title>
      <link>http://nodejh.com/post/Is-JavaScript-a-pass-by-reference-or-pass-by-value-language/</link>
      <pubDate>Sat, 18 Feb 2017 11:07:14 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Is-JavaScript-a-pass-by-reference-or-pass-by-value-language/</guid>
      <description>

&lt;h2 id=&#34;1-ä¾‹å­&#34;&gt;1. ä¾‹å­&lt;/h2&gt;

&lt;p&gt;å…ˆæ¥çœ‹ä¸¤ä¸ªä¸ªæ¥è‡ªäº ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹P70-P71 çš„ä¸¤ä¸ªä¾‹å­ã€‚&lt;/p&gt;

&lt;h4 id=&#34;1-1-åŸºæœ¬ç±»å‹å‚æ•°ä¼ é€’&#34;&gt;1.1. åŸºæœ¬ç±»å‹å‚æ•°ä¼ é€’&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;function addTen(num) {
  num += 10;
  return num;
}

var count = 20;
var result = addTen(count);
alert(count); // 20, æ²¡æœ‰å˜åŒ–
alert(result); // 30
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;ä¹¦ä¸Šè§£é‡Šè¯´ï¼ŒJavaScript å‚æ•°ä¼ é€’éƒ½æ˜¯æŒ‰å€¼ä¼ å‚ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ä¼ é€’ç»™ &lt;code&gt;addTen&lt;/code&gt; å‡½æ•°çš„å€¼æ˜¯ &lt;code&gt;20&lt;/code&gt; è¿™ä¸ªå€¼ï¼Œæ‰€ä»¥å‡½æ•°æ‰§è¡Œç»“æŸåŸå§‹å˜é‡ &lt;code&gt;count&lt;/code&gt; å¹¶ä¸ä¼šæ”¹å˜ã€‚&lt;/p&gt;

&lt;h4 id=&#34;1-2-å¼•ç”¨ç±»å‹å‚æ•°ä¼ é€’&#34;&gt;1.2. å¼•ç”¨ç±»å‹å‚æ•°ä¼ é€’&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;function setName(obj) {
  obj.name = &#39;Nicholas&#39;;
  obj = new Object();
  obj.name = &#39;Greg&#39;;
}

var person = new Object();
setName(person);
alert(person.name); // Nicholas
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸ºä»€ä¹ˆç»“æœæ˜¯ &lt;code&gt;Nicholas&lt;/code&gt; å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2017-02-17-Is-JavaScript-a-pass-by-reference-or-pass-by-value-language-1.png&#34; alt=&#34;å˜é‡å­˜å‚¨æ–¹å¼&#34; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;ç–‘é—®ï¼šå¦‚æœæ˜¯ä¼ å€¼ï¼Œé‚£åº”è¯¥æ˜¯æŠŠ person å˜é‡çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯ä¸€ä¸ªæŒ‡å‘å †å†…å­˜ä¸­å¯¹è±¡çš„æŒ‡é’ˆï¼‰ä¼ é€’åˆ°å‡½æ•°ä¸­ï¼Œ&lt;code&gt;obj.name = &#39;Greg&#39;;&lt;/code&gt; æ”¹å˜äº†å †å†…å­˜ä¸­å¯¹è±¡çš„å±æ€§ï¼Œä¸ºä»€ä¹ˆ &lt;code&gt;person.name&lt;/code&gt; è¿˜æ˜¯ &lt;code&gt;Nicholas&lt;/code&gt; ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;2-ä¼ å€¼è¿˜æ˜¯ä¼ å¼•ç”¨&#34;&gt;2. ä¼ å€¼è¿˜æ˜¯ä¼ å¼•ç”¨ï¼Ÿ&lt;/h2&gt;

&lt;p&gt;è®©æˆ‘ä»¬å†å°†ä¸Šé¢ä¸¤ä¸ªä¾‹å­ç»¼åˆä¸ºä¸‹é¢çš„ä¾‹å­ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;function changeStuff(a, b, c) {
  a = a * 10;
  b.item = &amp;quot;changed&amp;quot;;
  c = {item: &amp;quot;changed&amp;quot;};
}

var num = 10;
var obj1 = {item: &amp;quot;unchanged&amp;quot;};
var obj2 = {item: &amp;quot;unchanged&amp;quot;};

changeStuff(num, obj1, obj2);

console.log(num);
console.log(obj1.item);    
console.log(obj2.item);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ€ç»ˆçš„è¾“å‡ºç»“æœæ˜¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;10
changed
unchanged
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‰€ä»¥ JS åˆ°åº•æ˜¯ä¼ å€¼è°ƒç”¨è¿˜æ˜¯ä¼ å¼•ç”¨è°ƒç”¨å‘¢ï¼Ÿè¦å¼„æ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆæˆ‘ä»¬è¦æ˜ç™½åˆ°åº•ä»€ä¹ˆæ˜¯&lt;strong&gt;ä¼ å€¼è°ƒç”¨ï¼ˆCall-ny-valueï¼‰&lt;/strong&gt;å’Œ&lt;strong&gt;ä¼ å¼•ç”¨è°ƒç”¨ï¼ˆCall-by-referenceï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h4 id=&#34;2-1-ä¼ å€¼è°ƒç”¨-pass-by-value&#34;&gt;2.1. ä¼ å€¼è°ƒç”¨ï¼ˆPass by valueï¼‰&lt;/h4&gt;

&lt;p&gt;åœ¨ä¼ å€¼è°ƒç”¨ä¸­ï¼Œä¼ é€’ç»™å‡½æ•°å‚æ•°æ˜¯å‡½æ•°è¢«è°ƒç”¨æ—¶æ‰€ä¼ å®å‚çš„æ‹·è´ã€‚åœ¨ä¼ å€¼è°ƒç”¨ä¸­å®é™…å‚æ•°è¢«æ±‚å€¼ï¼Œå…¶å€¼è¢«ç»‘å®šåˆ°å‡½æ•°ä¸­å¯¹åº”çš„å˜é‡ä¸Šï¼ˆé€šå¸¸æ˜¯æŠŠå€¼å¤åˆ¶åˆ°æ–°å†…å­˜åŒºåŸŸï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å³ &lt;code&gt;changeStuff&lt;/code&gt; çš„å‚æ•° &lt;code&gt;a&lt;/code&gt; &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; æ˜¯ &lt;code&gt;num1&lt;/code&gt; &lt;code&gt;obj1&lt;/code&gt; &lt;code&gt;obj2&lt;/code&gt; çš„æ‹·è´ã€‚æ‰€ä»¥æ— è®º &lt;code&gt;a&lt;/code&gt; &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; æ€ä¹ˆå˜åŒ–ï¼Œ&lt;code&gt;num1&lt;/code&gt; &lt;code&gt;obj1&lt;/code&gt; &lt;code&gt;obj2&lt;/code&gt; éƒ½ä¿æŒä¸å˜ã€‚&lt;/p&gt;

&lt;p&gt;é—®é¢˜å°±åœ¨äº &lt;code&gt;obj1&lt;/code&gt; å˜äº†ã€‚&lt;/p&gt;

&lt;h4 id=&#34;2-2-ä¼ å¼•ç”¨è°ƒç”¨-pass-by-reference&#34;&gt;2.2. ä¼ å¼•ç”¨è°ƒç”¨ï¼ˆPass by referenceï¼‰&lt;/h4&gt;

&lt;p&gt;åœ¨ä¼ å¼•ç”¨è°ƒç”¨è°ƒç”¨ä¸­ï¼Œä¼ é€’ç»™å‡½æ•°çš„æ˜¯å®ƒçš„å®é™…å‚æ•°çš„éšå¼å¼•ç”¨è€Œä¸æ˜¯å®å‚çš„æ‹·è´ã€‚é€šå¸¸å‡½æ•°èƒ½å¤Ÿä¿®æ”¹è¿™äº›å‚æ•°ï¼ˆæ¯”å¦‚èµ‹å€¼ï¼‰ï¼Œè€Œä¸”æ”¹å˜å¯¹äºè°ƒç”¨è€…æ˜¯å¯è§çš„ã€‚&lt;/p&gt;

&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ &lt;code&gt;changeStuff&lt;/code&gt; å‡½æ•°å†…çš„ &lt;code&gt;a&lt;/code&gt; &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; éƒ½åˆ†åˆ«ä¸ &lt;code&gt;num&lt;/code&gt; &lt;code&gt;obj1&lt;/code&gt; &lt;code&gt;obj2&lt;/code&gt; æŒ‡å‘åŒä¸€å—å†…å­˜ï¼Œä½†ä¸æ˜¯å…¶æ‹·è´ã€‚å‡½æ•°å†…å¯¹ &lt;code&gt;a&lt;/code&gt; &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; æ‰€åšçš„ä»»ä½•ä¿®æ”¹ï¼Œéƒ½å°†åæ˜ åˆ° &lt;code&gt;num&lt;/code&gt; &lt;code&gt;obj1&lt;/code&gt; &lt;code&gt;obj2&lt;/code&gt; ä¸Š ã€‚&lt;/p&gt;

&lt;p&gt;é—®é¢˜å°±åœ¨äº &lt;code&gt;num&lt;/code&gt; å’Œ &lt;code&gt;obj2&lt;/code&gt; æ²¡å˜ã€‚&lt;/p&gt;

&lt;p&gt;ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼ŒJavaScript ä¸­å‡½æ•°å‚æ•°çš„ä¼ é€’æ–¹å¼æ—¢ä¸æ˜¯ä¼ å€¼ï¼Œä¹Ÿä¸æ˜¯ä¼ å¼•ç”¨ã€‚ä¸»è¦é—®é¢˜å‡ºåœ¨ JS çš„å¼•ç”¨ç±»å‹ä¸Šé¢ã€‚&lt;/p&gt;

&lt;p&gt;JS å¼•ç”¨ç±»å‹å˜é‡çš„å€¼æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å †å†…å­˜ä¸­çš„å®é™…å¯¹è±¡ã€‚&lt;/p&gt;

&lt;h4 id=&#34;2-3-ä¼ å…±äº«è°ƒç”¨-call-by-sharing&#34;&gt;2.3. ä¼ å…±äº«è°ƒç”¨ï¼ˆCall by sharingï¼‰&lt;/h4&gt;

&lt;p&gt;è¿˜æœ‰ä¸€ç§æ±‚å€¼ç­–ç•¥å«åš&lt;a href=&#34;http://dmitrysoshnikov.com/ecmascript/chapter-8-evaluation-strategy/#call-by-sharing&#34;&gt;ä¼ å…±äº«è°ƒç”¨ï¼ˆCall-by-sharing/Call by object/Call by object-sharingï¼‰&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¼ å…±äº«è°ƒç”¨å’Œä¼ å¼•ç”¨è°ƒç”¨çš„ä¸åŒä¹‹å¤„æ˜¯ï¼Œè¯¥æ±‚å€¼ç­–ç•¥ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°æ˜¯å¯¹è±¡çš„å¼•ç”¨çš„æ‹·è´ï¼Œå³å¯¹è±¡å˜é‡æŒ‡é’ˆçš„æ‹·è´ã€‚&lt;/p&gt;

&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ï¼Œ &lt;code&gt;a&lt;/code&gt; &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; ä¸‰ä¸ªå˜é‡çš„å€¼æ˜¯ &lt;code&gt;num&lt;/code&gt; &lt;code&gt;obj1&lt;/code&gt; &lt;code&gt;obj2&lt;/code&gt; çš„æŒ‡é’ˆçš„æ‹·è´ã€‚ &lt;code&gt;a&lt;/code&gt; &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; çš„å€¼åˆ†åˆ«ä¸ &lt;code&gt;num&lt;/code&gt; &lt;code&gt;obj1&lt;/code&gt; &lt;code&gt;obj2&lt;/code&gt; çš„å€¼æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚å‡½æ•°å†…éƒ¨å¯ä»¥å¯¹  &lt;code&gt;a&lt;/code&gt; &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; è¿›è¡Œä¿®æ”¹å¯é‡æ–°èµ‹å€¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;function changeStuff(a, b, c) {
  a = a * 10; // å¯¹ a èµ‹å€¼ï¼Œä¿®æ”¹ a çš„æŒ‡å‘ï¼Œæ–°çš„å€¼æ˜¯ a * 10
  b.item = &amp;quot;changed&amp;quot;; // å› ä¸º b ä¸ obj1 æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œä¼šä¿®æ”¹åŸå§‹å¯¹è±¡ obj1.item çš„å†…å®¹
  c = {item: &amp;quot;changed&amp;quot;}; // å¯¹ c é‡æ–°èµ‹å€¼ï¼Œä¿®æ”¹ c çš„æŒ‡å‘ï¼Œå…¶æŒ‡å‘çš„å¯¹è±¡å†…å®¹æ˜¯ {item: &amp;quot;changed&amp;quot;}
}

&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;3-ä»£ç åˆ†æ&#34;&gt;3 ä»£ç åˆ†æ&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹æ¥è®©æˆ‘ä»¬å†æ¥åˆ†æä¸€ä¸‹ä»£ç ã€‚&lt;/p&gt;

&lt;h4 id=&#34;3-1-å˜é‡åˆå§‹åŒ–&#34;&gt;3.1 å˜é‡åˆå§‹åŒ–&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;var num = 10;
var obj1 = {item: &amp;quot;unchanged&amp;quot;};
var obj2 = {item: &amp;quot;unchanged&amp;quot;};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2017-02-19-Is-JavaScript-a-pass-by-reference-or-pass-by-value-language-2.png&#34; alt=&#34;å˜é‡åˆå§‹åŒ–&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;3-2-è°ƒç”¨å‡½æ•°&#34;&gt;3.2 è°ƒç”¨å‡½æ•°&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;changeStuff(num, obj1, obj2);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2017-02-19-Is-JavaScript-a-pass-by-reference-or-pass-by-value-language-3.png&#34; alt=&#34;è°ƒç”¨å‡½æ•°&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œå˜é‡ &lt;code&gt;a&lt;/code&gt; çš„å€¼å°±æ˜¯ &lt;code&gt;num&lt;/code&gt; å€¼çš„æ‹·è´ï¼Œå˜é‡ &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; åˆ†åˆ«æ˜¯ &lt;code&gt;obj1&lt;/code&gt; &lt;code&gt;obj2&lt;/code&gt; çš„æŒ‡é’ˆçš„æ‹·è´ã€‚&lt;/p&gt;

&lt;p&gt;å‡½æ•°çš„å‚æ•°å…¶å®å°±æ˜¯å‡½æ•°ä½œç”¨åŸŸå†…éƒ¨çš„å˜é‡ï¼Œå‡½æ•°æ‰§è¡Œå®Œä¹‹åå°±ä¼šé”€æ¯ã€‚&lt;/p&gt;

&lt;h4 id=&#34;3-3-æ‰§è¡Œå‡½æ•°ä½“&#34;&gt;3.3 æ‰§è¡Œå‡½æ•°ä½“&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;a = a * 10;
b.item = &amp;quot;changed&amp;quot;;
c = {item: &amp;quot;changed&amp;quot;};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2017-02-19-Is-JavaScript-a-pass-by-reference-or-pass-by-value-language-5.png&#34; alt=&#34;æ‰§è¡Œå‡½æ•°ä½“&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚å›¾æ‰€ç¤ºï¼Œå˜é‡ &lt;code&gt;a&lt;/code&gt; çš„å€¼çš„æ”¹å˜ï¼Œå¹¶ä¸ä¼šå½±å“å˜é‡ &lt;code&gt;num&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è€Œ &lt;code&gt;b&lt;/code&gt; å› ä¸ºå’Œ &lt;code&gt;obj1&lt;/code&gt; æ˜¯æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä½¿ç”¨ &lt;code&gt;b.item = &amp;quot;changed&amp;quot;;&lt;/code&gt; ä¿®æ”¹å¯¹è±¡çš„å€¼ï¼Œä¼šé€ æˆ &lt;code&gt;obj1&lt;/code&gt; çš„å€¼ä¹Ÿéšä¹‹æ”¹å˜ã€‚&lt;/p&gt;

&lt;p&gt;ç”±äºæ˜¯å¯¹ &lt;code&gt;c&lt;/code&gt; é‡æ–°èµ‹å€¼äº†ï¼Œæ‰€ä»¥ä¿®æ”¹ &lt;code&gt;c&lt;/code&gt; çš„å¯¹è±¡çš„å€¼ï¼Œå¹¶ä¸ä¼šå½±å“åˆ° &lt;code&gt;obj2&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;4-ç»“è®º&#34;&gt;4. ç»“è®º&lt;/h2&gt;

&lt;p&gt;ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œå¯¹äº JS æ¥è¯´ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸºæœ¬ç±»å‹æ˜¯ä¼ å€¼è°ƒç”¨&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼•ç”¨ç±»å‹ä¼ å…±äº«è°ƒç”¨&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¼ å€¼è°ƒç”¨æœ¬è´¨ä¸Šä¼ é€’çš„æ˜¯å˜é‡çš„å€¼çš„æ‹·è´ã€‚&lt;/p&gt;

&lt;p&gt;ä¼ å…±äº«è°ƒç”¨æœ¬è´¨ä¸Šæ˜¯ä¼ é€’å¯¹è±¡çš„æŒ‡é’ˆçš„æ‹·è´ï¼Œå…¶æŒ‡é’ˆä¹Ÿæ˜¯å˜é‡çš„å€¼ã€‚æ‰€ä»¥ä¼ å…±äº«è°ƒç”¨ä¹Ÿå¯ä»¥è¯´æ˜¯ä¼ å€¼è°ƒç”¨ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹è¯´ &lt;strong&gt;JavaScript å‚æ•°ä¼ é€’éƒ½æ˜¯æŒ‰å€¼ä¼ å‚&lt;/strong&gt; ä¹Ÿæ˜¯æœ‰é“ç†çš„ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;å‚è€ƒ&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Evaluation_strategy&#34;&gt;Evaluation strategy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E6%B1%82%E5%80%BC%E7%AD%96%E7%95%A5&#34;&gt;æ±‚å€¼ç­–ç•¥&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://dmitrysoshnikov.com/ecmascript/chapter-8-evaluation-strategy&#34;&gt;ECMA-262-3 in detail. Chapter 8. Evaluation strategy.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://stackoverflow.com/questions/518000/is-javascript-a-pass-by-reference-or-pass-by-value-language&#34;&gt;Is JavaScript a pass-by-reference or pass-by-value language?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/simongong/js-stackoverflow-highest-votes/blob/master/questions21-30/parameter-passed-by-value-or-reference.md&#34;&gt;parameter passed by value or reference&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://bosn.me/js/js-call-by-sharing/&#34;&gt;JSæ˜¯æŒ‰å€¼ä¼ é€’è¿˜æ˜¯æŒ‰å¼•ç”¨ä¼ é€’?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Symmetric Difference</title>
      <link>http://nodejh.com/post/Symmetric-Difference/</link>
      <pubDate>Sat, 29 Oct 2016 00:43:22 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Symmetric-Difference/</guid>
      <description>&lt;p&gt;&lt;strong&gt;é¢˜ç›®&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ï¼Œè¿”å›æ‰€ç»™æ•°ç»„çš„ å¯¹ç­‰å·®åˆ†(symmetric difference) (â–³ or âŠ•)æ•°ç»„.&lt;/p&gt;

&lt;p&gt;ç»™å‡ºä¸¤ä¸ªé›†åˆ (å¦‚é›†åˆ A = {1, 2, 3} å’Œé›†åˆ B = {2, 3, 4}), è€Œæ•°å­¦æœ¯è¯­ &amp;ldquo;å¯¹ç­‰å·®åˆ†&amp;rdquo; çš„é›†åˆå°±æ˜¯æŒ‡ç”±æ‰€æœ‰åªåœ¨ä¸¤ä¸ªé›†åˆå…¶ä¸­ä¹‹ä¸€çš„å…ƒç´ ç»„æˆçš„é›†åˆ(A â–³ B = C = {1, 4}). å¯¹äºä¼ å…¥çš„é¢å¤–é›†åˆ (å¦‚ D = {2, 3}), ä½ åº”è¯¥å®‰è£…å‰é¢åŸåˆ™æ±‚å‰ä¸¤ä¸ªé›†åˆçš„ç»“æœä¸æ–°é›†åˆçš„å¯¹ç­‰å·®åˆ†é›†åˆ (C â–³ D = {1, 4} â–³ {2, 3} = {1, 2, 3, 4}).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è§£é¢˜æ€è·¯&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;a href=&#34;https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce&#34;&gt;Array.prototype.reduce&lt;/a&gt; å¯¹æ•°ç»„è¿›è¡Œéå†ã€‚ä¼ å…¥çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ prev (å¯¹ç­‰å·®åˆ†åæ•°ç»„)ï¼Œcurrï¼ˆå½“å‰æ•°ç»„ï¼‰&lt;/li&gt;
&lt;li&gt;å°† sym() çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºåˆå§‹å¯¹ç­‰å·®åˆ†æ•°ç»„ï¼Œå³ç¬¬ä¸€ä¸ª prev&lt;/li&gt;
&lt;li&gt;å¯¹ prev æ•°ç»„å’Œ curr æ•°ç»„å»é‡ï¼Œé˜²æ­¢é‡å¤å…ƒç´ å½±å“å¯¹ç­‰å·®åˆ†çš„ç»“æœ&lt;/li&gt;
&lt;li&gt;éå† curr æ•°ç»„ï¼Œä»¥æ­¤åˆ¤æ–­ curr æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ˜¯å¦åœ¨ prev ä¸­å‡ºç°ã€‚å¦‚æœå‡ºç°ï¼Œåˆ™ä» prev ä¸­åˆ é™¤è¯¥å…ƒç´ ï¼›å¦‚æœæ²¡æœ‰å‡ºç°ï¼Œåˆ™å°†å…¶åŠ å…¥åˆ° prev ä¸­&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// å¯¹ç­‰å·®åˆ†
function sym(args) {
  var arr = Array.prototype.slice.call(arguments);
  return arr.reduce(function(prev, curr) {
      prev = unique(prev);
      curr = unique(curr);
      for (var i=0; i&amp;lt;curr.length; i++) {
          if (prev.indexOf(curr[i]) === -1) {
             prev.push(curr[i]);
          } else {
              prev.splice(prev.indexOf(curr[i]), 1);
          }
          console.log(&#39;new: &#39;, prev);
      }
      return prev.sort();
  });
}


// æ•°ç»„å»é‡
function unique(arr) {
    var res = [];
    for (var i=0; i&amp;lt;arr.length; i++) {
        if (res.indexOf(arr[i]) === -1) {
            res.push(arr[i]);
        }
    }
    return res;
}


// sym([1, 2, 3], [5, 2, 1, 4]);
sym([1, 1, 2, 5], [2, 2, 3, 5], [3, 4, 5, 5])

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿è¡Œæ•ˆæœï¼š&lt;a href=&#34;https://www.freecodecamp.cn/challenges/symmetric-difference&#34;&gt;Symmetric Difference&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Github Issue: &lt;a href=&#34;https://github.com/nodejh/nodejh.github.io/issues/1&#34;&gt;https://github.com/nodejh/nodejh.github.io/issues/1&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Get the Max Number in Array</title>
      <link>http://nodejh.com/post/Get-the-Max-Number-in-Array/</link>
      <pubDate>Mon, 24 Oct 2016 19:20:03 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Get-the-Max-Number-in-Array/</guid>
      <description>

&lt;p&gt;æœ¬æ–‡ä»‹ç» JavaScript çš„å‡ ç§ä»æ•°ç»„ä¸­æ‰¾å‡ºæœ€å¤§å€¼çš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h4 id=&#34;ä½¿ç”¨é€’å½’å‡½æ•°&#34;&gt;ä½¿ç”¨é€’å½’å‡½æ•°&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;var arr = [9,8,55,66,49,68,109,55,33,6,2,1];
var max = arr[0];
function findMax( i ){
  if( i == arr.length ) return max;
  if( max &amp;lt; arr[i] ) max = arr[i];
  findMax(i+1);
}

findMax(1);
console.log(max);
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;ä½¿ç”¨-for-å¾ªç¯éå†&#34;&gt;ä½¿ç”¨ for å¾ªç¯éå†&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;var arr = [9,8,55,66,49,68,109,55,33,6,2,1];  
var max = arr[0];
for(var i = 1; i &amp;lt; arr.length; i++){
  if( max &amp;lt; arr[i] ){
    max = arr[i];
  }
}

console.log(max);
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;ä½¿ç”¨applyå°†æ•°ç»„ä¼ å…¥maxæ–¹æ³•ä¸­ç›´æ¥è¿”å›&#34;&gt;ä½¿ç”¨applyå°†æ•°ç»„ä¼ å…¥maxæ–¹æ³•ä¸­ç›´æ¥è¿”å›&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;Math.max.apply(null,[9,8,55,66,49,68,109,55,33,6,2,1])
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šæ•°ç»„æ’åºæ–¹å¼ï¼Œéƒ½å¯ä»¥åœ¨æ’åºåï¼Œæ ¹æ®æ–°æ•°ç»„ç´¢å¼•å€¼è·å– æœ€å¤§/æœ€å° å€¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;var a=[1,2,3,5];
console.log(Math.max.apply(null, a));//æœ€å¤§å€¼
console.log(Math.min.apply(null, a));//æœ€å°å€¼
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¤šç»´æ•°ç»„å¯ä»¥è¿™ä¹ˆä¿®æ”¹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;var a=[1,2,3,[5,6],[1,4,8]];
var ta=a.join(&amp;quot;,&amp;quot;).split(&amp;quot;,&amp;quot;);//è½¬åŒ–ä¸ºä¸€ç»´æ•°ç»„
console.log(Math.max.apply(null,ta));//æœ€å¤§å€¼
console.log(Math.min.apply(null,ta));//æœ€å°å€¼
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;p&gt;Github Issue: &lt;a href=&#34;https://github.com/nodejh/nodejh.github.io/issues/9&#34;&gt;https://github.com/nodejh/nodejh.github.io/issues/9&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Check Parameters in Express Router</title>
      <link>http://nodejh.com/post/Check-Parameters-in-Express-Router/</link>
      <pubDate>Sat, 15 Oct 2016 06:46:05 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Check-Parameters-in-Express-Router/</guid>
      <description>

&lt;p&gt;æœ¬æ–‡ä»¥ Express æ¡†æ¶ä¸ºåŸºç¡€ï¼Œè®²è¯‰å¦‚ä½•é€šè¿‡ä¸€ä¸ªä¸­é—´ä»¶æ¥æ£€æµ‹ Express è·¯ç”±ä¸­ä¼ è¾“çš„å‚æ•°æ˜¯å¦åˆæ³•ã€‚&lt;/p&gt;

&lt;p&gt;å‡ ä¹å¯¹äºä»»ä½•åº”ç”¨ï¼Œå‰åç«¯éƒ½éœ€è¦è¿›è¡Œä¼ è¾“æ•°æ®ã€‚ä¸ç®¡æ˜¯é€šè¿‡ HTTP è¯·æ±‚çš„ POST æ–¹æ³•è¿˜æ˜¯ GET æ–¹æ³•ï¼Œæ•°æ®æ ¡éªŒéƒ½æ˜¯å¿…è¦çš„æ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºå¤§éƒ¨åˆ† API æ¥è¯´ï¼Œå¯èƒ½åªéœ€è¦åˆ¤æ–­ä¼ å…¥çš„å‚æ•°æ˜¯å¦ä¸º undefined æˆ– nullï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œä¸ºäº†å‡å°‘é‡å¤ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªç®€å•çš„ä¸­é—´ä»¶æ¥å¤„ç†è·¯ç”±ä¸­çš„å‚æ•°ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªä¸­é—´ä»¶çš„éœ€æ±‚å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ£€æµ‹è·¯ç”±ä¸­çš„ä¸€èˆ¬å‚æ•°æ˜¯å¦ä¸º undefinedã€nullã€[]ã€&amp;rdquo;&lt;/li&gt;
&lt;li&gt;ä¸­é—´ä»¶åŒæ—¶è¿˜éœ€è¦èƒ½å¯¹ç‰¹æ®Šå‚æ•°åšå¤„ç†ï¼Œå¦‚ä¸€ä¸ªå‚æ•°å€¼åœ¨ 1-100 ä¹‹é—´&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æœ€ç»ˆå†™å‡ºæ¥çš„å¤„ç†å‚æ•°çš„æ¨¡å—ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/**
 * æ£€æµ‹è·¯ç”±ä¸­çš„å‚æ•°
 * @method checkParameters
 * @param  {object}        req     httpè¯·æ±‚
 * @param  {object}        res     httpå“åº”
 * @param  {Function}      next    
 * @param  {[type]}        special ç‰¹æ®Šå‚æ•°ï¼Œ
 *                                 æ ¼å¼ï¼š [{eval: &#39;req.query.id&amp;gt;0&#39;, key:&#39;id&#39;, type: &#39;query&#39;}]
 *                                 key å±æ€§çš„å€¼å¿…é¡»å’Œevalä¸­å¯¹åº”ï¼Œä¸”typeåªèƒ½æ˜¯ query/params/body
 * @return {object}        è‹¥å‚æ•°é”™è¯¯ï¼Œç›´æ¥è¿”å›jsonåˆ°å‰ç«¯ï¼›æ­£ç¡®ï¼Œåˆ™next()
 */
function checkParameters(req, res, next, special) {
  // console.log(&#39;params: &#39;, req.params);
  // console.log(&#39;body: &#39;, req.body);
  // console.log(&#39;query: &#39;, req.query);
  console.log(&#39;specialParams: &#39;, typeof special);
  // åˆ¤æ–­æ˜¯å¦ä¼ å…¥ç¬¬å››ä¸ªå‚æ•°
  if (Array.isArray(special)) {
    // åˆ¤æ–­ç‰¹æ®Šå‚æ•°
    for (let i = 0; i &amp;lt; special.length; i++) {
      // console.log(&#39;special[i]: &#39;, special[i]);
      // console.log(&#39;special[i] eval: &#39;, special[i].hasOwnProperty(&#39;eval&#39;));
      // console.log(&#39;special[i] key: &#39;, special[i].hasOwnProperty(&#39;key&#39;));
      // console.log(&#39;special[i] type: &#39;, special[i].hasOwnProperty(&#39;type&#39;));

      // åˆ¤æ–­æ˜¯å¦å…·æœ‰ eval, key, type ä¸‰ä¸ªå‚æ•°
      if (! (special[i].hasOwnProperty(&#39;eval&#39;)
        &amp;amp;&amp;amp; special[i].hasOwnProperty(&#39;key&#39;)
        &amp;amp;&amp;amp; special[i].hasOwnProperty(&#39;type&#39;))) {
        return res.json({
          code: 90001,
          msg: &#39;æ£€æµ‹å‚æ•°å±å¦æ­£ç¡®æ—¶ï¼Œä¼ å…¥çš„ç‰¹æ®Šå‚æ•°æ ¼å¼ä¸å®Œå…¨&#39;,
          detail: special
        });
      }
      // åˆ¤æ–­ eval, key, type ä¸‰ä¸ªå‚æ•°æ˜¯å¦ä¸º undefined
      if ( !(typeof special[i][&#39;eval&#39;] !== undefined
      &amp;amp;&amp;amp; typeof special[i][&#39;key&#39;] !== undefined
      &amp;amp;&amp;amp; typeof special[i][&#39;type&#39;] !== undefined)) {
        return res.json({
          code: 90002,
          msg: &#39;æ£€æµ‹å‚æ•°å±å¦æ­£ç¡®æ—¶ï¼Œä¼ å…¥çš„ç‰¹æ®Šå‚æ•°ä¸º undefined&#39;,
          detail: special
        });
      }
      const evalString = special[i][&#39;eval&#39;];
      const type = special[i][&#39;type&#39;];
      const key = special[i][&#39;key&#39;];
      // åˆ¤æ–­ key å’Œ eval æ˜¯å¦åŒ¹é…
      console.log(&#39;length: &#39;, evalString
      .split(&#39;req.&#39; + type + &#39;.&#39; + key)
      .length);
      const length = evalString.split(&#39;req.&#39; + type + &#39;.&#39; + key).length;
      if (length &amp;lt; 1) {
        return res.json({
          code: 90003,
          msg: &#39;æ£€æµ‹å‚æ•°å±å¦æ­£ç¡®æ—¶ï¼Œä¼ å…¥çš„ç‰¹æ®Šå‚æ•°ä¸ºæ ¼å¼ä¸æ­£ç¡®&#39;,
          detail: special
        });
      }
      // æ‰§è¡Œ eval
      if (!eval(evalString)) {
        return res.json({
          code: 90004,
          msg: &#39;æ£€æµ‹å‚æ•°å±å¦æ­£ç¡®æ—¶ï¼Œå‚æ•°ä¸åŒ¹é…ä¼ å…¥çš„æ¡ä»¶ &#39; + evalString,
          detail: special,
          parameters: req[type]
        });
      }
      // ä»æ™®é€šå‚æ•°ä¸­åˆ é™¤ç‰¹æ®Šå‚æ•°
      // console.log(&#39;delete: &#39;, req[type][key]);
      delete req[type][key];
    }
  }

  const params = req.params;
  // å»æ‰ req.params ä¸­ {&#39;0&#39;: &#39;&#39;, ...} è¿™ä¸€é¡¹
  delete params[&#39;0&#39;];
  // console.log(&#39;params: &#39;, params);
  const body = req.body;
  const query = req.query;
  const common = Object.assign(params, body, query);
  console.log(&#39;common: &#39;, common);
  // æ£€æµ‹å‚æ•°å±å¦ä¸ºundefined
  for (let i in common) {
    if (typeof common[i] === &#39;undefined&#39;) {
      return res.json({
        code: 90005,
        msg: &#39;æ£€æµ‹å‚æ•°å±å¦æ­£ç¡®æ—¶ï¼Œ&#39; + i + &#39; å‚æ•°ä¸ºundefined&#39;,
        detail: common
      });
    }
    // æ£€æµ‹å‚æ•°å±å¦ä¸ºnull
    if (common[i] === null) {
      return res.json({
        code: 90006,
        msg: &#39;æ£€æµ‹å‚æ•°å±å¦æ­£ç¡®æ—¶ï¼Œ&#39; + i + &#39; å‚æ•°ä¸ºnull&#39;,
        detail: common
      });
    }
    // æ£€æµ‹å‚æ•°æ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸² &#39;&#39;
    if (common[i] === &#39;&#39;) {
      return res.json({
        code: 90007,
        msg: &#39;æ£€æµ‹å‚æ•°å±å¦æ­£ç¡®æ—¶ï¼Œ&#39; + i + &#39; å‚æ•°ä¸ºç©ºå­—ç¬¦ä¸²&#39;,
        detail: common
      });
    }
    // æ£€æµ‹å‚æ•°æ˜¯å¦ä¸ºç©ºæ•°ç»„ []
    if (common[i] === &#39;&#39;) {
      return res.json({
        code: 90008,
        msg: &#39;æ£€æµ‹å‚æ•°å±å¦æ­£ç¡®æ—¶ï¼Œ&#39; + i + &#39; å‚æ•°ä¸ºç©ºæ•°ç»„&#39;,
        detail: common
      });
    }
  }

  return next();
}

module.exports = checkParameters;

&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;å‡½æ•°è¯¦è§£&#34;&gt;å‡½æ•°è¯¦è§£&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;1. ç‰¹æ®Šå‚æ•°çš„å¤„ç†&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªæ¨¡å—ï¼Œé¦–å…ˆå¯¹ç‰¹æ®Šå‚æ•°åšå¤„ç†ã€‚&lt;code&gt;special&lt;/code&gt; è¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[{
  eval: &#39;parseInt(req.query.id) &amp;gt; 1 &amp;amp;&amp;amp; parseInt(req.query.id) &amp;lt; 10&#39;,
  key: &#39;id&#39;,
  type: &#39;query&#39;
}, {
  eval: &#39;parseInt(req.query.age) === 11&#39;,
  key: &#39;age&#39;,
  type: &#39;query&#39;
}]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;key å±æ€§çš„å€¼å¿…é¡»å’Œevalä¸­å¯¹åº”ï¼Œä¸”typeåªèƒ½æ˜¯ query/params/bodyã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;é¦–å…ˆåˆ¤æ–­å‡½æ•°æ˜¯å¦ä¼ å…¥ç¬¬å››ä¸ªå‚æ•°ï¼Œå¹¶ä¸”ç¬¬å››ä¸ªå‚æ•°æ˜¯å¦ä¸ºæ•°ç»„ï¼Œå¦‚æœè¿™ä¸¤ä¸ªæ¡ä»¶æˆç«‹ï¼Œè¯´æ˜æœ‰ç‰¹æ®Šå‚æ•°éœ€è¦å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶ååˆ¤æ–­æ˜¯å¦å…·æœ‰ eval, key, type ä¸‰ä¸ªå‚æ•°ã€‚eval å‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°æ¡ä»¶è¡¨è¾¾å¼ï¼Œå¦‚ &amp;lsquo;id&amp;gt;0&amp;rsquo;ï¼Œæœ€ç»ˆé€šè¿‡ &lt;code&gt;eval()&lt;/code&gt; å‡½æ•°æ¥æ‰§è¡Œè¿™ä¸ªè¡¨è¾¾å¼ã€‚&lt;code&gt;key&lt;/code&gt; è¡¨ç¤ºå‚æ•°å±æ€§åï¼Œtype è¡¨ç¤ºæ˜¯é€šè¿‡ä½•ç§æ–¹å¼ä¼ é€’çš„å‚æ•°ï¼Œå¦‚ query/params/bodyã€‚&lt;/li&gt;
&lt;li&gt;æ¥ä¸‹æ¥åˆ¤æ–­  eval, key, type ä¸‰ä¸ªå‚æ•°è‡ªèº«æ˜¯å¦ä¸º undefined æˆ– null&lt;/li&gt;
&lt;li&gt;å†ç„¶ååˆ¤æ–­ åˆ¤æ–­ key å’Œ eval æ˜¯å¦åŒ¹é…ã€‚key å’Œ eval çš„åŒ¹é…ï¼Œä¸»è¦æ˜¯ä¸ºäº†åé¢ä»ä¸€èˆ¬å‚æ•°ä¸­åˆ é™¤ç‰¹æ®Šå‚æ•°&lt;/li&gt;
&lt;li&gt;å†æ‰§è¡Œ eval è¡¨è¾¾å¼ï¼Œåˆ¤æ–­è¡¨è¾¾å¼æ˜¯å¦æˆç«‹ï¼Œå³ç‰¹æ®Šå‚æ•°å€¼æ˜¯å¦åˆæ³•&lt;/li&gt;
&lt;li&gt;å¦‚æœä»¥ä¸Šéƒ½ä¸ºçœŸï¼Œè¯´æ˜ç‰¹æ®Šå‚æ•°åˆæ³•ï¼Œæœ€ååˆ™ä½¿ç”¨ delete ä»å‚æ•°ä¸­åˆ é™¤ç‰¹æ®Šå‚æ•°&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;2. æ™®é€šå‚æ•°å¤„ç†&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¤„ç†å®Œæ¯•ç‰¹æ®Šå‚æ•°åï¼Œå°±éœ€è¦å¤„ç†æ™®é€šå‚æ•°ã€‚æ™®é€šå‚æ•°åªéœ€è¦æ»¡è¶³ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ä¸ä¸º &lt;code&gt;undefined&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ä¸ä¸º &lt;code&gt;null&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ä¸ä¸ºç©ºå­—ç¬¦ä¸² &lt;code&gt;&#39;&#39;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ä¸ä¸ºç©ºæ•°ç»„ &lt;code&gt;[]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ™®é€šå‚æ•°ï¼Œå³ &lt;code&gt;req.body&lt;/code&gt; &lt;code&gt;req.params&lt;/code&gt; &lt;code&gt;req.query&lt;/code&gt; ä¸­çš„æ‰€æœ‰éç‰¹æ®Šå‚æ•°ã€‚&lt;/p&gt;

&lt;p&gt;é™¤äº†åœ¨åˆ¤æ–­ç‰¹æ®Šå‚æ•°çš„æ—¶å€™ï¼Œéœ€è¦ delete ç‰¹æ®Šå‚æ•°ï¼Œè¿˜éœ€è¦ &lt;code&gt;delete req.params[&#39;0&#39;]&lt;/code&gt;ã€‚å› ä¸ºå¯¹äº &lt;code&gt;req.params&lt;/code&gt;ï¼Œå½“ URL æ²¡æœ‰ &lt;code&gt;path&lt;/code&gt; éƒ¨åˆ†çš„æ—¶å€™ï¼Œ&lt;code&gt;req.params[&#39;0&#39;]&lt;/code&gt; ä¸º &lt;code&gt;&#39;&#39;&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å¤„ç†å®Œæ¯•ä¹‹åï¼Œè‹¥æ‰€æœ‰å‚æ•°éƒ½åˆæ³•ï¼Œåˆ™è¿”å› &lt;code&gt;next()&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h4 id=&#34;æ¨¡å—ä½¿ç”¨&#34;&gt;æ¨¡å—ä½¿ç”¨&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;1. åˆ›å»ºæ²¡æœ‰æŒ‚è½½è·¯å¾„çš„ä¸­é—´ä»¶&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;é¦–å…ˆåœ¨ Express é¡¹ç›®å…¥å£æ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªå‚æ•°å¤„ç†ä¸­é—´ä»¶ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// app.js
const checkParameters = require(&#39;./checkParameters&#39;);
// ...
app.use(function(req, res, next) {
  checkParameters(req, res, next);
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ³¨æ„è¿™é‡Œçš„ &lt;code&gt;app.use()&lt;/code&gt; éœ€è¦æ”¾åœ¨åˆ›å»ºå…·ä½“è·¯ç”±ä¸­é—´ä»¶å¦‚&lt;code&gt;app.use(&#39;/&#39;, index)&lt;/code&gt; ä¹‹å‰ã€‚&lt;/p&gt;

&lt;p&gt;å½“ Express æ¥æ”¶åˆ° HTTP è¯·æ±‚åï¼Œé¦–å…ˆè¯¥ä¸­é—´ä»¶ä¼šæ£€æµ‹å‚æ•°æ˜¯å¦åˆæ³•ï¼ˆåªåˆ¤æ–­æ˜¯å¦ä¸º null æˆ– undefine æˆ– &amp;ldquo; æˆ– []ï¼‰ã€‚å¦‚æœä¸åˆæ³•ï¼Œåˆ™ç›´æ¥è¿”å›ï¼›å¦‚æœåˆæ³•ï¼Œåˆ™ç¨‹åºç»§ç»­æ‰§è¡Œï¼Œç”±åŒ¹é…è¯¥è¯·æ±‚è·¯å¾„çš„è·¯ç”±ç»§ç»­å®Œæˆè¯¥è¯·æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2. åˆ›å»ºæŒ‚è½½è·¯å¾„çš„ä¸­é—´ä»¶&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœéœ€è¦å¯¹æŸä¸ªè·¯ç”±çš„ç‰¹æ®Šå‚æ•°åšå¤„ç†ï¼Œåˆ™éœ€è¦åˆ›å»ºä¸€ä¸ªæŒ‚è½½è·¯å¾„çš„ä¸­é—´ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ä¸ºä»¬è¦åˆ¤æ–­ &lt;code&gt;/index&lt;/code&gt; è·¯ç”±çš„ GET è¯·æ±‚ä¸­çš„ &lt;code&gt;id&lt;/code&gt; å‚æ•°ï¼Œå…¶ä¸­ &lt;code&gt;id&lt;/code&gt; çš„å–å€¼èŒƒå›´æ˜¯ 1-100ï¼ŒURL å½¢å¼å¦‚ &lt;code&gt;http://localhost:3000/index?id=10&lt;/code&gt;ï¼Œåˆ™å¯ä»¥è¿™æ ·ä½¿ç”¨è¯¥æ¨¡å—ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// index.js
const checkParameters = require(&#39;./checkParameters&#39;);

// æŒ‚è½½è·¯å¾„çš„ä¸­é—´ä»¶
router.get(&#39;/index&#39;, function(req, res, next) {
  const special = {
    eval: &#39;parseInt(req.query.id) &amp;gt;= 1 &amp;amp;&amp;amp; parseInt(req.query.id) &amp;lt;= 100&#39;,
    key: &#39;id&#39;,
    type: &#39;query&#39;
  };
  checkParameters(req, res, next, special);
});
// æ­£å¸¸é€»è¾‘å¤„ç†
router.get(&#39;/index&#39;, function(req, res, next) {
  // æ­£å¸¸é€»è¾‘
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å½“ Express æ¥æ”¶åˆ°ä¸€ä¸ª HTTP è¯·æ±‚çš„æ—¶å€™ï¼Œé¦–å…ˆè¿˜æ˜¯æ²¡æœ‰æŒ‚è½½è·¯å¾„çš„ä¸­é—´ä»¶å…ˆå¤„ç†è¯·æ±‚ï¼Œæ£€æµ‹å‚æ•°ï¼›ç„¶åè¯¥æŒ‚è½½è·¯å¾„çš„ä¸­é—´ä»¶å†æ£€æµ‹å‚æ•°ï¼›æœ€åæ‰æ‰§è¡Œæ­£å¸¸å¤„ç†é€»è¾‘ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Github Issue: &lt;a href=&#34;https://github.com/nodejh/nodejh.github.io/issues/5&#34;&gt;https://github.com/nodejh/nodejh.github.io/issues/5&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>AJAX: XHR, jQuery and Fetch API</title>
      <link>http://nodejh.com/post/ajax-xhr-jquery-and-fetch-api/</link>
      <pubDate>Mon, 26 Sep 2016 19:58:03 +0800</pubDate>
      
      <guid>http://nodejh.com/post/ajax-xhr-jquery-and-fetch-api/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯¦ç»†è®²è¿°å¦‚ä½•ä½¿ç”¨åŸç”Ÿ JSã€jQuery å’Œ Fetch æ¥å®ç° AJAXã€‚&lt;/p&gt;

&lt;p&gt;AJAX å³ Asynchronous JavaScript and XMLï¼Œå¼‚æ­¥çš„ JavaScript å’Œ XMLã€‚ä½¿ç”¨ AJAX å¯ä»¥æ— åˆ·æ–°åœ°å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚æ¥æ”¶æœåŠ¡ç«¯å“åº”ï¼Œå¹¶æ›´æ–°é¡µé¢ã€‚&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;h2 id=&#34;ä¸€-åŸç”Ÿ-js-å®ç°-ajax&#34;&gt;ä¸€ã€åŸç”Ÿ JS å®ç° AJAX&lt;/h2&gt;

&lt;p&gt;JS å®ç° AJAX ä¸»è¦åŸºäºæµè§ˆå™¨æä¾›çš„ XMLHttpRequestï¼ˆXHRï¼‰ç±»ï¼Œæ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ˆIE7+ã€Firefoxã€Chromeã€Safari ä»¥åŠ Operaï¼‰å‡å†…å»º XMLHttpRequest å¯¹è±¡ã€‚&lt;/p&gt;

&lt;h4 id=&#34;1-è·å–xmlhttprequestå¯¹è±¡&#34;&gt;1. è·å–XMLHttpRequestå¯¹è±¡&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;// è·å–XMLHttpRequestå¯¹è±¡
var xhr = new XMLHttpRequest();
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚æœéœ€è¦å…¼å®¹è€ç‰ˆæœ¬çš„ IE (IE5, IE6) æµè§ˆå™¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ ActiveX å¯¹è±¡ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;var xhr;
if (window.XMLHttpRequest) { // Mozilla, Safari...
  xhr = new XMLHttpRequest();
} else if (window.ActiveXObject) { // IE
  try {
    xhr = new ActiveXObject(&#39;Msxml2.XMLHTTP&#39;);
  } catch (e) {
    try {
      xhr = new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;);
    } catch (e) {}
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;2-å‘é€ä¸€ä¸ª-http-è¯·æ±‚&#34;&gt;2. å‘é€ä¸€ä¸ª HTTP è¯·æ±‚&lt;/h4&gt;

&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ‰“å¼€ä¸€ä¸ªURLï¼Œç„¶åå‘é€è¿™ä¸ªè¯·æ±‚ã€‚åˆ†åˆ«è¦ç”¨åˆ° XMLHttpRequest çš„ open() æ–¹æ³•å’Œ send() æ–¹æ³•ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// GET
var xhr;
if (window.XMLHttpRequest) { // Mozilla, Safari...
  xhr = new XMLHttpRequest();
} else if (window.ActiveXObject) { // IE
  try {
    xhr = new ActiveXObject(&#39;Msxml2.XMLHTTP&#39;);
  } catch (e) {
    try {
      xhr = new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;);
    } catch (e) {}
  }
}
if (xhr) {
  xhr.open(&#39;GET&#39;, &#39;/api?username=admin&amp;amp;password=root&#39;, true);
  xhr.send(null);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;// POST
var xhr;
if (window.XMLHttpRequest) { // Mozilla, Safari...
  xhr = new XMLHttpRequest();
} else if (window.ActiveXObject) { // IE
  try {
    xhr = new ActiveXObject(&#39;Msxml2.XMLHTTP&#39;);
  } catch (e) {
    try {
      xhr = new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;);
    } catch (e) {}
  }
}
if (xhr) {
  xhr.open(&#39;POST&#39;, &#39;/api&#39;, true);
  // è®¾ç½® Content-Type ä¸º application/x-www-form-urlencoded
  // ä»¥è¡¨å•çš„å½¢å¼ä¼ é€’æ•°æ®
  xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;);
  xhr.send(&#39;username=admin&amp;amp;password=root&#39;);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;open()&lt;/code&gt; æ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;open()&lt;/code&gt; çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ HTTP è¯·æ±‚æ–¹å¼ â€“ GETï¼ŒPOSTï¼ŒHEAD æˆ–ä»»ä½•æœåŠ¡å™¨æ‰€æ”¯æŒçš„æ‚¨æƒ³è°ƒç”¨çš„æ–¹å¼ã€‚æŒ‰ç…§HTTPè§„èŒƒï¼Œè¯¥å‚æ•°è¦å¤§å†™ï¼›å¦åˆ™ï¼ŒæŸäº›æµè§ˆå™¨(å¦‚Firefox)å¯èƒ½æ— æ³•å¤„ç†è¯·æ±‚ã€‚æœ‰å…³HTTPè¯·æ±‚æ–¹æ³•çš„è¯¦ç»†ä¿¡æ¯å¯å‚è€ƒ &lt;a href=&#34;https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html&#34;&gt;https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯·æ±‚é¡µé¢çš„ URLã€‚ç”±äºåŒæºç­–ç•¥ï¼ˆSame origin policyï¼‰è¯¥é¡µé¢ä¸èƒ½ä¸ºç¬¬ä¸‰æ–¹åŸŸåçš„é¡µé¢ã€‚åŒæ—¶ä¸€å®šè¦ä¿è¯åœ¨æ‰€æœ‰çš„é¡µé¢ä¸­éƒ½ä½¿ç”¨å‡†ç¡®çš„åŸŸåï¼Œå¦åˆ™è°ƒç”¨ &lt;code&gt;open()&lt;/code&gt; ä¼šå¾—åˆ° &lt;code&gt;permission denied&lt;/code&gt; çš„é”™è¯¯æç¤ºã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®è¯·æ±‚æ˜¯å¦ä¸ºå¼‚æ­¥æ¨¡å¼ã€‚å¦‚æœæ˜¯ &lt;code&gt;TRUE&lt;/code&gt;ï¼ŒJavaScript å‡½æ•°å°†ç»§ç»­æ‰§è¡Œï¼Œè€Œä¸ç­‰å¾…æœåŠ¡å™¨å“åº”ã€‚è¿™å°±æ˜¯ AJAX ä¸­çš„ Aã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ &lt;code&gt;GET&lt;/code&gt;ï¼Œåˆ™å¯ä»¥ç›´æ¥å°†å‚æ•°æ”¾åœ¨ url åé¢ï¼Œå¦‚ï¼š&lt;code&gt;http://nodejh.com/api?name=admint&amp;amp;password=root&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ &lt;code&gt;POST&lt;/code&gt;ï¼Œåˆ™éœ€è¦å°†å‚æ•°å†™åœ¨ send() æ–¹æ³•é‡Œé¢ã€‚send() æ–¹æ³•çš„å‚æ•°å¯ä»¥æ˜¯ä»»ä½•æƒ³é€ç»™æœåŠ¡å™¨çš„æ•°æ®ã€‚è¿™æ—¶æ•°æ®è¦ä»¥å­—ç¬¦ä¸²çš„å½¢å¼é€ç»™æœåŠ¡å™¨ï¼Œå¦‚ï¼š&lt;code&gt;name=admint&amp;amp;password=root&lt;/code&gt;ã€‚æˆ–è€…ä¹Ÿå¯ä»¥ä¼ é€’ JSON æ ¼å¼çš„æ•°æ®ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// è®¾ç½® Content-Type ä¸º application/json
xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/json&#39;);
// ä¼ é€’ JSON å­—ç¬¦ä¸²
xhr.send(JSON.stringify({ username:&#39;admin&#39;, password:&#39;root&#39; }));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚æœä¸è®¾ç½®è¯·æ±‚å¤´ï¼ŒåŸç”Ÿ AJAX ä¼šé»˜è®¤ä½¿ç”¨ Content-Type æ˜¯ &lt;code&gt;text/plain;charset=UTF-8&lt;/code&gt; çš„æ–¹å¼å‘é€æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;å…³äº Content-Type æ›´è¯¦ç»†çš„å†…å®¹ï¼Œå°†åœ¨ä»¥åçš„æ–‡ç« ä¸­è§£é‡Šè¯´æ˜ã€‚&lt;/p&gt;

&lt;h4 id=&#34;3-å¤„ç†æœåŠ¡å™¨çš„å“åº”&#34;&gt;3. å¤„ç†æœåŠ¡å™¨çš„å“åº”&lt;/h4&gt;

&lt;p&gt;å½“å‘é€è¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šå¦‚ä½•å¤„ç†æœåŠ¡å™¨çš„å“åº”ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ° onreadystatechange å±æ€§æ¥æ£€æµ‹æœåŠ¡å™¨çš„å“åº”çŠ¶æ€ã€‚ä½¿ç”¨ onreadystatechange æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€æ˜¯ç›´æ¥ onreadystatechange å±æ€§æŒ‡å®šä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°åï¼ŒäºŒæ˜¯ä½¿ç”¨ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// æ–¹æ³•ä¸€ æŒ‡å®šå¯è°ƒç”¨çš„å‡½æ•°
xhr.onreadystatechange = onReadyStateChange;
function onReadyStateChange() {
  // do something
}

// æ–¹æ³•äºŒ ä½¿ç”¨åŒ¿åå‡½æ•°
xhr.onreadystatechange = function(){
    // do the thing
};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åœ¨å†…éƒ¨åˆ©ç”¨ readyState å±æ€§æ¥è·å–å½“å‰çš„çŠ¶æ€ï¼Œå½“ readyState çš„å€¼ä¸º 4ï¼Œå°±æ„å‘³ç€ä¸€ä¸ªå®Œæ•´çš„æœåŠ¡å™¨å“åº”å·²ç»æ”¶åˆ°äº†ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥å¤„ç†è¯¥å“åº”ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// readyStateçš„å–å€¼å¦‚ä¸‹
// 0 (æœªåˆå§‹åŒ–)
// 1 (æ­£åœ¨è£…è½½)
// 2 (è£…è½½å®Œæ¯•)
// 3 (äº¤äº’ä¸­)
// 4 (å®Œæˆ)
if (xhr.readyState === 4) {
    // everything is good, the response is received
} else {
    // still not ready
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// POST
var xhr;
if (window.XMLHttpRequest) { // Mozilla, Safari...
  xhr = new XMLHttpRequest();
} else if (window.ActiveXObject) { // IE
  try {
    xhr = new ActiveXObject(&#39;Msxml2.XMLHTTP&#39;);
  } catch (e) {
    try {
      xhr = new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;);
    } catch (e) {}
  }
}
if (xhr) {
  xhr.onreadystatechange = onReadyStateChange;
  xhr.open(&#39;POST&#39;, &#39;/api&#39;, true);
  // è®¾ç½® Content-Type ä¸º application/x-www-form-urlencoded
  // ä»¥è¡¨å•çš„å½¢å¼ä¼ é€’æ•°æ®
  xhr.setRequestHeader(&#39;Content-Type&#39;, &#39;application/x-www-form-urlencoded&#39;);
  xhr.send(&#39;username=admin&amp;amp;password=root&#39;);
}


// onreadystatechange æ–¹æ³•
function onReadyStateChange() {
  // è¯¥å‡½æ•°ä¼šè¢«è°ƒç”¨å››æ¬¡
  console.log(xhr.readyState);
  if (xhr.readyState === 4) {
    // everything is good, the response is received
    if (xhr.status === 200) {
      console.log(xhr.responseText);
    } else {
      console.log(&#39;There was a problem with the request.&#39;);
    }
  } else {
    // still not ready
    console.log(&#39;still not ready...&#39;);
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å½“ç„¶æˆ‘ä»¬å¯ä»¥ç”¨onloadæ¥ä»£æ›¿onreadystatechangeç­‰äº4çš„æƒ…å†µï¼Œå› ä¸ºonloadåªåœ¨çŠ¶æ€ä¸º4çš„æ—¶å€™æ‰è¢«è°ƒç”¨ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;xhr.onload = function () {    // è°ƒç”¨onload
    if (xhr.status === 200) {    // statusä¸º200è¡¨ç¤ºè¯·æ±‚æˆåŠŸ
        console.log(&#39;æ‰§è¡ŒæˆåŠŸ&#39;);
    } else {
        console.log(&#39;æ‰§è¡Œå‡ºé”™&#39;);
    }   
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶è€Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒIEå¯¹ onload å±æ€§çš„æ”¯æŒå¹¶ä¸å‹å¥½ã€‚é™¤äº† onload è¿˜æœ‰ä»¥ä¸‹å‡ ä¸ªå±æ€§ä¹Ÿå¯ä»¥ç”¨æ¥ç›‘æµ‹å“åº”çŠ¶æ€ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;onloadstart&lt;/li&gt;
&lt;li&gt;onprogress&lt;/li&gt;
&lt;li&gt;onabort&lt;/li&gt;
&lt;li&gt;ontimeout&lt;/li&gt;
&lt;li&gt;onerror&lt;/li&gt;
&lt;li&gt;onloadend&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;äºŒ-jquery-å®ç°-ajax&#34;&gt;äºŒã€ jQuery å®ç° AJAX&lt;/h2&gt;

&lt;p&gt;jQuery ä½œä¸ºä¸€ä¸ªä½¿ç”¨äººæ•°æœ€å¤šçš„åº“ï¼Œå…¶ AJAX å¾ˆå¥½çš„å°è£…äº†åŸç”Ÿ AJAX çš„ä»£ç ï¼Œåœ¨å…¼å®¹æ€§å’Œæ˜“ç”¨æ€§æ–¹é¢éƒ½åšäº†å¾ˆå¤§çš„æé«˜ï¼Œè®© AJAX çš„è°ƒç”¨å˜å¾—éå¸¸ç®€å•ã€‚ä¸‹é¢ä¾¿æ˜¯ä¸€æ®µç®€å•çš„ jQuery çš„ AJAX ä»£ç ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$.ajax({
  method: &#39;POST&#39;,
  url: &#39;/api&#39;,
  data: { username: &#39;admin&#39;, password: &#39;root&#39; }
})
  .done(function(msg) {
    alert( &#39;Data Saved: &#39; + msg );
  });
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯¹æ¯”åŸç”Ÿ AJAX çš„å®ç°ï¼Œä½¿ç”¨ jQuery å°±å¼‚å¸¸ç®€å•äº†ã€‚å½“ç„¶æˆ‘ä»¬å¹³æ—¶ç”¨çš„æœ€å¤šçš„ï¼Œæ˜¯ä¸‹é¢ä¸¤ç§æ›´ç®€å•çš„æ–¹å¼ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// GET
$.get(&#39;/api&#39;, function(res) {
  // do something
});

// POST
var data = {
  username: &#39;admin&#39;,
  password: &#39;root&#39;
};
$.post(&#39;/api&#39;, data, function(res) {
  // do something
});
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ä¸‰-fetch-api&#34;&gt;ä¸‰ã€Fetch API&lt;/h2&gt;

&lt;p&gt;ä½¿ç”¨ jQuery è™½ç„¶å¯ä»¥å¤§å¤§ç®€åŒ– XMLHttpRequest çš„ä½¿ç”¨ï¼Œä½† XMLHttpRequest æœ¬è´¨ä¸Šä½†å¹¶ä¸æ˜¯ä¸€ä¸ªè®¾è®¡ä¼˜è‰¯çš„ APIï¼š
+ ä¸ç¬¦åˆå…³æ³¨åˆ†ç¦»ï¼ˆSeparation of Concernsï¼‰çš„åŸåˆ™
+ é…ç½®å’Œè°ƒç”¨æ–¹å¼éå¸¸æ··ä¹±
+ ä½¿ç”¨äº‹ä»¶æœºåˆ¶æ¥è·Ÿè¸ªçŠ¶æ€å˜åŒ–
+ åŸºäºäº‹ä»¶çš„å¼‚æ­¥æ¨¡å‹æ²¡æœ‰ç°ä»£çš„ Promiseï¼Œgenerator/yieldï¼Œasync/await å‹å¥½&lt;/p&gt;

&lt;p&gt;Fetch API æ—¨åœ¨ä¿®æ­£ä¸Šè¿°ç¼ºé™·ï¼Œå®ƒæä¾›äº†ä¸ HTTP è¯­ä¹‰ç›¸åŒçš„ JS è¯­æ³•ï¼Œç®€å•æ¥è¯´ï¼Œå®ƒå¼•å…¥äº† &lt;code&gt;fetch()&lt;/code&gt; è¿™ä¸ªå®ç”¨çš„æ–¹æ³•æ¥è·å–ç½‘ç»œèµ„æºã€‚&lt;/p&gt;

&lt;p&gt;Fetch çš„æµè§ˆå™¨å…¼å®¹å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://nodejh.com/images/ajax-js-jquery-and-fetch-api-0.png&#34; alt=&#34;ajax-js-jquery-and-fetch-api-0.png&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åŸç”Ÿæ”¯æŒç‡å¹¶ä¸é«˜ï¼Œå¹¸è¿çš„æ˜¯ï¼Œå¼•å…¥ä¸‹é¢è¿™äº› polyfill åå¯ä»¥å®Œç¾æ”¯æŒ IE8+ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ç”±äº IE8 æ˜¯ ES3ï¼Œéœ€è¦å¼•å…¥ ES5 çš„ polyfill: &lt;a href=&#34;https://github.com/es-shims/es5-shim&#34;&gt;es5-shim, es5-sham&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å¼•å…¥ Promise çš„ polyfill: &lt;a href=&#34;https://github.com/stefanpenner/es6-promise&#34;&gt;es6-promise&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å¼•å…¥ fetch æ¢æµ‹åº“ï¼š&lt;a href=&#34;https://github.com/camsong/fetch-detector&#34;&gt;fetch-detector&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å¼•å…¥ fetch çš„ polyfill: &lt;a href=&#34;https://github.com/camsong/fetch-ie8&#34;&gt;fetch-ie8&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å¯é€‰ï¼šå¦‚æœä½ è¿˜ä½¿ç”¨äº† jsonpï¼Œå¼•å…¥ &lt;a href=&#34;https://github.com/camsong/fetch-jsonp&#34;&gt;fetch-jsonp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å¯é€‰ï¼šå¼€å¯ Babel çš„ runtime æ¨¡å¼ï¼Œç°åœ¨å°±ä½¿ç”¨ async/await&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;1-ä¸€ä¸ªä½¿ç”¨-fetch-çš„ä¾‹å­&#34;&gt;1. ä¸€ä¸ªä½¿ç”¨ Fetch çš„ä¾‹å­&lt;/h4&gt;

&lt;p&gt;å…ˆçœ‹ä¸€ä¸ªç®€å•çš„ Fetch API çš„ä¾‹å­ ğŸŒ° ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;fetch(&#39;/api&#39;).then(function(response) {
  return response.json();
}).then(function(data) {
  console.log(data);
}).catch(function(error) {
  console.log(&#39;Oops, error: &#39;, error);
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½¿ç”¨ ES6 çš„ç®­å¤´å‡½æ•°åï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;fetch(&#39;/api&#39;).then(response =&amp;gt; response.json())
  .then(data =&amp;gt; console.log(data))
  .catch(error =&amp;gt; console.log(&#39;Oops, error: &#39;, error))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥çœ‹å‡ºä½¿ç”¨Fetchåæˆ‘ä»¬çš„ä»£ç æ›´åŠ ç®€æ´å’Œè¯­ä¹‰åŒ–ï¼Œé“¾å¼è°ƒç”¨çš„æ–¹å¼ä¹Ÿä½¿å…¶æ›´åŠ æµç•…å’Œæ¸…æ™°ã€‚ä½†è¿™ç§åŸºäº Promise çš„å†™æ³•è¿˜æ˜¯æœ‰ Callback çš„å½±å­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ &lt;code&gt;async/await&lt;/code&gt; æ¥åšæœ€ç»ˆä¼˜åŒ–ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;async function() {
  try {
    let response = await fetch(url);
    let data = response.json();
    console.log(data);
  } catch (error) {
    console.log(&#39;Oops, error: &#39;, error);
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½¿ç”¨ &lt;code&gt;await&lt;/code&gt; åï¼Œå†™ä»£ç å°±æ›´è·ŸåŒæ­¥ä»£ç ä¸€æ ·ã€‚&lt;code&gt;await&lt;/code&gt; åé¢å¯ä»¥è·Ÿ Promise å¯¹è±¡ï¼Œè¡¨ç¤ºç­‰å¾… Promise &lt;code&gt;resolve()&lt;/code&gt; æ‰ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œå¦‚æœ Promise è¢« &lt;code&gt;reject()&lt;/code&gt; æˆ–æŠ›å‡ºå¼‚å¸¸åˆ™ä¼šè¢«å¤–é¢çš„ &lt;code&gt;try...catch&lt;/code&gt; æ•è·ã€‚&lt;/p&gt;

&lt;p&gt;Promiseï¼Œgenerator/yieldï¼Œawait/async éƒ½æ˜¯ç°åœ¨å’Œæœªæ¥ JS è§£å†³å¼‚æ­¥çš„æ ‡å‡†åšæ³•ï¼Œå¯ä»¥å®Œç¾æ­é…ä½¿ç”¨ã€‚è¿™ä¹Ÿæ˜¯ä½¿ç”¨æ ‡å‡† Promise ä¸€å¤§å¥½å¤„ã€‚&lt;/p&gt;

&lt;h4 id=&#34;2-ä½¿ç”¨-fetch-çš„æ³¨æ„äº‹é¡¹&#34;&gt;2. ä½¿ç”¨ Fetch çš„æ³¨æ„äº‹é¡¹&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;Fetch è¯·æ±‚é»˜è®¤æ˜¯ä¸å¸¦ cookieï¼Œéœ€è¦è®¾ç½® &lt;code&gt;fetch(url, {credentials: &#39;include&#39;})&lt;/code&gt;`&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨è¿”å› 400ï¼Œ500 é”™è¯¯ç æ—¶å¹¶ä¸ä¼š rejectï¼Œåªæœ‰ç½‘ç»œé”™è¯¯è¿™äº›å¯¼è‡´è¯·æ±‚ä¸èƒ½å®Œæˆæ—¶ï¼Œfetch æ‰ä¼šè¢« reject&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ¥ä¸‹æ¥å°†ä¸Šé¢åŸºäº XMLHttpRequest çš„ AJAX ç”¨ Fetch æ”¹å†™ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;var options = {
    method: &#39;POST&#39;,
    headers: {
      &#39;Accept&#39;: &#39;application/json&#39;,
      &#39;Content-Type&#39;: &#39;application/json&#39;
    },
    body: JSON.stringify({ username: &#39;admin&#39;, password: &#39;root&#39; }),
    credentials: &#39;include&#39;
  };

fetch(&#39;/api&#39;, options).then(response =&amp;gt; response.json())
  .then(data =&amp;gt; console.log(data))
  .catch(error =&amp;gt; console.log(&#39;Oops, error: &#39;, error))
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;p&gt;Github Issue: &lt;a href=&#34;https://github.com/nodejh/nodejh.github.io/issues/15&#34;&gt;https://github.com/nodejh/nodejh.github.io/issues/15&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Get Chinese Phonetic Syllable With JS</title>
      <link>http://nodejh.com/post/Get-Chinese-Phonetic-Syllable-With-JS/</link>
      <pubDate>Wed, 13 Apr 2016 10:35:40 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Get-Chinese-Phonetic-Syllable-With-JS/</guid>
      <description>&lt;h3 id=&#34;æœ€ç»ˆå‡½æ•°&#34;&gt;æœ€ç»ˆå‡½æ•°&lt;/h3&gt;

&lt;p&gt;æœ€è¿‘åœ¨æŠ“å– Rice å¤§å­¦çš„åšå£«ç”Ÿå§“åï¼Œå¹¶ä»ä¸­è·å–åˆ°ä¸­å›½äººçš„å§“åã€‚ç”±äºåšå£«æœ‰ä¸­å›½äººå’Œå¤–å›½äººï¼Œè€Œä¸­å›½äººçš„å§“åæ˜¯ç”±æ‹¼éŸ³ç»„æˆï¼Œæ‰€ä»¥æœ€ç»ˆéœ€æ±‚æ˜¯è¿™æ ·çš„ï¼Œåˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯ç”±æ‹¼éŸ³éŸ³èŠ‚ç»„æˆã€‚äºæ˜¯å†™äº†ä¸‹é¢è¿™ä¸ªå‡½æ•°ï¼š&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/**
 * åˆ¤æ–­è¾“å…¥çš„ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯æ‹¼éŸ³
 * @param string éœ€è¦æµ‹è¯•çš„å­—ç¬¦ä¸²
 * @returns {*}
 */
function is_pinyin(string) {

  var list = [&#39;a&#39;, &#39;ai&#39;, &#39;an&#39;, &#39;ang&#39;, &#39;ao&#39;, &#39;ba&#39;, &#39;bai&#39;, &#39;ban&#39;, &#39;bang&#39;, &#39;bao&#39;, &#39;bei&#39;, &#39;ben&#39;,
    &#39;beng&#39;, &#39;bi&#39;, &#39;bian&#39;, &#39;biao&#39;, &#39;bie&#39;, &#39;bin&#39;, &#39;bing&#39;, &#39;bo&#39;, &#39;bu&#39;, &#39;ca&#39;, &#39;cai&#39;, &#39;can&#39;, &#39;cang&#39;,
    &#39;cao&#39;, &#39;ce&#39;, &#39;cen&#39;, &#39;ceng&#39;, &#39;cha&#39;, &#39;chai&#39;, &#39;chan&#39;, &#39;chang&#39;, &#39;chao&#39;, &#39;che&#39;, &#39;chen&#39;, &#39;cheng&#39;, &#39;chi&#39;,
    &#39;chong&#39;, &#39;chou&#39;, &#39;chu&#39;, &#39;chua&#39;, &#39;chuai&#39;, &#39;chuan&#39;, &#39;chuang&#39;, &#39;chui&#39;, &#39;chun&#39;, &#39;chuo&#39;, &#39;ci&#39;, &#39;cong&#39;,
    &#39;cou&#39;, &#39;cu&#39;, &#39;cuan&#39;, &#39;cui&#39;, &#39;cun&#39;, &#39;cuo&#39;, &#39;da&#39;, &#39;dai&#39;, &#39;dan&#39;, &#39;dang&#39;, &#39;dao&#39;, &#39;de&#39;, &#39;dei&#39;, &#39;den&#39;,
    &#39;deng&#39;, &#39;di&#39;, &#39;dia&#39;, &#39;dian&#39;, &#39;diao&#39;, &#39;die&#39;, &#39;ding&#39;, &#39;diu&#39;, &#39;dong&#39;, &#39;dou&#39;, &#39;du&#39;, &#39;duan&#39;, &#39;dui&#39;, &#39;dun&#39;,
    &#39;duo&#39;, &#39;e&#39;, &#39;en&#39;, &#39;eng&#39;, &#39;er&#39;, &#39;fa&#39;, &#39;fan&#39;, &#39;fang&#39;, &#39;fei&#39;, &#39;fen&#39;, &#39;feng&#39;, &#39;fiao&#39;, &#39;fo&#39;, &#39;fou&#39;, &#39;fu&#39;,
    &#39;ga&#39;, &#39;gai&#39;, &#39;gan&#39;, &#39;gang&#39;, &#39;gao&#39;, &#39;ge&#39;, &#39;gei&#39;, &#39;gen&#39;, &#39;geng&#39;, &#39;gong&#39;, &#39;gou&#39;, &#39;gu&#39;, &#39;gua&#39;, &#39;guai&#39;, &#39;guan&#39;,
    &#39;guang&#39;, &#39;gui&#39;, &#39;gun&#39;, &#39;guo&#39;, &#39;ha&#39;, &#39;hai&#39;, &#39;han&#39;, &#39;hang&#39;, &#39;hao&#39;, &#39;he&#39;, &#39;hei&#39;, &#39;hen&#39;, &#39;heng&#39;, &#39;hong&#39;, &#39;hou&#39;,
    &#39;hu&#39;, &#39;hua&#39;, &#39;huai&#39;, &#39;huan&#39;, &#39;huang&#39;, &#39;hui&#39;, &#39;hun&#39;, &#39;huo&#39;, &#39;ji&#39;, &#39;jia&#39;, &#39;jian&#39;, &#39;jiang&#39;, &#39;jiao&#39;, &#39;jie&#39;,
    &#39;jin&#39;, &#39;jing&#39;, &#39;jiong&#39;, &#39;jiu&#39;, &#39;ju&#39;, &#39;juan&#39;, &#39;jue&#39;, &#39;ka&#39;, &#39;kai&#39;, &#39;kan&#39;, &#39;kang&#39;, &#39;kao&#39;, &#39;ke&#39;, &#39;ken&#39;,
    &#39;keng&#39;, &#39;kong&#39;, &#39;kou&#39;, &#39;ku&#39;, &#39;kua&#39;, &#39;kuai&#39;, &#39;kuan&#39;, &#39;kuang&#39;, &#39;kui&#39;, &#39;kun&#39;, &#39;kuo&#39;, &#39;la&#39;, &#39;lai&#39;, &#39;lan&#39;,
    &#39;lang&#39;, &#39;lao&#39;, &#39;le&#39;, &#39;lei&#39;, &#39;leng&#39;, &#39;li&#39;, &#39;lia&#39;, &#39;lian&#39;, &#39;liang&#39;, &#39;liao&#39;, &#39;lie&#39;, &#39;lin&#39;, &#39;ling&#39;, &#39;liu&#39;,
    &#39;lo&#39;, &#39;long&#39;, &#39;lou&#39;, &#39;lu&#39;, &#39;luan&#39;, &#39;lun&#39;, &#39;luo&#39;, &#39;lv&#39;, &#39;lve&#39;, &#39;ma&#39;, &#39;mai&#39;, &#39;man&#39;, &#39;mang&#39;, &#39;mao&#39;, &#39;me&#39;,
    &#39;mei&#39;, &#39;men&#39;, &#39;meng&#39;, &#39;mi&#39;, &#39;mian&#39;, &#39;miao&#39;, &#39;mie&#39;, &#39;min&#39;, &#39;ming&#39;, &#39;miu&#39;, &#39;mo&#39;, &#39;mou&#39;, &#39;mu&#39;, &#39;na&#39;, &#39;nai&#39;,
    &#39;nan&#39;, &#39;nang&#39;, &#39;nao&#39;, &#39;ne&#39;, &#39;nei&#39;, &#39;nen&#39;, &#39;neng&#39;, &#39;ni&#39;, &#39;nian&#39;, &#39;niang&#39;, &#39;niao&#39;, &#39;nie&#39;, &#39;nin&#39;, &#39;ning&#39;,
    &#39;niu&#39;, &#39;nong&#39;, &#39;nou&#39;, &#39;nu&#39;, &#39;nuan&#39;, &#39;nun&#39;, &#39;nuo&#39;, &#39;nv&#39;, &#39;nve&#39;, &#39;o&#39;, &#39;ou&#39;, &#39;pa&#39;, &#39;pai&#39;, &#39;pan&#39;, &#39;pang&#39;, &#39;pao&#39;,
    &#39;pei&#39;, &#39;pen&#39;, &#39;peng&#39;, &#39;pi&#39;, &#39;pian&#39;, &#39;piao&#39;, &#39;pie&#39;, &#39;pin&#39;, &#39;ping&#39;, &#39;po&#39;, &#39;pou&#39;, &#39;pu&#39;, &#39;qi&#39;, &#39;qia&#39;, &#39;qian&#39;,
    &#39;qiang&#39;, &#39;qiao&#39;, &#39;qie&#39;, &#39;qin&#39;, &#39;qing&#39;, &#39;qiong&#39;, &#39;qiu&#39;, &#39;qu&#39;, &#39;quan&#39;, &#39;que&#39;, &#39;qun&#39;, &#39;ran&#39;, &#39;rang&#39;, &#39;rao&#39;,
    &#39;re&#39;, &#39;ren&#39;, &#39;reng&#39;, &#39;ri&#39;, &#39;rong&#39;, &#39;rou&#39;, &#39;ru&#39;, &#39;rua&#39;, &#39;ruan&#39;, &#39;rui&#39;, &#39;run&#39;, &#39;ruo&#39;, &#39;sa&#39;, &#39;sai&#39;, &#39;san&#39;,
    &#39;sang&#39;, &#39;sao&#39;, &#39;se&#39;, &#39;sen&#39;, &#39;seng&#39;, &#39;sha&#39;, &#39;shai&#39;, &#39;shan&#39;, &#39;shang&#39;, &#39;shao&#39;, &#39;she&#39;, &#39;shei&#39;, &#39;shen&#39;, &#39;sheng&#39;,
    &#39;shi&#39;, &#39;shou&#39;, &#39;shu&#39;, &#39;shua&#39;, &#39;shuai&#39;, &#39;shuan&#39;, &#39;shuang&#39;, &#39;shui&#39;, &#39;shun&#39;, &#39;shuo&#39;, &#39;si&#39;, &#39;song&#39;, &#39;sou&#39;,
    &#39;su&#39;, &#39;suan&#39;, &#39;sui&#39;, &#39;sun&#39;, &#39;suo&#39;, &#39;ta&#39;, &#39;tai&#39;, &#39;tan&#39;, &#39;tang&#39;, &#39;tao&#39;, &#39;te&#39;, &#39;tei&#39;, &#39;teng&#39;, &#39;ti&#39;, &#39;tian&#39;,
    &#39;tiao&#39;, &#39;tie&#39;, &#39;ting&#39;, &#39;tong&#39;, &#39;tou&#39;, &#39;tu&#39;, &#39;tuan&#39;, &#39;tui&#39;, &#39;tun&#39;, &#39;tuo&#39;, &#39;wa&#39;, &#39;wai&#39;, &#39;wan&#39;, &#39;wang&#39;,
    &#39;wei&#39;, &#39;wen&#39;, &#39;weng&#39;, &#39;wo&#39;, &#39;wu&#39;, &#39;xi&#39;, &#39;xia&#39;, &#39;xian&#39;, &#39;xiang&#39;, &#39;xiao&#39;, &#39;xie&#39;, &#39;xin&#39;, &#39;xing&#39;, &#39;xiong&#39;,
    &#39;xiu&#39;, &#39;xu&#39;, &#39;xuan&#39;, &#39;xue&#39;, &#39;xun&#39;, &#39;ya&#39;, &#39;yan&#39;, &#39;yang&#39;, &#39;yao&#39;, &#39;ye&#39;, &#39;yi&#39;, &#39;yin&#39;, &#39;ying&#39;, &#39;yo&#39;, &#39;yong&#39;,
    &#39;you&#39;, &#39;yu&#39;, &#39;yuan&#39;, &#39;yue&#39;, &#39;yun&#39;, &#39;za&#39;, &#39;zai&#39;, &#39;zan&#39;, &#39;zang&#39;, &#39;zao&#39;, &#39;ze&#39;, &#39;zei&#39;, &#39;zen&#39;, &#39;zeng&#39;, &#39;zha&#39;,
    &#39;zhai&#39;, &#39;zhan&#39;, &#39;zhang&#39;, &#39;zhao&#39;, &#39;zhe&#39;, &#39;zhei&#39;, &#39;zhen&#39;, &#39;zheng&#39;, &#39;zhi&#39;, &#39;zhong&#39;, &#39;zhou&#39;, &#39;zhu&#39;, &#39;zhua&#39;,
    &#39;zhuai&#39;, &#39;zhuan&#39;, &#39;zhuang&#39;, &#39;zhui&#39;, &#39;zhun&#39;, &#39;zhuo&#39;, &#39;zi&#39;, &#39;zong&#39;, &#39;zou&#39;, &#39;zu&#39;, &#39;zuan&#39;, &#39;zui&#39;, &#39;zun&#39;, &#39;zuo&#39;];
  var lowerString = string.toLowerCase();
  var length = lowerString.length;
  var index = -1;

  for (var i=0; i&amp;lt;length; i++) {
    var name = lowerString.substring(0, i+1);
    index = list.lastIndexOf(name) &amp;gt; index ? list.lastIndexOf(name) : index;
  }
  
  // åˆ¤æ–­å½“å‰ lowerString æ˜¯ä¸æ˜¯æ‹¼éŸ³(lowerString åœ¨ list ä¸­å°±æ˜¯;ä¸åœ¨å°±ä¸æ˜¯)
  if (index &amp;gt;= 0) {
    var item = list[index];
     lowerString = lowerString.substring(item.length);
    if (lowerString.length == 0) {
      return string;
    } else {
       return arguments.callee(lowerString);
    }
  } else {
    return false;
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;æ€è·¯&#34;&gt;æ€è·¯&lt;/h3&gt;

&lt;h4 id=&#34;1-æ‰¾åˆ°æ‰€æœ‰æ‹¼éŸ³éŸ³èŠ‚è¡¨&#34;&gt;1. æ‰¾åˆ°æ‰€æœ‰æ‹¼éŸ³éŸ³èŠ‚è¡¨&lt;/h4&gt;

&lt;p&gt;é¦–å…ˆæ˜¯æ‰¾åˆ°æ‰€æœ‰çš„æ‹¼éŸ³åˆ—è¡¨ï¼Œå°†å…¶å­˜å…¥æ•°ç»„ &lt;code&gt;ist&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ±‰è¯­çš„æ‹¼éŸ³éŸ³èŠ‚å…± 399 ä¸ªï¼Œå¯ä»¥åœ¨ç™¾åº¦ç™¾ç§‘æ‰¾åˆ°ï¼š&lt;a href=&#34;http://baike.baidu.com/view/1253220.htm&#34;&gt;æ±‰è¯­æ‹¼éŸ³éŸ³èŠ‚&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&#34;2-é€’å½’åˆ¤æ–­å­—ç¬¦ä¸²&#34;&gt;2. é€’å½’åˆ¤æ–­å­—ç¬¦ä¸²&lt;/h4&gt;

&lt;p&gt;æ¥ä¸‹æ¥è¦å¾ªç¯åˆ¤æ–­ä¼ å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦æ˜¯æ‹¼éŸ³éŸ³èŠ‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¦åˆ¤æ–­æ‰€ä¼ å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦åœ¨ &lt;code&gt;lsit&lt;/code&gt; æ•°ç»„ä¸­ï¼Œèªæ˜çš„å¯èƒ½æƒ³åˆ°äº†ï¼Œå¯ä»¥ç”¨ &lt;code&gt;indexOf()&lt;/code&gt; æ¥åˆ¤æ–­ã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬æ‰€è¦åˆ¤æ–­çš„å­—ç¬¦ä¸²æ˜¯å§“åï¼Œå½¢å¦‚ &lt;code&gt;jianghang&lt;/code&gt;ï¼Œæ˜¯ç”±ä¸¤ä¸ªç”šè‡³æ›´å¤šçš„æ‹¼éŸ³éŸ³èŠ‚ç»„æˆçš„ã€‚æ‰€ä»¥ä¸èƒ½ç›´æ¥ &lt;code&gt;list.indexOf(&#39;jianghang&#39;)&lt;/code&gt;ï¼Œè€Œæ˜¯è¦ä¸æ–­å¾ªç¯æˆªå– &lt;code&gt;jianghang&lt;/code&gt; è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ¤è¯»æ‰€æˆªå–çš„å­—ç¬¦ä¸²æ˜¯å¦åœ¨ &lt;code&gt;list&lt;/code&gt; æ•°ç»„ä¸­ã€‚å¦‚ç¬¬ä¸€æ¬¡å¾ªç¯æˆªå–çš„æ˜¯ &lt;code&gt;j&lt;/code&gt;ï¼Œç„¶ååˆ¤æ–­ &lt;code&gt;j&lt;/code&gt; æ˜¯å¦åœ¨ &lt;code&gt;lsit&lt;/code&gt; é‡Œé¢ï¼Œå¦‚æœä¸åœ¨ï¼Œåˆ™ç»§ç»­æˆªå– &lt;code&gt;ji&lt;/code&gt; å†åˆ¤æ–­ï¼›å¦‚æœæ˜¯ï¼Œåˆ™åˆä»å­—ç¬¦ä¸²çš„ç¬¬ä¸‰ä½å¼€å§‹ç»§ç»­åˆ¤æ–­ï¼Œç›´åˆ°åˆ¤æ–­å®Œæ•´ä¸ªå­—ç¬¦ä¸²ã€‚å…¶å®ä¹Ÿå°±æ˜¯é€’å½’ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åå¯èƒ½ä½ åˆå‘ç°äº†ï¼Œè¿™ä¹ˆåšè¿˜æ˜¯æœ‰é—®é¢˜ã€‚å› ä¸º &lt;code&gt;ji&lt;/code&gt; æ˜¯æ‹¼éŸ³éŸ³èŠ‚ï¼Œ&lt;code&gt;jia&lt;/code&gt;ã€&lt;code&gt;jian&lt;/code&gt;ã€&lt;code&gt;jiang&lt;/code&gt; ä¹Ÿéƒ½æ˜¯æ‹¼éŸ³éŸ³èŠ‚ã€‚æ‰€ä»¥è¿™å°±æ¶‰åŠåˆ°ä¸€ä¸ªæœ€ä¼˜çš„é—®é¢˜ï¼Œæˆ‘ä»¬è¦æ‰¾åˆ° &lt;code&gt;jiang&lt;/code&gt; è€Œä¸æ˜¯ &lt;code&gt;ji&lt;/code&gt; æˆ–å…¶å®ƒã€‚&lt;/p&gt;

&lt;p&gt;æ ¹æ® &lt;code&gt;lsit&lt;/code&gt; çš„è§„åˆ™ï¼Œæ’åœ¨åé¢çš„éŸ³èŠ‚æ€»æ˜¯æœ€ä¼˜çš„éŸ³èŠ‚ã€‚æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ &lt;code&gt;lastIndexOf()&lt;/code&gt; å¯¹æ•°ç»„ä»åå¾€å‰ç­›é€‰ã€‚&lt;/p&gt;

&lt;h4 id=&#34;3-è¿˜æ˜¯é€’å½’&#34;&gt;3. è¿˜æ˜¯é€’å½’&lt;/h4&gt;

&lt;p&gt;è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ &lt;code&gt;return arguments.callee(lowerString);&lt;/code&gt; è¿™ä¸€è¡Œã€‚&lt;code&gt;arguments&lt;/code&gt; æ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œå®ƒåŒ…å«ç€ä¼ å…¥å‡½æ•°çš„æ‰€æœ‰å‚æ•°ã€‚è¿™ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ª &lt;code&gt;callee&lt;/code&gt; å±æ€§ï¼Œè¯¥å±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ‹¥æœ‰ &lt;code&gt;arguments&lt;/code&gt; å¯¹è±¡çš„å‡½æ•°ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ &lt;code&gt;return  arguments.callee(lowerString)&lt;/code&gt; è€Œä¸æ˜¯ç”¨ &lt;code&gt;return is_pinyin(lowerString)&lt;/code&gt; çš„å¥½å¤„å°±æ˜¯ï¼Œå½“æˆ‘ä»¬æ”¹å˜å‡½æ•°åçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥æ­£ç¡®ä½¿ç”¨è¯¥å‡½æ•°ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Github Issue: &lt;a href=&#34;https://github.com/nodejh/nodejh.github.io/issues/8&#34;&gt;https://github.com/nodejh/nodejh.github.io/issues/8&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>