<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>MXNet on nodejh</title>
    <link>http://nodejh.com/tags/mxnet/</link>
    <description>Recent content in MXNet on nodejh</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Thu, 27 Oct 2016 15:37:29 +0800</lastBuildDate>
    <atom:link href="http://nodejh.com/tags/mxnet/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Build MXNet on macOS</title>
      <link>http://nodejh.com/post/Install-MXNet-on-macOS/</link>
      <pubDate>Thu, 27 Oct 2016 15:37:29 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Install-MXNet-on-macOS/</guid>
      <description>

&lt;p&gt;MXNet æ˜¯ä¸€ä¸ªæ·±åº¦å­¦ä¹ ç³»ç»Ÿã€‚å…³äº MXNet çš„ä»‹ç»å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š&lt;a href=&#34;https://github.com/dmlc/mxnet/issues/797&#34;&gt;ã€ŠMXNetè®¾è®¡å’Œå®ç°ç®€ä»‹ã€‹&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ macOS ä¸Šç¼–è¯‘å®‰è£… MXNet çš„å¤§ä½“æ­¥éª¤éƒ½æ˜¯æŒ‰ç…§å®˜æ–¹æ–‡æ¡£æ¥è¿›è¡Œå®‰è£…å³å¯ã€‚ä½†ç”±äºæ¯ä¸ªäººç”µè„‘ç¯å¢ƒä¸åŒï¼Œæ‰€ä»¥å¯èƒ½ä¼šå‡ºç°ä¸€äº›ä¾èµ–åº“ï¼åŒ…çš„ç¼ºå¤±ï¼Œå¯¼è‡´å®‰è£…å¤±è´¥ã€‚&lt;/p&gt;

&lt;h4 id=&#34;å®‰è£…ä¾èµ–è½¯ä»¶&#34;&gt;å®‰è£…ä¾èµ–è½¯ä»¶&lt;/h4&gt;

&lt;p&gt;åœ¨ macOS ä¸Šï¼Œé¦–å…ˆéœ€è¦å…·æœ‰ä»¥ä¸‹è½¯ä»¶ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Homebrew (to install dependencies)&lt;/li&gt;
&lt;li&gt;Git (to pull code from GitHub)&lt;/li&gt;
&lt;li&gt;Homebrew/science (for linear algebraic operations)&lt;/li&gt;
&lt;li&gt;OpenCV (for computer vision operations)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¦‚æœä¸Šè¿°å·²ç»å®‰è£…äº†ï¼Œå°±ä¸éœ€è¦å†å®‰è£…ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤å®‰è£…ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# å®‰è£… Homebrew
$ /usr/bin/ruby -e &amp;quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&amp;quot;
# å®‰è£… Git å’Œ OpenCV
$ brew update
$ brew install git
$ brew tap homebrew/science
$ brew info opencv
$ brew install opencv
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;ç¼–è¯‘-mxnet&#34;&gt;ç¼–è¯‘ MXNet&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;# ä¸‹è½½æºç 
$ git clone --recursive https://github.com/dmlc/mxnet
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åè¿˜éœ€è¦å®‰è£… &lt;code&gt;openblas&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# å®‰è£… openblas
$ brew install --fresh -vd openblas
...
Generally there are no consequences of this for you. If you build your
own software and it requires this formula, you&#39;ll need to add to your
build variables:

    LDFLAGS:  -L/usr/local/opt/openblas/lib
    CPPFLAGS: -I/usr/local/opt/openblas/include

==&amp;gt; Summary
ğŸº  /usr/local/Cellar/openblas/0.2.18_2: 20 files, 41.8M, built in 12 minutes 33 seconds
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚æœæ²¡æœ‰å®‰è£… &lt;code&gt;openblas&lt;/code&gt;ï¼Œåˆ™ä¼šæœ‰ç±»ä¼¼ &lt;code&gt;fatal error: &#39;cblas.h&#39; file not found&lt;/code&gt; çš„é”™è¯¯ï¼Œè¯¦è§ &lt;a href=&#34;https://github.com/dmlc/mxnet/issues/572&#34;&gt;https://github.com/dmlc/mxnet/issues/572&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ cd mxnet
$ cp make/osx.mk ./config.mk
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç”¨ vim æˆ–å…¶ä»–ç¼–è¾‘å™¨æ‰“å¼€ &lt;code&gt;config.mk&lt;/code&gt;ï¼Œåœ¨ &lt;code&gt;USE_BLAS = apple&lt;/code&gt; ä¸‹é¢åŠ å…¥å¦‚ä¸‹ &lt;code&gt;ADD_LDFLAGS = -I/usr/local/opt/openblas/lib&lt;/code&gt; å’Œ &lt;code&gt;ADD_CFLAGS =  -I/usr/local/opt/openblas/include&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;USE_BLAS = apple
ADD_LDFLAGS = -I/usr/local/opt/openblas/lib
ADD_CFLAGS =  -I/usr/local/opt/openblas/include
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ€åå†ç¼–è¯‘å³å¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ make -j$(sysctl -n hw.ncpu)
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;åœ¨-python-ä¸­ä½¿ç”¨-mxnet&#34;&gt;åœ¨ Python ä¸­ä½¿ç”¨ MXNet&lt;/h4&gt;

&lt;p&gt;ç¼–è¯‘å®‰è£…å®Œæˆä¹‹åï¼Œè‹¥è¦ä½¿ç”¨ MXNet çš„ Python æ¥å£ï¼Œè¿˜éœ€è¦å°† mxnet/python æ·»åŠ åˆ° Python çš„åŒ…æœç´¢è·¯å¾„ã€‚è‡³å°‘æœ‰ä¸‰ç§æ–¹å¼å¯ä»¥å®ç°ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1. python ä»£ç æ‰‹åŠ¨åŠ è½½&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;import os, sys;
cur_path = os.path.abspath(os.path.dirname(__file__));
mxnet_lib_path = os.path.join(cur_path, &#39;mxnet/python&#39;);
sys.path.append(mxnet_lib_path);
import mxnet as mx;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨æ²¡æœ‰å°† &lt;code&gt;mxnet/python&lt;/code&gt; æ·»åŠ åˆ° PYTHONPATH ä¹‹å‰ï¼Œä¾æ—§å¯ä»¥è¿è¡Œ &lt;code&gt;/example/image-classification&lt;/code&gt; é‡Œé¢çš„ä¸€äº›æµ‹è¯•æ¡ˆä¾‹ï¼Œå°±æ˜¯å› ä¸ºæ¡ˆä¾‹é‡Œé¢æœ‰ä¸€è¡Œ &lt;code&gt;import find_mxnet&lt;/code&gt;ï¼Œè€Œ &lt;code&gt;find_mxnet&lt;/code&gt; çš„ä½œç”¨å°±æ˜¯æ‰‹åŠ¨åŠ è½½ &lt;code&gt;mxnet/python&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# find_mxnet.py
try:
    import mxnet as mx
except ImportError:
    import os, sys
    curr_path = os.path.abspath(os.path.dirname(__file__))
    sys.path.append(os.path.join(curr_path, &amp;quot;../../python&amp;quot;))
    import mxnet as mx

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;2. å°†è·¯å¾„åŠ åˆ°ç¯å¢ƒå˜é‡ PYTHONPATH ä¸­&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è¿™ç§æ–¹æ³•éœ€è¦ä¿®æ”¹ shell çš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœä½¿ç”¨çš„ bashï¼Œåˆ™ä¿®æ”¹ &lt;code&gt;~/.bashrc&lt;/code&gt;ï¼›è‹¥ä½¿ç”¨çš„æ˜¯ zshï¼Œåˆ™ä¿®æ”¹ &lt;code&gt;~/.zshrc&lt;/code&gt;ï¼›å…¶ä»–ç±»ä¼¼ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ bash é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä¸‹é¢è¿™ä¸€è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;export PYTHONPATH=path_to_mxnet_root/python
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…¶ä¸­ &lt;code&gt;path_to_mxnet_root&lt;/code&gt; æ˜¯ä¸‹è½½çš„ mxnet æºç ç›®å½•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;3. å…¨å±€å®‰è£… mxnet&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ç›´æ¥è¿è¡Œ &lt;code&gt;mxnet/python/setup.py&lt;/code&gt;ï¼Œå°† mxnet æ·»åŠ åˆ°å…¨å±€è·¯å¾„å³å¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;python setup.py install --user
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿è¡Œä¸Šé¢çš„å‘½ä»¤åï¼Œè„šæœ¬ä¼šåœ¨ &lt;code&gt;~/.local&lt;/code&gt; ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª &lt;code&gt;lib&lt;/code&gt; ç›®å½•ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª &lt;code&gt;python-2.7/site-packages&lt;/code&gt; æ–‡ä»¶å¤¹ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæ˜¯ &lt;code&gt;sudo python setup.py install&lt;/code&gt;ï¼Œåˆ™ä¸Šé¢çš„ç›®å½•ä¼šåœ¨ &lt;code&gt;/usr/lib&lt;/code&gt; ä¸‹ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://mxnet.io/get_started/setup.html#build-mxnet-on-os-x-mac&#34;&gt;Build MXNet on OS X (Mac)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.cnblogs.com/dengdan890730/p/5587542.html&#34;&gt;mxnetçš„pythonåŒ…å¯¼å…¥çš„å‰å‰åå&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;Github Issue: &lt;a href=&#34;https://github.com/nodejh/nodejh.github.io/issues/10&#34;&gt;https://github.com/nodejh/nodejh.github.io/issues/10&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>