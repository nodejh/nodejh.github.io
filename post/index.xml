<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on nodejh</title>
    <link>http://nodejh.com/post/</link>
    <description>Recent content in Posts on nodejh</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 26 Mar 2017 00:42:23 +0800</lastBuildDate>
    <atom:link href="http://nodejh.com/post/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Understand the Oracle startup process</title>
      <link>http://nodejh.com/post/Understand-the-Oracle-startup-process/</link>
      <pubDate>Sun, 26 Mar 2017 00:42:23 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Understand-the-Oracle-startup-process/</guid>
      <description>

&lt;h2 id=&#34;ä¸€-å¸¸ç”¨å¯åŠ¨æ­¥éª¤&#34;&gt;ä¸€. å¸¸ç”¨å¯åŠ¨æ­¥éª¤&lt;/h2&gt;

&lt;p&gt;å¯¹äºæ™®é€šç”¨æˆ·ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ Oracle æ•°æ®åº“ï¼Œéœ€è¦ä¸¤ä¸ªå¯åŠ¨æ­¥éª¤ï¼šå¯åŠ¨æ•°æ®åº“å’Œå¯åŠ¨ç›‘å¬å™¨ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœè¿˜éœ€è¦ä½¿ç”¨ OEM æ¥ç›‘æ§æ•°æ®åº“æœåŠ¡ï¼Œåˆ™è¿˜è¦å¯åŠ¨ OEMã€‚&lt;/p&gt;

&lt;h4 id=&#34;1-å¯åŠ¨æ•°æ®åº“&#34;&gt;1. å¯åŠ¨æ•°æ®åº“&lt;/h4&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code&gt;sqlplus&lt;/code&gt; æ¥å¯åŠ¨æ•°æ®åº“ã€‚å…³äº &lt;code&gt;sqlplus&lt;/code&gt; çš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒ &lt;a href=&#34;https://github.com/nodejh/nodejh.github.io/issues/31&#34;&gt;ã€Šä½¿ç”¨ SQL *Plus ç®¡ç† Oracle æ•°æ®åº“ã€‹&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è¿›å…¥ &lt;code&gt;sqlplus&lt;/code&gt; ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ sqlplus / as sysdba
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯åŠ¨æ•°æ®åº“ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;&amp;gt; startup
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;2-å¯åŠ¨ç›‘å¬å™¨&#34;&gt;2. å¯åŠ¨ç›‘å¬å™¨&lt;/h4&gt;

&lt;p&gt;Oracle ç›‘å¬å™¨æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åå°è¿›ç¨‹ï¼Œç”¨äºç›‘å¬å®¢æˆ·ç«¯å‘æ•°æ®åº“æœåŠ¡å™¨ç«¯æå‡ºçš„è¿æ¥è¯·æ±‚ï¼Œå®ƒæ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯é€šè®¯çš„æ¡¥æ¢ã€‚&lt;/p&gt;

&lt;p&gt;å¯åŠ¨ç›‘å¬å™¨ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ lsnrctl start
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®Œæˆè¿™ä¸¤ä¸ªæ­¥éª¤ï¼Œå°±å¯ä»¥ä½¿ç”¨æ•°æ®åº“äº†ã€‚&lt;/p&gt;

&lt;h4 id=&#34;3-å¯åŠ¨-oem&#34;&gt;3. å¯åŠ¨ OEM&lt;/h4&gt;

&lt;p&gt;Oracle Enterprise Managerï¼ˆOracleä¼ä¸šç®¡ç†å™¨ï¼Œç®€ç§° OEM ï¼‰æ˜¯ä¸€ä¸ªå›¾å½¢åŒ–æ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œå¯åŒæ—¶ç›‘æ§ç®¡ç†å¤šä¸ªç³»ç»Ÿä¸Šçš„å¤šä¸ªæ•°æ®åº“ï¼Œå› è€Œç‰¹åˆ«é€‚åˆåˆ†å¸ƒå¼ç¯å¢ƒã€‚&lt;/p&gt;

&lt;p&gt;å¯åŠ¨ OEMï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ emctl start dbconsole
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯åŠ¨æˆåŠŸåå°±å¯ä»¥é€šè¿‡ &lt;code&gt;http://æœåŠ¡å™¨:1158/em&lt;/code&gt; æ¥è®¿é—®åŸºäº Web çš„ç›‘æ§é¡µé¢ã€‚&lt;/p&gt;

&lt;h2 id=&#34;äºŒ-å¯åŠ¨æ¦‚è¿°&#34;&gt;äºŒ. å¯åŠ¨æ¦‚è¿°&lt;/h2&gt;

&lt;p&gt;Oracle Serve ç”±å®ä¾‹ï¼ˆInstanceï¼‰å’Œæ•°æ®åº“ï¼ˆdatabaseï¼‰ç»„æˆï¼Œæ¯ä¸€ä¸ªè¿è¡Œçš„ Oracle æ•°æ®åº“éƒ½ä¸ä¸€ä¸ª Oracle å®ä¾‹å…³è”ã€‚&lt;/p&gt;

&lt;p&gt;å®ä¾‹æ˜¯ç”±ä¸€ç»„åå°è¿›ç¨‹å’Œä¸€å—ç§°ä¸ºç³»ç»Ÿå…¨å±€åŒº SGAï¼ˆSystem Global Areaï¼‰çš„å…±äº«å†…å­˜æ®µç»„æˆã€‚åå°è¿›ç¨‹æ˜¯æ•°æ®åº“å’Œæ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’çš„é€šé“ï¼Œåå°è¿›ç¨‹çš„å‘½åç”± ORACLE_SID å†³å®šï¼ŒOracle æ ¹æ® ORACLE_SID æ¥å¯»æ‰¾å‚æ•°æ–‡ä»¶å¯åŠ¨å®ä¾‹ã€‚æ•°æ®åº“æ˜¯æŒ‡å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ä¸€ç»„ç‰©ç†æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;Oracle æ•°æ®åº“å…·æœ‰å››ç§çŠ¶æ€ï¼Œå¯åŠ¨è¿‡ç¨‹å…·æœ‰ä¸‰ä¸ªé˜¶æ®µã€‚å››ç§çŠ¶æ€åˆ†åˆ« &lt;code&gt;shutdown&lt;/code&gt; &lt;code&gt;nomount&lt;/code&gt; &lt;code&gt;mount&lt;/code&gt; &lt;code&gt;open&lt;/code&gt;ï¼Œå¯¹åº”ä¸‰ä¸ªé˜¶æ®µåˆ†åˆ«ä¸ºï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¯åŠ¨å®ä¾‹ &lt;code&gt;shutdown --&amp;gt; nomount&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;è£…è½½æ•°æ®åº“ &lt;code&gt;nomount --&amp;gt; mount&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ‰“å¼€æ•°æ®åº“ &lt;code&gt;mount --&amp;gt; open&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;                                                    ^
                                           open     |
                                     +--------------|
                                     |   All files
                                     |   opened as
                                     | described by
                              mount  |  the control
                       +-------------+ file for this
                       | Control file    instance
                       |    opened
                       |   for this
               nomount |   instance
           +-----------+
           |  Instance
           |   started
           |
  shutdown |
-----------+
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯åŠ¨å®ä¾‹åï¼ŒOracle è½¯ä»¶ä¼šå°†å®ä¾‹ä¸ç‰¹å®šçš„æ•°æ®åº“å…³è”ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºè£…è½½æ•°æ®åº“ã€‚æ¥ä¸‹
æ¥å¯ä»¥æ‰“å¼€æ•°æ®åº“ï¼Œä»¥ä¾¿æˆæƒç”¨æˆ·è®¿é—®æ•°æ®åº“ã€‚åœ¨åŒä¸€å°è®¡ç®—æœºä¸Šå¯ä»¥å¹¶å‘æ‰§è¡Œå¤šä¸ªå®ä¾‹ï¼Œ
æ¯ä¸€ä¸ªå®ä¾‹åªè®¿é—®è‡ªå·±çš„ç‰©ç†æ•°æ®åº“ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ä¸‰-å¯åŠ¨è¯¦è§£&#34;&gt;ä¸‰. å¯åŠ¨è¯¦è§£&lt;/h2&gt;

&lt;p&gt;ä¸ºäº†å¼„æ¸…æ¥š Oracle å¯åŠ¨è¿‡ç¨‹çš„è¯¦ç»†å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸¤ä¸ªå‘½ä»¤ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ps&lt;/code&gt; ç”¨æ¥æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œäº†å“ªäº›è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ipcs&lt;/code&gt; æŸ¥è¯¢è¿›ç¨‹é—´é€šä¿¡è®¾æ–½çŠ¶æ€ï¼Œæ˜¾ç¤ºä½¿ç”¨äº†å…±äº«å†…å­˜å’Œä¿¡å·é‡&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;3-1-shutdown-çŠ¶æ€&#34;&gt;3.1. &lt;code&gt;shutdown&lt;/code&gt; çŠ¶æ€&lt;/h4&gt;

&lt;p&gt;å½“ Oracle å¤„äºè¯¥çŠ¶æ€çš„æ—¶å€™ï¼ŒOracle çš„æ‰€æœ‰æ–‡ä»¶éƒ½é™é™çš„èººåœ¨ç£ç›˜é‡Œï¼Œä¸€åˆ‡éƒ½è¿˜æœªå¼€å§‹ï¼Œå±äºå…³æœºçŠ¶æ€ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ ps -ef | grep oracle
oracle    4524     1  0 00:54 ?        00:00:39 /data/oracle/product/11.2.0/db_1/bin/emagent
root     12825   974  0 13:49 ?        00:00:00 sshd: oracle [priv]
oracle   12832 12825  0 13:49 ?        00:00:00 sshd: oracle@pts/0
oracle   12833 12832  0 13:49 pts/0    00:00:00 -bash
oracle   13825 12833  0 13:54 pts/0    00:00:00 ps -ef
oracle   13826 12833  0 13:54 pts/0    00:00:00 grep --color=auto oracle
$ ipcs -a

------ Message Queues --------
key        msqid      owner      perms      used-bytes   messages

------ Shared Memory Segments --------
key        shmid      owner      perms      bytes      nattch     status
0x011268f0 458753     root       600        1000       8

------ Semaphore Arrays --------
key        semid      owner      perms      nsems
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;3-2-å¯åŠ¨å®ä¾‹-shutdown-nomount&#34;&gt;3.2. å¯åŠ¨å®ä¾‹ &lt;code&gt;shutdown --&amp;gt; nomount&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;æ€»ä½“æ¥è¯´ï¼Œå¯åŠ¨æ•°æ®åº“å®ä¾‹åŒ…æ‹¬ä»¥ä¸‹æ“ä½œï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;è¯»å–å‚æ•°æ–‡ä»¶ &lt;code&gt;SPFILE&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åˆ†é… SGA&lt;/li&gt;
&lt;li&gt;å¯åŠ¨åå°è¿›ç¨‹&lt;/li&gt;
&lt;li&gt;æ‰“å¼€å‘Šè­¦æ–‡ä»¶å’Œè·Ÿè¸ªæ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;åœ¨å¯åŠ¨å®ä¾‹æ—¶ï¼Œå°†ä¸ºå®ä¾‹åˆ›å»ºä¸€ç³»åˆ—åå°è¿›ç¨‹å’ŒæœåŠ¡è¿›ç¨‹ï¼Œå¹¶ä¸”åœ¨å†…å­˜ä¸­åˆ›å»º SGA åŒºç­‰å†…å­˜ç»“æ„ã€‚åœ¨å®ä¾‹å¯åŠ¨çš„è¿‡ç¨‹ä¸­åªä¼šä½¿ç”¨åˆ°åˆå§‹åŒ–å‚æ•°æ–‡ä»¶ï¼Œæ•°æ®åº“æ˜¯å¦å­˜åœ¨å¯¹å®ä¾‹çš„å¯åŠ¨æ²¡æœ‰å½±å“ã€‚å¦‚æœåˆåŒ–å‚æ•°è®¾ç½®æœ‰è¯¯ï¼Œå®ä¾‹å°†æ— æ³•å¯åŠ¨ã€‚&lt;/p&gt;

&lt;p&gt;å¯åŠ¨æ•°æ®åº“å®ä¾‹çš„å‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ sqlplus / as sysdba

SQL*Plus: Release 11.2.0.1.0 Production on Sun Mar 26 14:05:14 2017

Copyright (c) 1982, 2009, Oracle.  All rights reserved.

Connected to an idle instance.

SQL&amp;gt; startup nomount
ORACLE instance started.

Total System Global Area 3273641984 bytes
Fixed Size		    2217792 bytes
Variable Size		 2432698560 bytes
Database Buffers	  822083584 bytes
Redo Buffers		   16642048 bytes
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯åŠ¨æ•°æ®åº“å®ä¾‹åï¼Œåªä¼šåˆ›å»ºå®ä¾‹ï¼ˆå³åˆ›å»º Oracle å®ä¾‹çš„å„ç§å†…å­˜ç»“æ„ä¸æœåŠ¡è¿›ç¨‹ï¼‰ï¼Œå¹¶ä¸åŠ è½½æ•°æ®åº“ï¼Œä¹Ÿä¸ä¼šæ‰“å¼€ä»»ä½•æ•°æ®æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æµ‹è¯•æ•°æ®å­—å…¸èƒ½å¦æ‰“å¼€ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;SQL&amp;gt; select * from v$datafile;
select * from v$datafile
              *
ERROR at line 1:
ORA-01507: database not mounted
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;select * from v$datafile&lt;/code&gt; çš„æ—¶å€™æŠ¥é”™ï¼Œè¯´æ˜æ•°æ®åº“å­—å…¸åœ¨ &lt;code&gt;nomount&lt;/code&gt; çŠ¶æ€ä¸‹æ˜¯æ— æ³•è®¿é—®çš„ï¼Œå› ä¸ºæ•°æ®å­—å…¸éœ€è¦ä»æ§åˆ¶æ–‡ä»¶è·å–æ–‡ä»¶çš„ä¿¡æ¯ï¼Œè€Œæ­¤æ—¶æ§åˆ¶æ–‡ä»¶æ²¡æœ‰æ‰“å¼€æ‰€ä»¥æ— æ³•æŸ¥çœ‹ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯åœ¨ &lt;code&gt;nomount&lt;/code&gt; çŠ¶æ€ä¸‹å¯ä»¥é€šè¿‡å‚æ•°æ–‡ä»¶è·å¾—æ§åˆ¶æ–‡ä»¶çš„ä½ç½®ï¼Œå› ä¸ºæ­¤æ—¶å‚æ•°æ–‡ä»¶å·²ç»æ‰“å¼€ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;SQL&amp;gt; show parameter control_files;

NAME				     TYPE
------------------------------------ 
VALUE
------------------------------
control_files			     string
/data/oracle/oradata/orcl/cont
rol01.ctl, /data/oracle/flash_
recovery_area/orcl/control02.c
tl
&lt;/code&gt;&lt;/pre&gt;

&lt;h6 id=&#34;3-2-1-è¯»å–å‚æ•°æ–‡ä»¶&#34;&gt;3.2.1 è¯»å–å‚æ•°æ–‡ä»¶&lt;/h6&gt;

&lt;p&gt;å¯åŠ¨æ•°æ®åº“å®ä¾‹é¦–å…ˆä¼šè¯»å– &lt;code&gt;SPFILE&lt;/code&gt; æ–‡ä»¶ä¸­çš„åˆå§‹åŒ–å‚æ•°ï¼Œå¦‚æœ &lt;code&gt;SPFILE&lt;/code&gt; æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¯»å–åˆå§‹åŒ–æ–‡ä»¶ã€‚Linux ç³»ç»Ÿçš„ &lt;code&gt;SPFILE&lt;/code&gt; æ–‡ä»¶åœ¨ &lt;code&gt;$ORACLE_HOME/dbs&lt;/code&gt; ç›®å½•ä¸‹ï¼ŒWindows NT å’Œ Windows 2000 ä¸­ &lt;code&gt;SPFILE&lt;/code&gt; æ–‡ä»¶ç›®å½•åœ¨ &lt;code&gt;%ORACLE_HOME%\database&lt;/code&gt;ã€‚æ–‡ä»¶çš„è¯»å–é¡ºåºå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;é¦–å…ˆæŸ¥æ‰¾ &lt;code&gt;spfile$ORACLE_SID.ora&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ç»§ç»­æŸ¥æ‰¾ &lt;code&gt;spfile.ora&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ç»§ç»­æŸ¥æ‰¾ &lt;code&gt;init$ORACLE_SID.ora&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å…¶ä¸­ &lt;code&gt;spfile$ORACLE_SID.ora&lt;/code&gt; å’Œ &lt;code&gt;spfile.ora&lt;/code&gt; å±äº &lt;code&gt;SPFILE&lt;/code&gt; æ–‡ä»¶ï¼Œ&lt;code&gt;init$ORACLE_SID.ora&lt;/code&gt; æ˜¯åˆå§‹åŒ–æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;æŸ¥çœ‹ &lt;code&gt;$ORACLE_HOME&lt;/code&gt; å’Œ &lt;code&gt;$ORACLE_SID&lt;/code&gt; çš„å€¼å¯ä½¿ç”¨ &lt;code&gt;echo&lt;/code&gt; å‘½ä»¤ï¼Œå¦‚ &lt;code&gt;echo $ORACLE_HOME&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h6 id=&#34;3-2-2-åˆ†é…-sga&#34;&gt;3.2.2 åˆ†é… SGA&lt;/h6&gt;

&lt;p&gt;è¯»å–åˆ°å‚æ•°æ–‡ä»¶ä¹‹åï¼ŒOracle ä¼šæ ¹æ®å‚æ•°æ–‡ä»¶åˆ†é… SGAï¼ˆSystem Global Areaï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;SGA æ˜¯ä¸€ä¸ªéå¸¸åºå¤§çš„å†…å­˜åŒºé—´ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¼€å¯ Oracle ä¹‹åå ç”¨äº†å¾ˆå¤§å†…å­˜çš„åŸå› ã€‚SGA ç”±æ‰€æœ‰æœåŠ¡è¿›ç¨‹å’Œåå°è¿›ç¨‹å…±äº«ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡ &lt;code&gt;show sga&lt;/code&gt; æˆ– &lt;code&gt;select * from v$sga&lt;/code&gt; æŸ¥çœ‹ SGA çš„å¤§å°ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;SQL&amp;gt; show sga;
Total System Global Area 3273641984 bytes
Fixed Size		    2217792 bytes
Variable Size		 2432698560 bytes
Database Buffers	  822083584 bytes
Redo Buffers		   16642048 bytes

SQL&amp;gt; select * from v$sga;

NAME					      VALUE
---------------------------------------- ----------
Fixed Size				    2217792
Variable Size				 2432698560
Database Buffers			  822083584
Redo Buffers				   16642048

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;SGA åˆ†ä¸ºä¸åŒçš„æ± ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è§†å›¾ &lt;code&gt;v$sgastat&lt;/code&gt; æŸ¥çœ‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;SQL&amp;gt; select pool,sum(bytes) bytes from v$sgastat group by pool;

POOL			      BYTES
------------------------ ----------
java pool		   16777216
large pool		   16777216
shared pool		 1258295992
			  840943424

&lt;/code&gt;&lt;/pre&gt;

&lt;h6 id=&#34;3-2-3-å¯åŠ¨åå°è¿›ç¨‹&#34;&gt;3.2.3 å¯åŠ¨åå°è¿›ç¨‹&lt;/h6&gt;

&lt;p&gt;å…¶ä¸­æœ‰ 5 ä¸ªè¿›ç¨‹å¿…é¡»å¯åŠ¨ï¼Œ DBWRã€LGWRã€SMONã€PMONã€CKPTã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;SMON&lt;/code&gt; ç³»ç»Ÿç›‘è§†å™¨ï¼ˆSystem Monitorï¼‰ã€‚å¦‚æœ Oracle å®ä¾‹å¤±è´¥ï¼Œåˆ™åœ¨ SGA ä¸­çš„ä»»ä½•æ²¡æœ‰å†™åˆ°ç£ç›˜ä¸­çš„æ•°æ®éƒ½ä¼šä¸¢å¤±ã€‚æœ‰è®¸å¤šæƒ…å†µå¯èƒ½å¼•èµ· Oracle å®ä¾‹å¤±è´¥ï¼Œä¾‹å¦‚æ“ä½œç³»ç»Ÿçš„å´©æºƒå°±ä¼šå¼•èµ· Oracle å®ä¾‹çš„å¤±è´¥ã€‚å½“å®ä¾‹å¤±è´¥ä¹‹åï¼Œå¦‚æœé‡æ–°æ‰“å¼€è¯¥æ•°æ®åº“ï¼Œåˆ™åå°è¿›ç¨‹ SMON è‡ªåŠ¨æ‰§è¡Œå®ä¾‹çš„å¤åŸæ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;DBWR&lt;/code&gt; æ•°æ®åº“ä¹¦å†™å™¨ï¼ˆDatabase Writeï¼‰ã€‚è¯¥æœåŠ¡å™¨è¿›ç¨‹åœ¨ç¼“å†²å­˜å‚¨åŒºä¸­è®°å½•æ‰€æœ‰çš„å˜åŒ–å’Œæ•°æ®ã€‚DBWR æŠŠæ¥è‡ªæ•°æ®åº“çš„ç¼“å†²å­˜å‚¨åŒºä¸­çš„è„æ•°æ®å†™åˆ°æ•°æ®æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿ç¡®ä¿æ•°æ®åº“ç¼“å†²å­˜å‚¨åŒºä¸­æœ‰è¶³å¤Ÿçš„ç©ºé—²çš„ç¼“å†²å­˜å‚¨åŒºã€‚è„æ•°æ®å°±æ˜¯æ­£åœ¨ä½¿ç”¨ä½†æ˜¯æ²¡æœ‰å†™åˆ°æ•°æ®æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;LGWR&lt;/code&gt; æ—¥å¿—ä¹¦å†™å™¨ï¼ˆLog Writeï¼‰ã€‚LGWR è´Ÿè´£æŠŠé‡åšæ—¥å¿—ç¼“å†²å­˜å‚¨åŒºä¸­çš„æ•°æ®å†™å…¥åˆ°é‡åšæ—¥å¿—æ–‡ä»¶ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;CKPT&lt;/code&gt; æ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼‰ã€‚è¯¥è¿›ç¨‹å¯ä»¥ç”¨æ¥åŒæ­¥åŒ–æ•°æ®åº“çš„æ–‡ä»¶ï¼Œå®ƒå¯ä»¥æŠŠæ—¥å¿—ä¸­çš„æ–‡ä»¶å†™å…¥åˆ°æ•°æ®åº“ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;PMON&lt;/code&gt; è¿›ç¨‹ç›‘è§†å™¨ï¼ˆProcess Monitorï¼‰ã€‚å½“å–æ¶ˆå½“å‰çš„äº‹åŠ¡ï¼Œæˆ–é‡Šæ”¾è¿›ç¨‹å ç”¨çš„é”ä»¥åŠé‡Šæ”¾å…¶å®ƒèµ„æºä¹‹åï¼ŒPMON è¿›ç¨‹æ¸…ç©ºé‚£äº›å¤±è´¥çš„è¿›ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹ç³»ç»Ÿè¿›ç¨‹å’Œé€šä¿¡è®¾æ–½çŠ¶æ€ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ ps -ef | grep oracle
oracle    4524     1  0 Mar26 ?        00:01:25 /data/oracle/product/11.2.0/db_1/bin/emagent
root      9797   974  0 00:57 ?        00:00:00 sshd: oracle [priv]
oracle    9805  9797  0 00:57 ?        00:00:00 sshd: oracle@pts/0
oracle    9806  9805  0 00:57 pts/0    00:00:00 -bash
oracle   10020     1  0 00:58 ?        00:00:00 ora_pmon_orcl
oracle   10022     1  0 00:58 ?        00:00:01 ora_vktm_orcl
oracle   10026     1  0 00:58 ?        00:00:00 ora_gen0_orcl
oracle   10028     1  0 00:58 ?        00:00:00 ora_diag_orcl
oracle   10030     1  0 00:58 ?        00:00:00 ora_dbrm_orcl
oracle   10032     1  0 00:58 ?        00:00:00 ora_psp0_orcl
oracle   10034     1  0 00:58 ?        00:00:01 ora_dia0_orcl
oracle   10036     1  0 00:58 ?        00:00:00 ora_mman_orcl
oracle   10038     1  0 00:58 ?        00:00:00 ora_dbw0_orcl
oracle   10040     1  0 00:58 ?        00:00:00 ora_lgwr_orcl
oracle   10042     1  0 00:58 ?        00:00:00 ora_ckpt_orcl
oracle   10044     1  0 00:58 ?        00:00:00 ora_smon_orcl
oracle   10046     1  0 00:58 ?        00:00:00 ora_reco_orcl
oracle   10048     1  0 00:58 ?        00:00:00 ora_mmon_orcl
oracle   10050     1  0 00:58 ?        00:00:00 ora_mmnl_orcl
oracle   10052     1  0 00:58 ?        00:00:00 ora_d000_orcl
oracle   10054     1  0 00:58 ?        00:00:00 ora_s000_orcl
oracle   15675  9806  0 01:59 pts/0    00:00:00 ps -ef
oracle   15676  9806  0 01:59 pts/0    00:00:00 grep --color=auto oracle
$ ipcs -a

------ Message Queues --------
key        msqid      owner      perms      used-bytes   messages

------ Shared Memory Segments --------
key        shmid      owner      perms      bytes      nattch     status
0x011268f0 458753     root       600        1000       9
0x00000000 524290     oracle     660        4096       0
0x00000000 557059     oracle     660        4096       0
0x2a1ee740 589828     oracle     660        4096       0

------ Semaphore Arrays --------
key        semid      owner      perms      nsems
0x19ba9600 1310738    oracle     660        154
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç”± &lt;code&gt;smon&lt;/code&gt;ã€&lt;code&gt;pmon&lt;/code&gt; &lt;code&gt;lgwr&lt;/code&gt; ç­‰è¿›ç¨‹å¯ä»¥çœ‹å‡ºæ­¤é˜¶æ®µåˆ›å»ºäº†å¤šä¸ªåå°è¿›ç¨‹ï¼Œå¹¶é¦–æ¬¡æŠ¥å‘Šä½¿ç”¨äº†å…±äº«å†…å­˜å’Œä¿¡å·é‡ã€‚&lt;/p&gt;

&lt;h6 id=&#34;3-2-4-æ‰“å¼€å‘Šè­¦æ–‡ä»¶å’Œè·Ÿè¸ªæ–‡ä»¶&#34;&gt;3.2.4 æ‰“å¼€å‘Šè­¦æ–‡ä»¶å’Œè·Ÿè¸ªæ–‡ä»¶&lt;/h6&gt;

&lt;p&gt;æ•°æ®åº“çš„å¯åŠ¨è¿‡ç¨‹è®°å½•åœ¨è­¦å‘Šè¿½è¸ªæ–‡ä»¶ä¸­ï¼Œè¯¥è­¦å‘Šè¿½è¸ªæ–‡ä»¶ä¸­åŒ…æ‹¬æ•°æ®åº“å¯åŠ¨ä¿¡æ¯ï¼Œå®ƒå­˜æ”¾åœ¨å‚æ•°&lt;code&gt;BACKGOUND_DUMP_DEST&lt;/code&gt; å®šä¹‰çš„ç›®å½•ä¸‹ï¼Œè­¦å‘Šæ—¥å¿—çš„åå­—ä¸º &lt;code&gt;alert_&amp;lt;sid&amp;gt;.log&lt;/code&gt;ï¼Œ&lt;code&gt;sid&lt;/code&gt; æ˜¯å®ä¾‹çš„åç§°ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;SQL&amp;gt; show parameter background_dump_dest;

NAME			           TYPE               VALUE
-------------------- -------------------------------------------------
background_dump_dest  string  /data/oracle/diag/rdbms/orcl/orcl/trace
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿›å…¥åˆ°ç›®å½•æŸ¥çœ‹è­¦å‘Šæ—¥å¿—å…³äº &lt;code&gt;startup nomount&lt;/code&gt; è¿‡ç¨‹è®°å½•ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ more alert_orcl.log
Fri Nov 11 17:04:51 2016
Starting ORACLE instance (normal)
LICENSE_MAX_SESSION = 0
LICENSE_SESSIONS_WARNING = 0
Shared memory segment for instance monitoring created
Picked latch-free SCN scheme 3
Using LOG_ARCHIVE_DEST_1 parameter default value as USE_DB_RECOVERY_FILE_DEST
Autotune of undo retention is turned on.
IMODE=BR
ILAT =27
LICENSE_MAX_USERS = 0
SYS auditing is disabled
Starting up:
Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options.
Using parameter settings in client-side pfile /data/oracle/admin/orcl/pfile/init.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Oracle å®ä¾‹çš„åå°è¿›ç¨‹ä¼šåœ¨é‡åˆ°é—®é¢˜çš„æ—¶å€™å°†æ—¥å¿—å†™å…¥è·Ÿè¸ªæ–‡ä»¶ä¸­ã€‚æ•°æ®åº“çš„è·Ÿè¸ªæ–‡ä»¶åœ¨ç›®å½•ç”± &lt;code&gt;BACKGOUND_DUMP_DEST&lt;/code&gt; å‚æ•°æŒ‡å®šï¼Œæœ€å¤§å¤§å°ç”± &lt;code&gt;MAX_DUMP_FILE_SIZE&lt;/code&gt; æŒ‡å®šï¼Œé»˜è®¤ä¸º&lt;code&gt;UNLIMITED&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;SQL&amp;gt; show parameter user_dump_dest;

NAME				     TYPE
------------------------------------ ----------------------
VALUE
------------------------------
user_dump_dest			     string
/data/oracle/diag/rdbms/orcl/o
rcl/trace
SQL&amp;gt; show parameter max_dump_file_size;

NAME				     TYPE
------------------------------------ ----------------------
VALUE
------------------------------
max_dump_file_size		     string
unlimited
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;3-3-è£…è½½æ•°æ®åº“-nomunt-mount&#34;&gt;3.3 è£…è½½æ•°æ®åº“ &lt;code&gt;nomunt --&amp;gt; mount&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;è£…è½½æ•°æ®åº“æœ‰ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ä¸€æ˜¯ç›´æ¥å¯åŠ¨æ•°æ®åº“åˆ° &lt;code&gt;mount&lt;/code&gt; çŠ¶æ€ï¼š&lt;code&gt;startup mount&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;äºŒæ˜¯å¦‚æœæ•°æ®åº“å·²ç»å¯åŠ¨åˆ° &lt;code&gt;nomount&lt;/code&gt; çŠ¶æ€ï¼Œä½¿ç”¨ &lt;code&gt;alter database mount&lt;/code&gt; æŠŠæ•°æ®åº“åˆ‡æ¢åˆ°&lt;code&gt;mount&lt;/code&gt; çŠ¶æ€&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;alert database mount&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;SQL&amp;gt; alter database mount;

Database altered.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;startup mount&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;SQL&amp;gt; shutdown immediate;
ORA-01109: database not open


Database dismounted.
ORACLE instance shut down.
SQL&amp;gt; startup mount;
ORACLE instance started.

Total System Global Area 3273641984 bytes
Fixed Size		    2217792 bytes
Variable Size		 2432698560 bytes
Database Buffers	  822083584 bytes
Redo Buffers		   16642048 bytes
Database mounted.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è£…è½½æ•°æ®åº“å°±æ˜¯æŠŠæ•°æ®åº“æ–‡ä»¶å’Œå®ä¾‹å…³è”èµ·æ¥ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Oracleæ ¹æ®å‚æ•°æ–‡ä»¶ &lt;code&gt;SPFILE&lt;/code&gt; ä¸­çš„å‚æ•°æ‰¾åˆ°æ§åˆ¶æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;æ‰“å¼€æ§åˆ¶æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;ä»æ§åˆ¶æ–‡ä»¶è·å¾—æ•°æ®æ–‡ä»¶å’Œé‡åšæ—¥å¿—æ–‡ä»¶çš„åå­—åŠä½ç½®&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å®Œæˆä»¥ä¸Šä¸‰æ­¥ï¼Œæ²¡æœ‰ä»»ä½•é”™è¯¯çš„æƒ…å†µä¸‹ï¼ŒOracle å°±å·²ç»æŠŠå®ä¾‹å’Œæ•°æ®åº“å…³è”èµ·æ¥äº†ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥æŸ¥è¯¢æ§åˆ¶æ–‡ä»¶ã€æ•°æ®æ–‡ä»¶ã€é‡åšæ—¥å¿—æ–‡ä»¶äº†ã€‚ä½†æ­¤æ—¶è¿˜ä¸èƒ½æŸ¥è¯¢ç”¨æˆ·è¡¨çš„å†…å®¹ã€‚æ‰€ä»¥å¯¹äºæ™®é€šç”¨æˆ·è€Œè¨€ï¼Œè¿™ä¸ªæ—¶å€™æ•°æ®åº“è¿˜æ˜¯ä¸å¯ç”¨çš„ã€‚åªæœ‰ç­‰åˆ°ç»å†äº†æœ€åä¸€æ­¥ &lt;code&gt;æ‰“å¼€æ•°æ®åº“&lt;/code&gt; ä¹‹åï¼Œæ‰èƒ½ä½¿ç”¨æ•°æ®åº“ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;SQL&amp;gt; select status from v$instance;

STATUS
------------------------
MOUNTED

SQL&amp;gt; select name from v$controlfile;

NAME
--------------------------------------------------------------------------------
/data/oracle/oradata/orcl/control01.ctl
/data/oracle/flash_recovery_area/orcl/control02.ctl

SQL&amp;gt; select name from v$datafile;

NAME
--------------------------------------------------------------------------------
/data/oracle/oradata/orcl/system01.dbf
/data/oracle/oradata/orcl/sysaux01.dbf
/data/oracle/oradata/orcl/undotbs01.dbf
/data/oracle/oradata/orcl/users01.dbf
/data/oracle/oradata/orcl/example01.dbf
/data/oracle/oradata/orcl/SoftwareManagement.dbf

6 rows selected.

SQL&amp;gt; select member from v$logfile;

MEMBER
--------------------------------------------------------------------------------
/data/oracle/oradata/orcl/redo03.log
/data/oracle/oradata/orcl/redo02.log
/data/oracle/oradata/orcl/redo01.log

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è£…è½½æ•°æ®åº“éœ€è¦æ‰“å¼€æ§åˆ¶æ–‡ä»¶ï¼Œå°†æ•°æ®åº“ä¸æ‰“å¼€çš„å®ä¾‹ç›¸å…³è”ã€‚è€Œæ§åˆ¶æ–‡ä»¶ä¸­åŒ…å«æ—¥å¿—æ–‡ä»¶ï¼Œæ•°æ®æ–‡ä»¶çš„ä½ç½®ä¿¡æ¯ï¼Œæ£€æŸ¥ç‚¹ä¿¡æ¯ç­‰é‡è¦ä¿¡æ¯ã€‚ä½†æ­¤æ—¶è¿˜ä¸èƒ½æŸ¥è¯¢ç”¨æˆ·è¡¨çš„å†…å®¹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;h6 id=&#34;æŸ¥çœ‹æ•°æ®å­—å…¸&#34;&gt;æŸ¥çœ‹æ•°æ®å­—å…¸&lt;/h6&gt;

&lt;p&gt;è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ•°æ®å­—å…¸ï¼Œå› ä¸ºæ§åˆ¶æ–‡ä»¶å·²ç»æ‰“å¼€ã€‚&lt;/p&gt;

&lt;p&gt;å¯ä»¥çœ‹å‡ºæ•°æ®åº“çŠ¶æ€å·²å˜æˆ &lt;code&gt;mount&lt;/code&gt; äº†ï¼Œå¦‚å›¾ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;SQL&amp;gt; select FILE#, STATUS, NAME from v$datafile;

     FILE# STATUS
---------- --------------
NAME
--------------------------------------------------------------------------------
	 1 SYSTEM
/data/oracle/oradata/orcl/system01.dbf

	 2 ONLINE
/data/oracle/oradata/orcl/sysaux01.dbf

	 3 ONLINE
/data/oracle/oradata/orcl/undotbs01.dbf


     FILE# STATUS
---------- --------------
NAME
--------------------------------------------------------------------------------
	 4 ONLINE
/data/oracle/oradata/orcl/users01.dbf

	 5 ONLINE
/data/oracle/oradata/orcl/example01.dbf

	 6 ONLINE
/data/oracle/oradata/orcl/SoftwareManagement.dbf


6 rows selected.
&lt;/code&gt;&lt;/pre&gt;

&lt;h6 id=&#34;æ•°æ®æ–‡ä»¶&#34;&gt;æ•°æ®æ–‡ä»¶&lt;/h6&gt;

&lt;p&gt;ä½†æ˜¯æ­¤æ—¶æˆ‘ä»¬ä¸èƒ½è®¿é—®æ•°æ®åº“çš„æ•°æ®æ–‡ä»¶ï¼ˆè¡¨ï¼Œè§†å›¾ï¼‰ï¼Œæ–‡ä»¶æ­¤æ—¶æ•°æ®æ–‡ä»¶æ²¡æœ‰æ‰“å¼€ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;SQL&amp;gt; select * from scott.dept;
select * from scott.dept
                    *
ERROR at line 1:
ORA-01219: database not open: queries allowed on fixed tables/views only
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;3-4-mount-çŠ¶æ€&#34;&gt;3.4 &lt;code&gt;mount&lt;/code&gt; çŠ¶æ€&lt;/h4&gt;

&lt;h4 id=&#34;3-5-æ‰“å¼€æ•°æ®åº“-mount-open&#34;&gt;3.5 æ‰“å¼€æ•°æ®åº“ &lt;code&gt;mount --&amp;gt; open&lt;/code&gt;&lt;/h4&gt;

&lt;h4 id=&#34;3-6-open-çŠ¶æ€&#34;&gt;3.6 &lt;code&gt;open&lt;/code&gt; çŠ¶æ€&lt;/h4&gt;

&lt;h2 id=&#34;å¸¸è§è¿æ¥é”™è¯¯&#34;&gt;å¸¸è§è¿æ¥é”™è¯¯&lt;/h2&gt;

&lt;h4 id=&#34;1-æœªå¯åŠ¨æ•°æ®åº“å®ä¾‹&#34;&gt;1. æœªå¯åŠ¨æ•°æ®åº“å®ä¾‹&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;Connection Failed
ORA-12514: TNS:listener does not currently know of service requested in connect descriptor
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;2-æœªå¯åŠ¨ç›‘å¬å™¨&#34;&gt;2. æœªå¯åŠ¨ç›‘å¬å™¨&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;Oracle Connection Failed
ORA 12541: TNS:no listener
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.oracle.com/cd/B28359_01/server.111/b28310/start001.htm#ADMIN10063&#34;&gt;Starting Up a Database&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.itpub.net/9399028/viewspace-682015/&#34;&gt;Oracle SGAè¯¦è§£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.itpub.net/25264937/viewspace-694917/&#34;&gt;Oracleä¹‹å†…å­˜ç»“æ„ï¼ˆSGAã€PGAï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Setting Environmental Variables in MacOS</title>
      <link>http://nodejh.com/post/Setting-Environmental-Variables-in-MacOS/</link>
      <pubDate>Sun, 19 Mar 2017 17:15:37 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Setting-Environmental-Variables-in-MacOS/</guid>
      <description>

&lt;p&gt;æˆ‘ä»¬å®‰è£…ä¸€ä¸ªè½¯ä»¶åï¼Œä¹‹æ‰€ä»¥èƒ½å¤Ÿä½¿ç”¨ä¸€äº›ä¸è¯¥è½¯ä»¶ç›¸å…³çš„å‘½ä»¤ï¼Œæ˜¯å› ä¸ºè¯¥å‘½ä»¤è¢«æ·»åŠ åˆ°äº†ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡é‡Œé¢ã€‚æ¯”å¦‚å®‰è£…å®Œ Atom ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ &lt;code&gt;atom&lt;/code&gt; å‘½ä»¤æ‰“å¼€æ–‡ä»¶ã€‚æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è‡ªå·±è®¾ç½®ç¯å¢ƒå˜é‡ï¼ŒMacOS è®¾ç½®ç¯å¢ƒå˜é‡æœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ç¼–è¾‘å½“å‰ SHELL å¯¹åº”çš„ç”¨æˆ·çº§ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼Œå¦‚ &lt;code&gt;bash&lt;/code&gt; å¯¹åº”çš„ &lt;code&gt;.bash_profile&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;MacOS å’Œ Linux éƒ½æ˜¯ç±» Unix ç³»ç»Ÿï¼Œå®ƒä»¬æ·»åŠ ç¯å¢ƒå˜é‡çš„æ–¹å¼ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚æœ¬æ–‡ä»¥ macOS ä¸ºä¾‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;sehll-ç±»å‹&#34;&gt;SEHLL ç±»å‹&lt;/h2&gt;

&lt;p&gt;åœ¨æ·»åŠ ç¯å¢ƒå˜é‡ä¹‹å‰ï¼Œé¦–å…ˆè¦çŸ¥é“ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆ SHELLã€‚MacOS å†…ç½®äº†å¤šç§ SHELLï¼Œå¯é€šè¿‡ &lt;code&gt;cat /etc/shells&lt;/code&gt; æŸ¥çœ‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ cat /etc/shells
/bin/bash
/bin/csh
/bin/ksh
/bin/sh
/bin/tcsh
/bin/zsh
$ echo $SHELL
/bin/zsh
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sh&lt;/code&gt;ï¼ˆå…¨ç§° Bourne Shellï¼‰æ˜¯UNIXæœ€åˆä½¿ç”¨çš„ shellï¼Œè€Œä¸”åœ¨æ¯ç§ UNIX ä¸Šéƒ½å¯ä»¥ä½¿ç”¨ã€‚Bourne Shell åœ¨ shell ç¼–ç¨‹æ–¹ä¾¿ç›¸å½“ä¼˜ç§€ï¼Œä½†åœ¨å¤„ç†ä¸ç”¨æˆ·çš„äº¤äº’æ–¹ä¾¿ä½œå¾—ä¸å¦‚å…¶ä»–å‡ ç§ shellã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bash&lt;/code&gt;ï¼ˆå…¨ç§° Bourne Again Shellï¼‰LinuxOS é»˜è®¤çš„ï¼Œå®ƒæ˜¯ Bourne Shell çš„æ‰©å±•ã€‚ä¸ Bourne Shell å®Œå…¨å…¼å®¹ï¼Œå¹¶ä¸”åœ¨ Bourne Shell çš„åŸºç¡€ä¸Šå¢åŠ äº†å¾ˆå¤šç‰¹æ€§ã€‚å¯ä»¥æä¾›å‘½ä»¤è¡¥å…¨ï¼Œå‘½ä»¤ç¼–è¾‘å’Œå‘½ä»¤å†å²ç­‰åŠŸèƒ½ã€‚å®ƒè¿˜åŒ…å«äº†å¾ˆå¤š C Shell å’Œ Korn Shell ä¸­çš„ä¼˜ç‚¹ï¼Œæœ‰çµæ´»å’Œå¼ºå¤§çš„ç¼–è¾‘æ¥å£ï¼ŒåŒæ—¶åˆå¾ˆå‹å¥½çš„ç”¨æˆ·ç•Œé¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;csh&lt;/code&gt;ï¼ˆå…¨ç§° C Shellï¼‰æ˜¯ä¸€ç§æ¯” Bourne Shellæ›´é€‚åˆçš„å˜ç§ Shellï¼Œå®ƒçš„è¯­æ³•ä¸ C è¯­è¨€å¾ˆç›¸ä¼¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Tcsh&lt;/code&gt; æ˜¯ Linux æä¾›çš„ C Shell çš„ä¸€ä¸ªæ‰©å±•ç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Tcsh&lt;/code&gt; åŒ…æ‹¬å‘½ä»¤è¡Œç¼–è¾‘ï¼Œå¯ç¼–ç¨‹å•è¯è¡¥å…¨ï¼Œæ‹¼å†™æ ¡æ­£ï¼Œå†å²å‘½ä»¤æ›¿æ¢ï¼Œä½œä¸šæ§åˆ¶å’Œç±»ä¼¼ C è¯­è¨€çš„è¯­æ³•ï¼Œä»–ä¸ä»…å’Œ Bash Shell æç¤ºç¬¦å…¼å®¹ï¼Œè€Œä¸”è¿˜æä¾›æ¯” Bash Shell æ›´å¤šçš„æç¤ºç¬¦å‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ksh&lt;/code&gt;ï¼ˆå…¨ç§° Korn Shellï¼‰é›†åˆäº† C Shell å’Œ Bourne Shell çš„ä¼˜ç‚¹å¹¶ä¸”å’Œ Bourne Shell å®Œå…¨å…¼å®¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdksh&lt;/code&gt; æ˜¯ Linux ç³»ç»Ÿæä¾›çš„ ksh çš„æ‰©å±•ã€‚pdksh æ”¯æŒäººç‰©æ§åˆ¶ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸ŠæŒ‚èµ·ï¼Œåå°æ‰§è¡Œï¼Œå”¤é†’æˆ–ç»ˆæ­¢ç¨‹åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;zsh&lt;/code&gt; Zsh æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§ç»ˆç«¯ï¼ˆshellï¼‰è½¯ä»¶ï¼Œæ—¢å¯ä»¥ä½œä¸ºä¸€ä¸ªäº¤äº’å¼ç»ˆç«¯ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªè„šæœ¬è§£é‡Šå™¨ã€‚å®ƒåœ¨å…¼å®¹ Bash çš„åŒæ—¶ ï¼ˆé»˜è®¤ä¸å…¼å®¹ï¼Œé™¤éè®¾ç½®æˆ emulate shï¼‰ è¿˜æœ‰æä¾›äº†å¾ˆå¤šæ”¹è¿›ï¼Œä¾‹å¦‚ï¼šæ›´é«˜æ•ˆã€æ›´å¥½çš„è‡ªåŠ¨è¡¥å…¨ã€æ›´å¥½çš„æ–‡ä»¶åå±•å¼€ï¼ˆé€šé…ç¬¦å±•å¼€ï¼‰ã€æ›´å¥½çš„æ•°ç»„å¤„ç†ã€å¯å®šåˆ¶æ€§é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶&#34;&gt;ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶&lt;/h2&gt;

&lt;p&gt;macOS é»˜è®¤çš„æ˜¯ &lt;code&gt;Bourne Shell&lt;/code&gt;ï¼Œå…¶ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶åŠåŠ è½½é¡ºåºå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;/etc/profile
/etc/bashrc
/etc/paths
~/.bash_profile # macOS
~/.bash_login
~/.profile
~/.bashrc # linux
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…¶ä¸­ &lt;code&gt;/etc/profile&lt;/code&gt; &lt;code&gt;/etc/bashrc&lt;/code&gt; å’Œ &lt;code&gt;/etc/paths&lt;/code&gt; æ˜¯ç³»ç»Ÿçº§ç¯å¢ƒå˜é‡ï¼Œå¯¹æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰æ•ˆã€‚ä½†å®ƒä»¬çš„åŠ è½½æ—¶æœºæœ‰æ‰€åŒºåˆ«ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/etc/profile&lt;/code&gt; ä»»ä½•ç”¨æˆ·ç™»é™†æ—¶éƒ½ä¼šè¯»å–è¯¥æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/etc/bashrc&lt;/code&gt; bash shellæ‰§è¡Œæ—¶ï¼Œä¸ç®¡æ˜¯ä½•ç§æ–¹å¼ï¼Œè¯»å–æ­¤æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/etc/paths&lt;/code&gt; ä»»ä½•ç”¨æˆ·ç™»é™†æ—¶éƒ½ä¼šè¯»å–è¯¥æ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åé¢å‡ ä¸ªæ˜¯å½“å‰ç”¨æˆ·çº§çš„ç¯å¢ƒå˜é‡ã€‚macOS é»˜è®¤ç”¨æˆ·ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ä¸º &lt;code&gt;~/.bash_profile&lt;/code&gt;ï¼ŒLinux ä¸º &lt;code&gt;~/.bashrc&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä¸å­˜åœ¨ &lt;code&gt;~/.bash_profile&lt;/code&gt;ï¼Œåˆ™å¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ª &lt;code&gt;~/.bash_profile&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;~/.bash_profile&lt;/code&gt; æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™åé¢çš„å‡ ä¸ªæ–‡ä»¶å°±ä¼šè¢«å¿½ç•¥&lt;/li&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;~/.bash_profile&lt;/code&gt; æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ‰ä¼šä»¥æ­¤ç±»æ¨è¯»å–åé¢çš„æ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;å¦‚æœä½¿ç”¨çš„æ˜¯ SHELL ç±»å‹æ˜¯ &lt;code&gt;zsh&lt;/code&gt;ï¼Œåˆ™è¿˜å¯èƒ½å­˜åœ¨å¯¹åº”çš„ &lt;code&gt;/etc/zshrc&lt;/code&gt; å’Œ &lt;code&gt;~/.zshrc&lt;/code&gt;ã€‚ä»»ä½•ç”¨æˆ·ç™»å½• &lt;code&gt;zsh&lt;/code&gt; çš„æ—¶å€™ï¼Œéƒ½ä¼šè¯»å–è¯¥æ–‡ä»¶ã€‚æŸä¸ªç”¨æˆ·ç™»å½•çš„æ—¶å€™ï¼Œä¼šè¯»å–å…¶å¯¹åº”çš„ &lt;code&gt;~/.zshrc&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;æ·»åŠ ç¯å¢ƒå˜é‡&#34;&gt;æ·»åŠ ç¯å¢ƒå˜é‡&lt;/h2&gt;

&lt;h4 id=&#34;ç³»ç»Ÿç¯å¢ƒå˜é‡-etc-paths&#34;&gt;ç³»ç»Ÿç¯å¢ƒå˜é‡ &lt;code&gt;/etc/paths&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;ä¸€èˆ¬æ·»åŠ ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œå»ºè®®é€šè¿‡ä¿®æ”¹ &lt;code&gt;/etc/paths&lt;/code&gt; çš„æ–¹å¼è¿›è¡Œæ·»åŠ ã€‚ä¸€èˆ¬ä¸å»ºè®®ç›´æ¥ä¿®æ”¹ &lt;code&gt;/etc/paths&lt;/code&gt; æ–‡ä»¶ï¼Œè€Œæ˜¯å°†è·¯å¾„å†™åœ¨ &lt;code&gt;/etc/paths.d/&lt;/code&gt; ç›®å½•ä¸‹çš„ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œç³»ç»Ÿä¼šé€ä¸€è¯»å– &lt;code&gt;/etc/paths.d/&lt;/code&gt; ä¸‹çš„æ¯ä¸ªæ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Git&lt;/code&gt; è·¯å¾„å°±æ˜¯è¿™æ ·å®ç°çš„ã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹ Git çš„ä¾‹å­ï¼š&lt;/p&gt;

&lt;p&gt;é¦–å…ˆ &lt;code&gt;/etc/paths&lt;/code&gt; çš„æ–‡ä»¶å†…å®¹å¤§è‡´å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ cat /etc/paths
/usr/local/bin
/usr/bin
/bin
/usr/sbin
/sbin
/opt/local/bin
/opt/local/sbin
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åæŸ¥çœ‹ &lt;code&gt;/etc/paths.d/&lt;/code&gt; ç›®å½•ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ ls -l /etc/paths.d
-rw-r--r--    1 root  wheel    19  6 10  2015 git
-rw-r--r--    1 root  wheel    17  4 20  2016 go
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æŸ¥çœ‹ &lt;code&gt;/etc/paths.d/git&lt;/code&gt; æ–‡ä»¶çš„å†…å®¹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ cat /etc/paths.d/git
/usr/local/git/bin
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;/usr/local/git/bin&lt;/code&gt; å°±æ˜¯ Git çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬å¦‚æœè¦æ·»åŠ ä¸€ä¸ªç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œä¹Ÿå¯ä»¥å‚è€ƒè¿™ç§æ–¹å¼ã€‚&lt;/p&gt;

&lt;p&gt;æä¾›ä¸€ä¸ªæ·»åŠ ç¯å¢ƒå˜é‡çš„çš„ shellè¯­å¥ï¼Œå…¶ä¸­ &lt;code&gt;/usr/local/sbin/mypath&lt;/code&gt; å°±æ˜¯æˆ‘ä»¬è‡ªå·±çš„å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ sudo -s &#39;echo &amp;quot;/usr/local/sbin/mypath&amp;quot; &amp;gt; /etc/paths.d/mypath&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½†æ·»åŠ å®Œæˆä¹‹åï¼Œå‘½ä»¤ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œæœ‰ä¸¤ç§æ–¹æ³•ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;é‡æ–°ç™»å½•ç»ˆç«¯ï¼ˆå¦‚æœæ˜¯å›¾å½¢ç•Œé¢ï¼Œå³é‡æ–°æ‰“å¼€ Terminalï¼‰&lt;/li&gt;
&lt;li&gt;é€šè¿‡ &lt;code&gt;source&lt;/code&gt; å‘½ä»¤åŠ è½½ï¼š&lt;code&gt;source /etc/paths&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é…ç½®ç”Ÿæ•ˆä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ &lt;code&gt;mypath&lt;/code&gt; å‘½ä»¤äº†ã€‚&lt;/p&gt;

&lt;h4 id=&#34;ç³»ç»Ÿç¯å¢ƒå˜é‡-etc-profile-å’Œ-etc-bashrc&#34;&gt;ç³»ç»Ÿç¯å¢ƒå˜é‡ &lt;code&gt;/etc/profile&lt;/code&gt; å’Œ &lt;code&gt;/etc/bashrc&lt;/code&gt;&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;æ³¨ï¼šä¸€èˆ¬ä¸å»ºè®®ä¿®æ”¹è¿™ä¸¤ä¸ªæ–‡ä»¶&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ·»åŠ ç¯å¢ƒå˜é‡çš„è¯­æ³•ä¸ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;export PATH=&amp;quot;$PATH:&amp;lt;PATH 1&amp;gt;:&amp;lt;PATH 2&amp;gt;:&amp;lt;PATH 3&amp;gt;:...:&amp;lt;PATH N&amp;gt;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‰€ä»¥åœ¨ &lt;code&gt;/etc/profile&lt;/code&gt; å’Œ &lt;code&gt;/etc/bashrc&lt;/code&gt; ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œåªéœ€è¦åœ¨æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;export PATH=&amp;quot;/Users/jh/anaconda/bin:$PATH&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;ç”¨æˆ·ç¯å¢ƒå˜é‡&#34;&gt;ç”¨æˆ·ç¯å¢ƒå˜é‡&lt;/h4&gt;

&lt;p&gt;æ·»åŠ ç”¨æˆ·ç¯å¢ƒå˜é‡ï¼Œåªéœ€è¦ä¿®æ”¹ &lt;code&gt;~/.bash_profile&lt;/code&gt;ï¼ˆBourne Shellï¼‰æˆ– &lt;code&gt;~/.zshrc&lt;/code&gt;ï¼ˆzshï¼‰æˆ–å…¶ä»–ç”¨æˆ·çº§é…ç½®æ–‡ä»¶å³å¯ã€‚æ·»åŠ ç¯å¢ƒå˜é‡çš„è¯­æ³•ä¹Ÿæ˜¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;export PATH=&amp;quot;$PATH:&amp;lt;PATH 1&amp;gt;:&amp;lt;PATH 2&amp;gt;:&amp;lt;PATH 3&amp;gt;:...:&amp;lt;PATH N&amp;gt;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸‹é¢æ˜¯æˆ‘çš„ &lt;code&gt;~/.zshrc&lt;/code&gt; çš„éƒ¨åˆ†é…ç½®ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;export ANDROID_HOME=~/Library/Android/sdk
export PATH=$PATH:~/Library/Android/sdk/tools:~/Library/Android/sdk/platform-tools
export PATH=$PATH:/usr/local/mysql/bin:/usr/local/mysql/support-files
alias tree=&amp;quot;find . -print | sed -e &#39;s;[^/]*/;|____;g;s;____|; |;g&#39;&amp;quot;
alias t=&amp;quot;trans&amp;quot;
export PATH=&amp;quot;/usr/local/sbin:$PATH&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥é€šè¿‡ &lt;code&gt;echo $PATH&lt;/code&gt; å‘½ä»¤æŸ¥çœ‹å½“å‰ç¯å¢ƒå˜é‡ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;echo $PATH
/usr/local/sbin:/Users/jh/.nvm/versions/node/v7.6.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/git/bin:/Users/jh/Library/Android/sdk/tools:/Users/jh/Library/Android/sdk/platform-tools:/usr/local/mysql/bin:/usr/local/mysql/support-files:/Applications/Sublime Text.app/Contents/SharedSupport/bin
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¿®æ”¹äº†é…ç½®æ–‡ä»¶ä¹‹åï¼Œä¾æ—§éœ€è¦é‡æ–°ç™»å½• SHELL æˆ–è€…ä½¿ç”¨ &lt;code&gt;source ~/.zshrc&lt;/code&gt; æ¥æ˜¯é…ç½®ç«‹å³ç”Ÿæ•ˆã€‚&lt;/p&gt;

&lt;h4 id=&#34;export&#34;&gt;export&lt;/h4&gt;

&lt;p&gt;è¿˜æœ‰ä¸€ç§æ·»åŠ ç¯å¢ƒå˜é‡çš„æ–¹æ³•ï¼š &lt;code&gt;export&lt;/code&gt; å‘½ä»¤ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;export&lt;/code&gt; å‘½ä»¤ç”¨äºè®¾ç½®æˆ–æ˜¾ç¤ºç¯å¢ƒå˜é‡ã€‚é€šè¿‡ &lt;code&gt;export&lt;/code&gt; æ·»åŠ çš„ç¯å¢ƒå˜é‡ä»…åœ¨æ­¤æ¬¡ç™»é™†å‘¨æœŸå†…æœ‰æ•ˆã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬çš„å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒï¼Œå°±å¯ä»¥é€šè¿‡è®¾ç½®ä¸€ä¸ªä¸´æ—¶ç¯å¢ƒå˜é‡æ¥ï¼Œç„¶ååœ¨ç¨‹åºä¸­æ ¹æ®ä¸åŒçš„ç¯å¢ƒå˜é‡æ¥è®¾ç½®ä¸åŒçš„å‚æ•°ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# è®¾ç½® NODE_ENV ç¯å¢ƒå˜é‡ã€‚é€€å‡º SHELL æ—¶å¤±æ•ˆ
$ export NODE_ENV=development
# æŸ¥çœ‹å½“å‰æ‰€æœ‰ç¯å¢ƒå˜é‡
$ export -p
...
typeset -x NODE_ENV=development
typeset -x USER=jh
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨ Node.js ä»£ç ä¸­åˆ¤æ–­å½“å‰ç¯å¢ƒæ˜¯å¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;if(process.env.NODE_ENV === &#39;development&#39;) {
    console.log(&#39;å¼€å‘ç¯å¢ƒ&#39;);
} else {
    console.log(&#39;ç”Ÿäº§ç¯å¢ƒ&#39;);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;p&gt;Github Issues &lt;a href=&#34;https://github.com/nodejh/nodejh.github.io/issues/34&#34;&gt;https://github.com/nodejh/nodejh.github.io/issues/34&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>How to Create Auto Increment Column in Oracle</title>
      <link>http://nodejh.com/post/How-to-Create-Auto-Increment-Column-in-Oracle/</link>
      <pubDate>Mon, 20 Feb 2017 20:26:33 +0800</pubDate>
      
      <guid>http://nodejh.com/post/How-to-Create-Auto-Increment-Column-in-Oracle/</guid>
      <description>

&lt;p&gt;å¦‚æœä½ ç»å¸¸ä½¿ç”¨ MySQLï¼Œä½ è‚¯å®šå¯¹ &lt;code&gt;AUTO_INCREMENT&lt;/code&gt; éå¸¸ç†Ÿæ‚‰ï¼Œå› ä¸ºç»å¸¸è¦ç”¨åˆ°å®ƒã€‚&lt;/p&gt;

&lt;h2 id=&#34;ä¸€-ä»€ä¹ˆæ˜¯è‡ªå¢åˆ—&#34;&gt;ä¸€ã€ä»€ä¹ˆæ˜¯è‡ªå¢åˆ— ï¼Ÿ&lt;/h2&gt;

&lt;p&gt;è‡ªå¢åˆ—æ˜¯æ•°æ®åº“ä¸­å€¼éšæ’å…¥çš„æ¯ä¸ªè¡Œè‡ªåŠ¨å¢åŠ çš„ä¸€åˆ—ã€‚å®ƒæœ€å¸¸ç”¨äºä¸»é”®æˆ– ID å­—æ®µï¼Œè¿™æ ·æ¯æ¬¡å¢åŠ ä¸€è¡Œæ—¶ï¼Œä¸ç”¨æŒ‡è¯¥å­—æ®µçš„å€¼ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨å¢åŠ ï¼Œè€Œä¸”æ˜¯å”¯ä¸€çš„ã€‚&lt;/p&gt;

&lt;p&gt;å½“åœ¨ MySQL ä¸­å®šä¹‰åˆ—æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€ä¸ªåä¸º &lt;code&gt;AUTO_INCREMENT&lt;/code&gt; çš„å‚æ•°ã€‚ç„¶åï¼Œæ¯å½“å°†æ–°å€¼æ’å…¥æ­¤è¡¨ä¸­æ—¶ï¼Œæ”¾å…¥æ­¤åˆ—çš„å€¼æ¯”æœ€åä¸€ä¸ªå€¼åŠ  &lt;code&gt;1&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä½†å¾ˆä¸å¹¸ï¼ŒOracle æ²¡æœ‰ &lt;code&gt;AUTO_INCREMENT&lt;/code&gt; åŠŸèƒ½ã€‚ é‚£è¦å¦‚ä½•åœ¨Oracleä¸­åšåˆ°è¿™ä¸€ç‚¹å‘¢ï¼Ÿ&lt;/p&gt;

&lt;h2 id=&#34;äºŒ-åœ¨-oracle-11g-ä¸­è®¾ç½®è‡ªå¢å­—æ®µ&#34;&gt;äºŒã€åœ¨  Oracle 11g ä¸­è®¾ç½®è‡ªå¢å­—æ®µ&lt;/h2&gt;

&lt;h3 id=&#34;1-åˆ›å»ºè¡¨&#34;&gt;1. åˆ›å»ºè¡¨&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆåˆ›å»ºä¸€å¼ ç”¨äºæµ‹è¯•çš„è¡¨ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;CREATE TABLE &amp;quot;TEST&amp;quot; (
    ID NUMBER(11) PRIMARY KEY,
    NAME VARCHAR2(50BYTE) NOT NULL
);
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;2-åˆ›å»ºåºåˆ—&#34;&gt;2. åˆ›å»ºåºåˆ—&lt;/h3&gt;

&lt;p&gt;ç„¶ååˆ›å»ºä¸€ä¸ªåä¸º &lt;code&gt;TEST_ID_SEQ&lt;/code&gt; çš„åºåˆ—ï¼ˆåºåˆ—åç§°è‡ªå·±éšæ„è®¾å®šï¼‰ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;CREATE SEQUENCE TEST_ID_SEQ
INCREMENT BY 1
START WITH 100
MAXVALUE 999999999
NOCYCLE
NOCACHE;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚æœè¦åˆ é™¤åºåˆ—ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ SQL å‘½ä»¤ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DROP SEQUENCE TEST_ID_SEQ;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯¹ &lt;code&gt;SEQUENCE&lt;/code&gt; çš„ä¸€äº›è¯´æ˜ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;INCREMENT BY&lt;/code&gt; ç”¨äºæŒ‡å®šåºåˆ—å¢é‡ï¼ˆé»˜è®¤å€¼ï¼š1ï¼‰ï¼Œå¦‚æœæŒ‡å®šçš„æ˜¯æ­£æ•´æ•°ï¼Œåˆ™åºåˆ—å·è‡ªåŠ¨é€’å¢ï¼Œå¦‚æœæŒ‡å®šçš„æ˜¯è´Ÿæ•°ï¼Œåˆ™è‡ªåŠ¨é€’å‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;START WITH&lt;/code&gt; ç”¨äºæŒ‡å®šåºåˆ—ç”Ÿæˆå™¨ç”Ÿæˆçš„ç¬¬ä¸€ä¸ªåºåˆ—å·ï¼Œå½“åºåˆ—å·é¡ºåºé€’å¢æ—¶é»˜è®¤å€¼ä¸ºåºåˆ—å·çš„æœ€å°å€¼ï¼Œå½“åºåˆ—å·é¡ºåºé€’å‡æ—¶é»˜è®¤å€¼ä¸ºåºåˆ—å·çš„æœ€å¤§å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MAXVALUE&lt;/code&gt; ç”¨äºæŒ‡å®šåºåˆ—ç”Ÿæˆå™¨å¯ä»¥ç”Ÿæˆçš„ç»„å¤§åºåˆ—å·ï¼ˆå¿…é¡»å¤§äºæˆ–ç­‰äº &lt;code&gt;START WITH&lt;/code&gt;ï¼Œå¹¶ä¸”å¿…é¡»å¤§äº &lt;code&gt;MINVALUE&lt;/code&gt;ï¼‰ï¼Œé»˜è®¤ä¸º &lt;code&gt;NOMAXVALUE&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MINVALUE&lt;/code&gt; ç”¨äºæŒ‡å®šåºåˆ—ç”Ÿæˆå™¨å¯ä»¥ç”Ÿæˆçš„æœ€å°åºåˆ—å·ï¼ˆå¿…é¡»å°äºæˆ–ç­‰äº &lt;code&gt;START WITH&lt;/code&gt;ï¼Œå¹¶ä¸”å¿…é¡»å°äº &lt;code&gt;MAXVALUE&lt;/code&gt;ï¼‰ï¼Œé»˜è®¤å€¼ä¸º &lt;code&gt;NOMINVALUE&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CYCLE&lt;/code&gt; ç”¨äºæŒ‡å®šåœ¨è¾¾åˆ°åºåˆ—çš„æœ€å¤§å€¼æˆ–æœ€å°å€¼ä¹‹åæ˜¯å¦ç»§ç»­ç”Ÿæˆåºåˆ—å·ï¼Œé»˜è®¤ä¸º &lt;code&gt;NOCYCLE&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CACHE&lt;/code&gt; ç”¨äºæŒ‡å®šåœ¨å†…å­˜ä¸­å¯ä»¥é¢„åˆ†é…çš„åºåˆ—å·ä¸ªæ•°ï¼ˆé»˜è®¤å€¼ï¼š20ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åˆ°è¿™ä¸€æ­¥å…¶å®å°±å·²ç»å¯ä»¥å®ç°å­—æ®µè‡ªå¢ï¼Œåªè¦æ’å…¥çš„æ—¶å€™ï¼Œå°† ID çš„å€¼è®¾ç½®ä¸ºåºåˆ—çš„ä¸‹ä¸€ä¸ªå€¼ &lt;code&gt;TEST_ID_SEQ.NEXTVAL&lt;/code&gt; å°±å¯ä»¥äº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; INSERT INTO &amp;quot;TEST&amp;quot; (&amp;quot;ID&amp;quot;, &amp;quot;NAME&amp;quot;) VALUES (TEST_ID_SEQ.NEXTVAL, &#39;name1&#39;);
SQL&amp;gt; INSERT INTO &amp;quot;TEST&amp;quot; (&amp;quot;ID&amp;quot;, &amp;quot;NAME&amp;quot;) VALUES (TEST_ID_SEQ.NEXTVAL, &#39;name2&#39;);
SQL&amp;gt; INSERT INTO &amp;quot;TEST&amp;quot; (&amp;quot;ID&amp;quot;, &amp;quot;NAME&amp;quot;) VALUES (TEST_ID_SEQ.NEXTVAL, &#39;name3&#39;);
SQL&amp;gt; SELECT * FROM &amp;quot;TEST&amp;quot;;

ID   NAME
---  ------
100	name1
101	name2
102	name3

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸ºäº†ç®€åŒ–æ’å…¥æ“ä½œï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºä¸€ä¸ªè§¦å‘å™¨ï¼Œå½“å°†æ•°æ®æ’å…¥åˆ° &amp;ldquo;TEST&amp;rdquo; è¡¨çš„æ—¶å€™ï¼Œè‡ªåŠ¨å°†æœ€æ–°çš„ ID æ’å…¥è¿›å»ã€‚&lt;/p&gt;

&lt;h3 id=&#34;3-åˆ›å»ºè§¦å‘å™¨&#34;&gt;3. åˆ›å»ºè§¦å‘å™¨&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;CREATE OR REPLACE TRIGGER TEST_ID_SEQ_TRG
BEFORE INSERT ON &amp;quot;TEST&amp;quot;
FOR EACH ROW
WHEN (NEW.&amp;quot;ID&amp;quot; IS NULL)
BEGIN
  SELECT TEST_ID_SEQ.NEXTVAL
  INTO :NEW.&amp;quot;ID&amp;quot;
  FROM DUAL;
END;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·çš„è¯ï¼Œæ¯æ¬¡å†™æ’å…¥è¯­å¥ï¼Œåªéœ€è¦å°† &lt;code&gt;ID&lt;/code&gt; å­—æ®µçš„å€¼è®¾ç½®ä¸º &lt;code&gt;NULL&lt;/code&gt; å®ƒå°±ä¼šè‡ªåŠ¨é€’å¢äº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; INSERT INTO &amp;quot;TEST&amp;quot; (&amp;quot;ID&amp;quot;, &amp;quot;NAME&amp;quot;) VALUES (NULL, &#39;name4&#39;);
SQL&amp;gt; INSERT INTO &amp;quot;TEST&amp;quot; (&amp;quot;ID&amp;quot;, &amp;quot;NAME&amp;quot;) VALUES (NULL, &#39;name5&#39;);
SQL&amp;gt; INSERT INTO &amp;quot;TEST&amp;quot; (&amp;quot;ID&amp;quot;, &amp;quot;NAME&amp;quot;) VALUES (NULL, &#39;name6&#39;);
SQL&amp;gt; SELECT * FROM &amp;quot;TEST&amp;quot;;

ID   NAME
---  ------
100	name1
101	name2
102	name3
103	name4
104	name5
105	name6
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;4-ä¸€äº›å€¼å¾—æ³¨æ„çš„åœ°æ–¹&#34;&gt;4. ä¸€äº›å€¼å¾—æ³¨æ„çš„åœ°æ–¹&lt;/h3&gt;

&lt;h4 id=&#34;4-1-æ’å…¥æŒ‡å®š-id&#34;&gt;4.1 æ’å…¥æŒ‡å®š ID&lt;/h4&gt;

&lt;p&gt;å¦‚æœæŸæ¡æ’å…¥è¯­å¥æŒ‡å®šäº† &lt;code&gt;ID&lt;/code&gt; çš„å€¼å¦‚ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; INSERT INTO &amp;quot;TEST&amp;quot; (&amp;quot;ID&amp;quot;, &amp;quot;NAME&amp;quot;) VALUES (1000, &#39;name1001&#39;);
SQL&amp;gt; SELECT * FROM &amp;quot;TEST&amp;quot;;

ID   NAME
---  ------
100	name1
101	name2
102	name3
103	name4
104	name5
1000	name1001
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é‚£ä¹ˆä¸‹æ¬¡ &lt;code&gt;ID&lt;/code&gt; è¿˜æ˜¯ä¼šåœ¨åŸæ¥çš„åŸºç¡€ä¸Šç»§ç»­å¢åŠ ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; INSERT INTO &amp;quot;TEST&amp;quot; (&amp;quot;ID&amp;quot;, &amp;quot;NAME&amp;quot;) VALUES (NULL, &#39;name1001&#39;);
SQL&amp;gt; SELECT * FROM &amp;quot;TEST&amp;quot;;

ID   NAME
---  ------
100	name1
101	name2
102	name3
103	name4
104	name5
1000	name1001
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½†å½“åºåˆ—çš„å€¼åˆ°äº† &lt;code&gt;1000&lt;/code&gt; çš„æ—¶å€™ï¼Œå¦‚æœ &lt;code&gt;ID&lt;/code&gt; å…è®¸é‡å¤ï¼Œå°±ä¼šæœ‰ä¸¤è¡Œè®°å½• &lt;code&gt;ID&lt;/code&gt; éƒ½ä¸º &lt;code&gt;1000&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä½†å¦‚æœ &lt;code&gt;ID&lt;/code&gt; è®¾ç½®ä¸ºäº†ä¸»é”®ï¼Œå¦‚æœ¬æ–‡çš„ä¾‹å­ &lt;code&gt;ID NUMBER(11) PRIMARY KEY&lt;/code&gt;ï¼Œåˆ™æ’å…¥å°±ä¼šæŠ¥é”™ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Error : ORA-00001: unique constraint (SOFTWARE.SYS_C0014995) violated
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;4-2-å­—æ®µåŠ å¼•å·&#34;&gt;4.2 å­—æ®µåŠ å¼•å·&lt;/h4&gt;

&lt;p&gt;åœ¨ SQL è¯­å¥ä¸­ï¼Œå­—æ®µæœ€å¥½éƒ½åŠ ä¸Šå¼•å·ï¼Œä¸ç„¶å¯èƒ½ä¼šæŠ¥é”™ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Error : ORA-00900: invalid SQL statement
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ–ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ORA-24344: Success with Compilation Error
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;4-3-squence&#34;&gt;4.3 SQUENCE&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€æ¬¡ &lt;code&gt;NEXTVAL&lt;/code&gt; è¿”å›çš„æ˜¯åˆå§‹å€¼ï¼›éšåçš„ &lt;code&gt;NEXTVAL&lt;/code&gt; ä¼šè‡ªåŠ¨å¢åŠ  &lt;code&gt;INCREMENT BY&lt;/code&gt; å¯¹åº”çš„å€¼ï¼Œç„¶åè¿”å›å¢åŠ åçš„å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CURRVAL&lt;/code&gt; æ€»æ˜¯è¿”å›å½“å‰ &lt;code&gt;SEQUENCE&lt;/code&gt; çš„å€¼ï¼Œä½†æ˜¯åœ¨ç¬¬ä¸€æ¬¡ &lt;code&gt;NEXTVAL&lt;/code&gt; åˆå§‹åŒ–ä¹‹åæ‰èƒ½ä½¿ç”¨ &lt;code&gt;CURRVAL&lt;/code&gt; ï¼Œå¦åˆ™ä¼šå‡ºé”™ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€æ¬¡ &lt;code&gt;NEXTVAL&lt;/code&gt; ä¼šå¢åŠ ä¸€æ¬¡ &lt;code&gt;SEQUENCE&lt;/code&gt; çš„å€¼ï¼Œæ‰€ä»¥å¦‚æœåœ¨åŒä¸€ä¸ªè¯­å¥é‡Œé¢ä½¿ç”¨å¤šä¸ªNEXTVALï¼Œå…¶å€¼å°±æ˜¯ä¸ä¸€æ ·çš„ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæŒ‡å®š &lt;code&gt;CACHE&lt;/code&gt; å€¼ï¼ŒOracle å°±å¯ä»¥é¢„å…ˆåœ¨å†…å­˜é‡Œé¢æ”¾ç½®ä¸€äº› &lt;code&gt;SEQUENCE&lt;/code&gt;ï¼Œè¿™æ ·å­˜å–çš„å¿«äº›ã€‚ &lt;code&gt;CACHE&lt;/code&gt; é‡Œé¢çš„å–å®Œåï¼ŒOracle è‡ªåŠ¨å†å–ä¸€ç»„åˆ° &lt;code&gt;CACHE&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä½†ä½¿ç”¨ &lt;code&gt;CACHE&lt;/code&gt; æˆ–è®¸ä¼šè·³å·ï¼Œæ¯”å¦‚æ•°æ®åº“çªç„¶ä¸æ­£å¸¸å…³é—­ï¼ˆ&lt;code&gt;shutdown abort&lt;/code&gt;)ï¼Œ &lt;code&gt;CACHE&lt;/code&gt; ä¸­çš„ &lt;code&gt;SEQUENCE&lt;/code&gt; å°±ä¼šä¸¢å¤±ã€‚æ‰€ä»¥å¯ä»¥åœ¨ &lt;code&gt;CREATE SEQUENCE&lt;/code&gt; çš„æ—¶å€™ç”¨ &lt;code&gt;NOCACHE&lt;/code&gt; é˜²æ­¢è¿™ç§æƒ…å†µã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;4-4-æ€§èƒ½&#34;&gt;4.4 æ€§èƒ½&lt;/h4&gt;

&lt;p&gt;åœ¨æ•°æ®åº“æ“ä½œä¸­ï¼Œè§¦å‘å™¨çš„ä½¿ç”¨è€—è´¹ç³»ç»Ÿèµ„æºç›¸å¯¹è¾ƒå¤§ã€‚å¦‚æœå¯¹äºè¡¨å®¹é‡ç›¸å¯¹è¾ƒå°çš„è¡¨æ ¼æˆ‘ä»¬å¯ä»¥å¿½ç•¥è§¦å‘å™¨å¸¦æ¥çš„æ€§èƒ½å½±å“ã€‚&lt;/p&gt;

&lt;p&gt;è€ƒè™‘åˆ°å¤§è¡¨æ“ä½œçš„æ€§èƒ½é—®é¢˜ï¼Œéœ€è¦å°½å¯èƒ½çš„å‡å°‘è§¦å‘å™¨çš„ä½¿ç”¨ã€‚å¯¹äºä»¥ä¸Šæ“ä½œï¼Œå°±å¯ä»¥æŠ›å¼ƒè§¦å‘å™¨çš„ä½¿ç”¨ï¼Œç›´æ¥æ‰‹åŠ¨è°ƒç”¨åºåˆ—å‡½æ•°å³å¯ï¼Œä½†è¿™æ ·å¯èƒ½åœ¨ç¨‹åºç»´æŠ¤ä¸Šç¨å¾®å¸¦æ¥ä¸€äº›ä¸ä¾¿ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ä¸‰-åœ¨-oracle-12c-ä¸­è®¾ç½®è‡ªå¢å­—æ®µ&#34;&gt;ä¸‰ã€åœ¨ Oracle 12c ä¸­è®¾ç½®è‡ªå¢å­—æ®µ&lt;/h2&gt;

&lt;p&gt;åœ¨ Oracle 12c ä¸­è®¾ç½®è‡ªå¢å­—æ®µå°±ç®€å•å¤šäº†ï¼Œå› ä¸º ORacle 12c æä¾›äº† &lt;code&gt;IDENTITY&lt;/code&gt; å±æ€§ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;CREATE TABLE &amp;quot;TEST&amp;quot; (
    ID NUMBER(11) GENERATED BY DEFAULT ON NULL AS IDENTITY,
    NAME VARCHAR2(50BYTE) NOT NULL
);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·å°±æå®šäº†ï¼å’Œ MySQL ä¸€æ ·ç®€å•ï¼ğŸ¤£ğŸ¤£ğŸ¤£&lt;/p&gt;

&lt;h2 id=&#34;å››-æ€»ç»“&#34;&gt;å››ã€æ€»ç»“&lt;/h2&gt;

&lt;p&gt;æ‰€ä»¥å¦‚ä¸Šæ‰€å±ï¼Œåœ¨ Oracle ä¸­è®¾ç½®è‡ªå¢å­—æ®µï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„ç‰ˆæœ¬ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;åœ¨ Oracle 11g ä¸­ï¼Œéœ€è¦å…ˆåˆ›å»ºåºåˆ—ï¼ˆSQUENCEï¼‰å†åˆ›å»ºä¸€ä¸ªè§¦å‘å™¨ï¼ˆTRIGGERï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ Oracle 12c ä¸­ï¼Œåªéœ€è¦ä½¿ç”¨ &lt;code&gt;IDENTITY&lt;/code&gt; å±æ€§å°±å¯ä»¥äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;Github Issues &lt;a href=&#34;https://github.com/nodejh/nodejh.github.io/issues/33&#34;&gt;https://github.com/nodejh/nodejh.github.io/issues/33&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Is JavaScript a call by reference or call by value language?</title>
      <link>http://nodejh.com/post/Is-JavaScript-a-pass-by-reference-or-pass-by-value-language/</link>
      <pubDate>Sat, 18 Feb 2017 11:07:14 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Is-JavaScript-a-pass-by-reference-or-pass-by-value-language/</guid>
      <description>

&lt;h2 id=&#34;1-ä¾‹å­&#34;&gt;1. ä¾‹å­&lt;/h2&gt;

&lt;p&gt;å…ˆæ¥çœ‹ä¸¤ä¸ªä¸ªæ¥è‡ªäº ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹P70-P71 çš„ä¸¤ä¸ªä¾‹å­ã€‚&lt;/p&gt;

&lt;h4 id=&#34;1-1-åŸºæœ¬ç±»å‹å‚æ•°ä¼ é€’&#34;&gt;1.1. åŸºæœ¬ç±»å‹å‚æ•°ä¼ é€’&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;function addTen(num) {
  num += 10;
  return num;
}

var count = 20;
var result = addTen(count);
alert(count); // 20, æ²¡æœ‰å˜åŒ–
alert(result); // 30
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;ä¹¦ä¸Šè§£é‡Šè¯´ï¼ŒJavaScript å‚æ•°ä¼ é€’éƒ½æ˜¯æŒ‰å€¼ä¼ å‚ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ä¼ é€’ç»™ &lt;code&gt;addTen&lt;/code&gt; å‡½æ•°çš„å€¼æ˜¯ &lt;code&gt;20&lt;/code&gt; è¿™ä¸ªå€¼ï¼Œæ‰€ä»¥å‡½æ•°æ‰§è¡Œç»“æŸåŸå§‹å˜é‡ &lt;code&gt;count&lt;/code&gt; å¹¶ä¸ä¼šæ”¹å˜ã€‚&lt;/p&gt;

&lt;h4 id=&#34;1-2-å¼•ç”¨ç±»å‹å‚æ•°ä¼ é€’&#34;&gt;1.2. å¼•ç”¨ç±»å‹å‚æ•°ä¼ é€’&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;function setName(obj) {
  obj.name = &#39;Nicholas&#39;;
  obj = new Object();
  obj.name = &#39;Greg&#39;;
}

var person = new Object();
setName(person);
alert(person.name); // Nicholas
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸ºä»€ä¹ˆç»“æœæ˜¯ &lt;code&gt;Nicholas&lt;/code&gt; å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2017-02-17-Is-JavaScript-a-pass-by-reference-or-pass-by-value-language-1.png&#34; alt=&#34;å˜é‡å­˜å‚¨æ–¹å¼&#34; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;ç–‘é—®ï¼šå¦‚æœæ˜¯ä¼ å€¼ï¼Œé‚£åº”è¯¥æ˜¯æŠŠ person å˜é‡çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯ä¸€ä¸ªæŒ‡å‘å †å†…å­˜ä¸­å¯¹è±¡çš„æŒ‡é’ˆï¼‰ä¼ é€’åˆ°å‡½æ•°ä¸­ï¼Œ&lt;code&gt;obj.name = &#39;Greg&#39;;&lt;/code&gt; æ”¹å˜äº†å †å†…å­˜ä¸­å¯¹è±¡çš„å±æ€§ï¼Œä¸ºä»€ä¹ˆ &lt;code&gt;person.name&lt;/code&gt; è¿˜æ˜¯ &lt;code&gt;Nicholas&lt;/code&gt; ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;2-ä¼ å€¼è¿˜æ˜¯ä¼ å¼•ç”¨&#34;&gt;2. ä¼ å€¼è¿˜æ˜¯ä¼ å¼•ç”¨ï¼Ÿ&lt;/h2&gt;

&lt;p&gt;è®©æˆ‘ä»¬å†å°†ä¸Šé¢ä¸¤ä¸ªä¾‹å­ç»¼åˆä¸ºä¸‹é¢çš„ä¾‹å­ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;function changeStuff(a, b, c) {
  a = a * 10;
  b.item = &amp;quot;changed&amp;quot;;
  c = {item: &amp;quot;changed&amp;quot;};
}

var num = 10;
var obj1 = {item: &amp;quot;unchanged&amp;quot;};
var obj2 = {item: &amp;quot;unchanged&amp;quot;};

changeStuff(num, obj1, obj2);

console.log(num);
console.log(obj1.item);    
console.log(obj2.item);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ€ç»ˆçš„è¾“å‡ºç»“æœæ˜¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;10
changed
unchanged
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‰€ä»¥ JS åˆ°åº•æ˜¯ä¼ å€¼è°ƒç”¨è¿˜æ˜¯ä¼ å¼•ç”¨è°ƒç”¨å‘¢ï¼Ÿè¦å¼„æ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆæˆ‘ä»¬è¦æ˜ç™½åˆ°åº•ä»€ä¹ˆæ˜¯&lt;strong&gt;ä¼ å€¼è°ƒç”¨ï¼ˆCall-ny-valueï¼‰&lt;/strong&gt;å’Œ&lt;strong&gt;ä¼ å¼•ç”¨è°ƒç”¨ï¼ˆCall-by-referenceï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h4 id=&#34;2-1-ä¼ å€¼è°ƒç”¨-pass-by-value&#34;&gt;2.1. ä¼ å€¼è°ƒç”¨ï¼ˆPass by valueï¼‰&lt;/h4&gt;

&lt;p&gt;åœ¨ä¼ å€¼è°ƒç”¨ä¸­ï¼Œä¼ é€’ç»™å‡½æ•°å‚æ•°æ˜¯å‡½æ•°è¢«è°ƒç”¨æ—¶æ‰€ä¼ å®å‚çš„æ‹·è´ã€‚åœ¨ä¼ å€¼è°ƒç”¨ä¸­å®é™…å‚æ•°è¢«æ±‚å€¼ï¼Œå…¶å€¼è¢«ç»‘å®šåˆ°å‡½æ•°ä¸­å¯¹åº”çš„å˜é‡ä¸Šï¼ˆé€šå¸¸æ˜¯æŠŠå€¼å¤åˆ¶åˆ°æ–°å†…å­˜åŒºåŸŸï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å³ &lt;code&gt;changeStuff&lt;/code&gt; çš„å‚æ•° &lt;code&gt;a&lt;/code&gt; &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; æ˜¯ &lt;code&gt;num1&lt;/code&gt; &lt;code&gt;obj1&lt;/code&gt; &lt;code&gt;obj2&lt;/code&gt; çš„æ‹·è´ã€‚æ‰€ä»¥æ— è®º &lt;code&gt;a&lt;/code&gt; &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; æ€ä¹ˆå˜åŒ–ï¼Œ&lt;code&gt;num1&lt;/code&gt; &lt;code&gt;obj1&lt;/code&gt; &lt;code&gt;obj2&lt;/code&gt; éƒ½ä¿æŒä¸å˜ã€‚&lt;/p&gt;

&lt;p&gt;é—®é¢˜å°±åœ¨äº &lt;code&gt;obj1&lt;/code&gt; å˜äº†ã€‚&lt;/p&gt;

&lt;h4 id=&#34;2-2-ä¼ å¼•ç”¨è°ƒç”¨-pass-by-reference&#34;&gt;2.2. ä¼ å¼•ç”¨è°ƒç”¨ï¼ˆPass by referenceï¼‰&lt;/h4&gt;

&lt;p&gt;åœ¨ä¼ å¼•ç”¨è°ƒç”¨è°ƒç”¨ä¸­ï¼Œä¼ é€’ç»™å‡½æ•°çš„æ˜¯å®ƒçš„å®é™…å‚æ•°çš„éšå¼å¼•ç”¨è€Œä¸æ˜¯å®å‚çš„æ‹·è´ã€‚é€šå¸¸å‡½æ•°èƒ½å¤Ÿä¿®æ”¹è¿™äº›å‚æ•°ï¼ˆæ¯”å¦‚èµ‹å€¼ï¼‰ï¼Œè€Œä¸”æ”¹å˜å¯¹äºè°ƒç”¨è€…æ˜¯å¯è§çš„ã€‚&lt;/p&gt;

&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ &lt;code&gt;changeStuff&lt;/code&gt; å‡½æ•°å†…çš„ &lt;code&gt;a&lt;/code&gt; &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; éƒ½åˆ†åˆ«ä¸ &lt;code&gt;num&lt;/code&gt; &lt;code&gt;obj1&lt;/code&gt; &lt;code&gt;obj2&lt;/code&gt; æŒ‡å‘åŒä¸€å—å†…å­˜ï¼Œä½†ä¸æ˜¯å…¶æ‹·è´ã€‚å‡½æ•°å†…å¯¹ &lt;code&gt;a&lt;/code&gt; &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; æ‰€åšçš„ä»»ä½•ä¿®æ”¹ï¼Œéƒ½å°†åæ˜ åˆ° &lt;code&gt;num&lt;/code&gt; &lt;code&gt;obj1&lt;/code&gt; &lt;code&gt;obj2&lt;/code&gt; ä¸Š ã€‚&lt;/p&gt;

&lt;p&gt;é—®é¢˜å°±åœ¨äº &lt;code&gt;num&lt;/code&gt; å’Œ &lt;code&gt;obj2&lt;/code&gt; æ²¡å˜ã€‚&lt;/p&gt;

&lt;p&gt;ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼ŒJavaScript ä¸­å‡½æ•°å‚æ•°çš„ä¼ é€’æ–¹å¼æ—¢ä¸æ˜¯ä¼ å€¼ï¼Œä¹Ÿä¸æ˜¯ä¼ å¼•ç”¨ã€‚ä¸»è¦é—®é¢˜å‡ºåœ¨ JS çš„å¼•ç”¨ç±»å‹ä¸Šé¢ã€‚&lt;/p&gt;

&lt;p&gt;JS å¼•ç”¨ç±»å‹å˜é‡çš„å€¼æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å †å†…å­˜ä¸­çš„å®é™…å¯¹è±¡ã€‚&lt;/p&gt;

&lt;h4 id=&#34;2-3-ä¼ å…±äº«è°ƒç”¨-call-by-sharing&#34;&gt;2.3. ä¼ å…±äº«è°ƒç”¨ï¼ˆCall by sharingï¼‰&lt;/h4&gt;

&lt;p&gt;è¿˜æœ‰ä¸€ç§æ±‚å€¼ç­–ç•¥å«åš&lt;a href=&#34;http://dmitrysoshnikov.com/ecmascript/chapter-8-evaluation-strategy/#call-by-sharing&#34;&gt;ä¼ å…±äº«è°ƒç”¨ï¼ˆCall-by-sharing/Call by object/Call by object-sharingï¼‰&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¼ å…±äº«è°ƒç”¨å’Œä¼ å¼•ç”¨è°ƒç”¨çš„ä¸åŒä¹‹å¤„æ˜¯ï¼Œè¯¥æ±‚å€¼ç­–ç•¥ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°æ˜¯å¯¹è±¡çš„å¼•ç”¨çš„æ‹·è´ï¼Œå³å¯¹è±¡å˜é‡æŒ‡é’ˆçš„æ‹·è´ã€‚&lt;/p&gt;

&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ï¼Œ &lt;code&gt;a&lt;/code&gt; &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; ä¸‰ä¸ªå˜é‡çš„å€¼æ˜¯ &lt;code&gt;num&lt;/code&gt; &lt;code&gt;obj1&lt;/code&gt; &lt;code&gt;obj2&lt;/code&gt; çš„æŒ‡é’ˆçš„æ‹·è´ã€‚ &lt;code&gt;a&lt;/code&gt; &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; çš„å€¼åˆ†åˆ«ä¸ &lt;code&gt;num&lt;/code&gt; &lt;code&gt;obj1&lt;/code&gt; &lt;code&gt;obj2&lt;/code&gt; çš„å€¼æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚å‡½æ•°å†…éƒ¨å¯ä»¥å¯¹  &lt;code&gt;a&lt;/code&gt; &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; è¿›è¡Œä¿®æ”¹å¯é‡æ–°èµ‹å€¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;function changeStuff(a, b, c) {
  a = a * 10; // å¯¹ a èµ‹å€¼ï¼Œä¿®æ”¹ a çš„æŒ‡å‘ï¼Œæ–°çš„å€¼æ˜¯ a * 10
  b.item = &amp;quot;changed&amp;quot;; // å› ä¸º b ä¸ obj1 æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œä¼šä¿®æ”¹åŸå§‹å¯¹è±¡ obj1.item çš„å†…å®¹
  c = {item: &amp;quot;changed&amp;quot;}; // å¯¹ c é‡æ–°èµ‹å€¼ï¼Œä¿®æ”¹ c çš„æŒ‡å‘ï¼Œå…¶æŒ‡å‘çš„å¯¹è±¡å†…å®¹æ˜¯ {item: &amp;quot;changed&amp;quot;}
}

&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;3-ä»£ç åˆ†æ&#34;&gt;3 ä»£ç åˆ†æ&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹æ¥è®©æˆ‘ä»¬å†æ¥åˆ†æä¸€ä¸‹ä»£ç ã€‚&lt;/p&gt;

&lt;h4 id=&#34;3-1-å˜é‡åˆå§‹åŒ–&#34;&gt;3.1 å˜é‡åˆå§‹åŒ–&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;var num = 10;
var obj1 = {item: &amp;quot;unchanged&amp;quot;};
var obj2 = {item: &amp;quot;unchanged&amp;quot;};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2017-02-19-Is-JavaScript-a-pass-by-reference-or-pass-by-value-language-2.png&#34; alt=&#34;å˜é‡åˆå§‹åŒ–&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;3-2-è°ƒç”¨å‡½æ•°&#34;&gt;3.2 è°ƒç”¨å‡½æ•°&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;changeStuff(num, obj1, obj2);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2017-02-19-Is-JavaScript-a-pass-by-reference-or-pass-by-value-language-3.png&#34; alt=&#34;è°ƒç”¨å‡½æ•°&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œå˜é‡ &lt;code&gt;a&lt;/code&gt; çš„å€¼å°±æ˜¯ &lt;code&gt;num&lt;/code&gt; å€¼çš„æ‹·è´ï¼Œå˜é‡ &lt;code&gt;b&lt;/code&gt; &lt;code&gt;c&lt;/code&gt; åˆ†åˆ«æ˜¯ &lt;code&gt;obj1&lt;/code&gt; &lt;code&gt;obj2&lt;/code&gt; çš„æŒ‡é’ˆçš„æ‹·è´ã€‚&lt;/p&gt;

&lt;p&gt;å‡½æ•°çš„å‚æ•°å…¶å®å°±æ˜¯å‡½æ•°ä½œç”¨åŸŸå†…éƒ¨çš„å˜é‡ï¼Œå‡½æ•°æ‰§è¡Œå®Œä¹‹åå°±ä¼šé”€æ¯ã€‚&lt;/p&gt;

&lt;h4 id=&#34;3-3-æ‰§è¡Œå‡½æ•°ä½“&#34;&gt;3.3 æ‰§è¡Œå‡½æ•°ä½“&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;a = a * 10;
b.item = &amp;quot;changed&amp;quot;;
c = {item: &amp;quot;changed&amp;quot;};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2017-02-19-Is-JavaScript-a-pass-by-reference-or-pass-by-value-language-5.png&#34; alt=&#34;æ‰§è¡Œå‡½æ•°ä½“&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚å›¾æ‰€ç¤ºï¼Œå˜é‡ &lt;code&gt;a&lt;/code&gt; çš„å€¼çš„æ”¹å˜ï¼Œå¹¶ä¸ä¼šå½±å“å˜é‡ &lt;code&gt;num&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è€Œ &lt;code&gt;b&lt;/code&gt; å› ä¸ºå’Œ &lt;code&gt;obj1&lt;/code&gt; æ˜¯æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä½¿ç”¨ &lt;code&gt;b.item = &amp;quot;changed&amp;quot;;&lt;/code&gt; ä¿®æ”¹å¯¹è±¡çš„å€¼ï¼Œä¼šé€ æˆ &lt;code&gt;obj1&lt;/code&gt; çš„å€¼ä¹Ÿéšä¹‹æ”¹å˜ã€‚&lt;/p&gt;

&lt;p&gt;ç”±äºæ˜¯å¯¹ &lt;code&gt;c&lt;/code&gt; é‡æ–°èµ‹å€¼äº†ï¼Œæ‰€ä»¥ä¿®æ”¹ &lt;code&gt;c&lt;/code&gt; çš„å¯¹è±¡çš„å€¼ï¼Œå¹¶ä¸ä¼šå½±å“åˆ° &lt;code&gt;obj2&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;4-ç»“è®º&#34;&gt;4. ç»“è®º&lt;/h2&gt;

&lt;p&gt;ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œå¯¹äº JS æ¥è¯´ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸºæœ¬ç±»å‹æ˜¯ä¼ å€¼è°ƒç”¨&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼•ç”¨ç±»å‹ä¼ å…±äº«è°ƒç”¨&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¼ å€¼è°ƒç”¨æœ¬è´¨ä¸Šä¼ é€’çš„æ˜¯å˜é‡çš„å€¼çš„æ‹·è´ã€‚&lt;/p&gt;

&lt;p&gt;ä¼ å…±äº«è°ƒç”¨æœ¬è´¨ä¸Šæ˜¯ä¼ é€’å¯¹è±¡çš„æŒ‡é’ˆçš„æ‹·è´ï¼Œå…¶æŒ‡é’ˆä¹Ÿæ˜¯å˜é‡çš„å€¼ã€‚æ‰€ä»¥ä¼ å…±äº«è°ƒç”¨ä¹Ÿå¯ä»¥è¯´æ˜¯ä¼ å€¼è°ƒç”¨ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹è¯´ &lt;strong&gt;JavaScript å‚æ•°ä¼ é€’éƒ½æ˜¯æŒ‰å€¼ä¼ å‚&lt;/strong&gt; ä¹Ÿæ˜¯æœ‰é“ç†çš„ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;å‚è€ƒ&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Evaluation_strategy&#34;&gt;Evaluation strategy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E6%B1%82%E5%80%BC%E7%AD%96%E7%95%A5&#34;&gt;æ±‚å€¼ç­–ç•¥&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://dmitrysoshnikov.com/ecmascript/chapter-8-evaluation-strategy&#34;&gt;ECMA-262-3 in detail. Chapter 8. Evaluation strategy.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://stackoverflow.com/questions/518000/is-javascript-a-pass-by-reference-or-pass-by-value-language&#34;&gt;Is JavaScript a pass-by-reference or pass-by-value language?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/simongong/js-stackoverflow-highest-votes/blob/master/questions21-30/parameter-passed-by-value-or-reference.md&#34;&gt;parameter passed by value or reference&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://bosn.me/js/js-call-by-sharing/&#34;&gt;JSæ˜¯æŒ‰å€¼ä¼ é€’è¿˜æ˜¯æŒ‰å¼•ç”¨ä¼ é€’?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Using SQL Plus on Oracle</title>
      <link>http://nodejh.com/post/Using-SQL-Plus-on-Oracle/</link>
      <pubDate>Fri, 17 Feb 2017 15:03:43 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Using-SQL-Plus-on-Oracle/</guid>
      <description>

&lt;p&gt;SQL *Plus æ˜¯åŸºäºå‘½ä»¤è¡Œçš„ Oracle ç®¡ç†å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æ‰§è¡Œ &lt;code&gt;SQL&lt;/code&gt;ã€&lt;code&gt;PL/SQL&lt;/code&gt;ã€ å’Œ &lt;code&gt;SQL*Plus&lt;/code&gt; å‘½ä»¤ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ”¯æŒæŸ¥è¯¢ã€æ’å…¥å’Œæ›´æ–°æ•°æ®&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œ &lt;code&gt;PL/SQL&lt;/code&gt; ç¨‹åº&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹è¡¨å’Œå¯¹è±¡çš„å®šä¹‰&lt;/li&gt;
&lt;li&gt;å¼€å‘å’Œæ‰§è¡Œæ‰¹å¤„ç†è„šæœ¬&lt;/li&gt;
&lt;li&gt;è¿›è¡Œæ•°æ®åº“ç®¡ç†&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;ç™»å½•-sql-plus&#34;&gt;ç™»å½• SQL *PLUS&lt;/h2&gt;

&lt;p&gt;ç›´æ¥ç™»å½•ï¼Œè¾“å…¥å‘½ä»¤åä¼šæç¤ºè¾“å…¥ç”¨æˆ·åå¯†ç ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sqlplus
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sqlplus [username]/[user_password]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ“ä½œç³»ç»Ÿæƒé™è®¤è¯çš„ Oracle SYS ç®¡ç†å‘˜ç™»é™†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sqlplus / as sysdba
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸åœ¨ç»ˆç«¯æš´éœ²å¯†ç ç™»å½•ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sqlplus /nolog
SQL&amp;gt; conn [username]/[user_password]
# æˆ–è€…
SQL &amp;gt; conn / as sysdba
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€€å‡ºç™»å½•ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; exit
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;æ•°æ®åº“ä¿¡æ¯&#34;&gt;æ•°æ®åº“ä¿¡æ¯&lt;/h2&gt;

&lt;h4 id=&#34;æŸ¥çœ‹æ•°æ®åº“å&#34;&gt;æŸ¥çœ‹æ•°æ®åº“å&lt;/h4&gt;

&lt;p&gt;é€šå¸¸æƒ…å†µäº†æˆ‘ä»¬ç§°çš„ &lt;code&gt;æ•°æ®åº“&lt;/code&gt;ï¼Œå¹¶ä¸ä»…æŒ‡ç‰©ç†çš„æ•°æ®é›†åˆï¼Œè€Œæ˜¯ç‰©ç†æ•°æ®ã€å†…å­˜ã€æ“ä½œç³»ç»Ÿè¿›ç¨‹çš„ç»„åˆä½“ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; select name from v$database; 
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;æŸ¥è¯¢å½“å‰æ•°æ®åº“å®ä¾‹å&#34;&gt;æŸ¥è¯¢å½“å‰æ•°æ®åº“å®ä¾‹å&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;å®ä¾‹æ˜¯è®¿é—®Oracleæ•°æ®åº“æ‰€éœ€çš„ä¸€éƒ¨åˆ†è®¡ç®—æœºå†…å­˜å’Œè¾…åŠ©å¤„ç†åå°è¿›ç¨‹ï¼Œæ˜¯ç”±è¿›ç¨‹å’Œè¿™äº›è¿›ç¨‹æ‰€ä½¿ç”¨çš„å†…å­˜(SGA)æ‰€æ„æˆä¸€ä¸ªé›†åˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; select instance_name from v$instance;    
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ•°æ®åº“å®ä¾‹åç”¨äºå¯¹å¤–éƒ¨è¿æ¥ã€‚åœ¨æ“ä½œç³»ç»Ÿä¸­è¦å–å¾—ä¸æ•°æ®åº“çš„è”ç³»ï¼Œå¿…é¡»ä½¿ç”¨æ•°æ®åº“å®ä¾‹åã€‚æ¯”å¦‚æˆ‘ä»¬ä½œå¼€å‘ï¼Œè¦è¿æ¥æ•°æ®åº“ï¼Œå°±å¾—è¿æ¥æ•°æ®åº“å®ä¾‹åï¼Œ&lt;code&gt;orcl&lt;/code&gt; å°±ä¸ºæ•°æ®åº“å®ä¾‹åï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;jdbc:oracle:thin:@localhost:1521:orcl
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸€ä¸ªæ•°æ®åº“å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ï¼Œåœ¨ä½œæ•°æ®åº“æœåŠ¡é›†ç¾¤çš„æ—¶å€™å¯ä»¥ç”¨åˆ°ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç”¨æˆ·ç®¡ç†&#34;&gt;ç”¨æˆ·ç®¡ç†&lt;/h2&gt;

&lt;p&gt;Oracle ä½¿ç”¨ &lt;code&gt;PROFILE&lt;/code&gt; æ–‡ä»¶å¯¹ç”¨æˆ·è®¿é—®èµ„æºçš„æƒé™è¿›è¡Œæ§åˆ¶ã€‚&lt;/p&gt;

&lt;p&gt;è‹¥ä¸åšç‰¹æ®ŠæŒ‡å®šï¼Œåˆ›å»ºç”¨æˆ·æ—¶ç”¨æˆ·é»˜è®¤ä½¿ç”¨çš„ &lt;code&gt;PROFILE&lt;/code&gt; å°±æ˜¯ &lt;code&gt;DEFAULT&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; show user
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æŸ¥çœ‹æ•°æ®åº“ç”¨æˆ·ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; select * from dba_users;  
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;è§£é”ç”¨æˆ·&#34;&gt;è§£é”ç”¨æˆ·&lt;/h4&gt;

&lt;p&gt;é»˜è®¤å½“å¯†ç è¾“é”™ 10 æ¬¡ä¹‹åï¼Œç”¨æˆ·å°±ä¼šè¢«é”å®šï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ORA-28000: the account is locked
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç®¡ç†å‘˜æ¥è§£é”ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sqlplus / as sysdba
SQL&amp;gt; alter user [username] account unlock;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ‰è§£é”è‚¯å®šå°±æœ‰é”å®šï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; alter user [username] account lock;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;å¯†ç é”™è¯¯æ¬¡æ•°&#34;&gt;å¯†ç é”™è¯¯æ¬¡æ•°&lt;/h4&gt;

&lt;p&gt;å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è‡ªå·±ä¿®æ”¹æœ€å¤§å¯†ç é”™è¯¯æ¬¡æ•°ï¼Œæœ€å¤§é”™è¯¯æ¬¡æ•°å­˜å‚¨åœ¨ &lt;code&gt;dba_profiles&lt;/code&gt; è¡¨ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆæ ¹æ® username æŸ¥çœ‹ç”¨æˆ·ä½¿ç”¨çš„ &lt;code&gt;PROFILE&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; SELECT PROFILE FROM DBA_USERS WHERE USERNAME=&#39;[username]&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åæ ¹æ® username ä»¥åŠæŸ¥è¯¢åˆ°çš„ &lt;code&gt;PROFILE&lt;/code&gt; æŸ¥çœ‹è¯¥ç”¨æˆ·çš„æœ€å¤§å¯†ç é”™è¯¯æ¬¡æ•° &lt;code&gt;FAILED_LOGIN_ATTEMPTS&lt;/code&gt; ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; SELECT * FROM DBA_PROFILES WHERE PROFILE=&#39;DEFAULT&#39; AND RESOURCE_NAME=&#39;FAILED_LOGIN_ATTEMPTS&#39;;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å°†é”™è¯¯æ¬¡æ•°ä¿®æ”¹ä¸ºæ— é™æ¬¡ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; ALTER PROFILE DEFAULT LIMIT FAILED_LOGIN_ATTEMPTSUNLIMITED;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;å¯†ç æœ‰æ•ˆæœŸ&#34;&gt;å¯†ç æœ‰æ•ˆæœŸ&lt;/h4&gt;

&lt;p&gt;Oracle 11g é»˜è®¤ç”¨æˆ·æ¯ä¸‰ä¸ªæœˆï¼ˆ180 å¤©ï¼‰å°±è¦ä¿®æ”¹ä¸€æ¬¡å¯†ç ï¼Œå¿«åˆ°å¯†ç è¿‡æœŸæ—¶é—´å°±ä¼šæé†’ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ORA-28002: the password will expire within 7 days
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™é‡ŒåŒæ ·è¦å…ˆæŸ¥æ‰¾åˆ° &lt;code&gt;PROFILE&lt;/code&gt; å†æŸ¥çœ‹ç”¨æˆ·å¯†ç å‰©ä½™è¿‡æœŸæ—¶é—´ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; SELECT * FROM DBA_PROFILES WHERE PROFILE=&#39;DEFAULT&#39; AND RESOURCE_NAME=&#39;PASSWORD_LIFE_TIME&#39;;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¿®æ”¹å¯†ç æœ‰æ•ˆæœŸï¼ˆä¸å—é™ï¼‰ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; ALTER PROFILE DEFAULT LIMIT PASSWORD_LIFE_TIMEUNLIMITED;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è®¾ç½®å¯†ç è¿‡æœŸï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; alter user [username] password expire;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;ä¿®æ”¹å¯†ç &#34;&gt;ä¿®æ”¹å¯†ç &lt;/h4&gt;

&lt;p&gt;ä¿®æ”¹å½“å‰ç™»å½•ç”¨æˆ·å¯†ç ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; password
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¿®æ”¹æŸä¸ªç”¨æˆ·çš„å¯†ç ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; alter user [username] identified by [password];
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;è¡¨ç®¡ç†&#34;&gt;è¡¨ç®¡ç†&lt;/h2&gt;

&lt;p&gt;Oracle çš„è¡¨éƒ½æ˜¯å­˜å‚¨åœ¨è¡¨ç©ºé—´é‡Œé¢çš„ã€‚åˆ›å»ºè¡¨ä¹‹å‰éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªè¡¨ç©ºé—´ã€‚&lt;/p&gt;

&lt;h4 id=&#34;æŸ¥çœ‹ç”¨æˆ·æ‰€æ‹¥æœ‰çš„è¡¨&#34;&gt;æŸ¥çœ‹ç”¨æˆ·æ‰€æ‹¥æœ‰çš„è¡¨&lt;/h4&gt;

&lt;p&gt;æŸ¥çœ‹ç”¨æˆ·æ‰€æ‹¥æœ‰çš„è¡¨ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; SELECT TABLE_NAME FROM USER_TABLES; 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æŸ¥çœ‹ç”¨æˆ·å¯å­˜å–çš„è¡¨ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; SELECT TABLE_NAME FROM ALL_TABLES; 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; SELECT TABLE_NAME FROM DBA_TABLES;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;æŸ¥çœ‹è¡¨ç©ºé—´&#34;&gt;æŸ¥çœ‹è¡¨ç©ºé—´&lt;/h4&gt;

&lt;p&gt;æŸ¥çœ‹è¡¨ç©ºé—´è¯¦ç»†æ•°æ®æ–‡ä»¶ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; SELECT FILE_NAME,TABLESPACE_NAME from DBA_DATA_FILES;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;åˆ›å»ºè¡¨ç©ºé—´&#34;&gt;åˆ›å»ºè¡¨ç©ºé—´&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;create tablespace [è¡¨ç©ºé—´åç§°]
datafile [è¡¨ç©ºé—´æ•°æ®æ–‡ä»¶è·¯å¾„ ]
size [è¡¨ç©ºé—´å¤§å°]
autoextend on;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; create tablespace SoftwareManagement
  2  datafile &#39;/data/oracle/oradata/orcl/SoftwareManagement.dbf&#39;
  3  size 50m
  4  autoextend on;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;åˆ›å»ºæ–°ç”¨æˆ·&#34;&gt;åˆ›å»ºæ–°ç”¨æˆ·&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;CREATE USER [ç”¨æˆ·å]  
IDENTIFIED BY [å¯†ç ]  
DEFAULT TABLESPACE [è¡¨ç©ºé—´] (é»˜è®¤USERS)  
TEMPORARY TABLESPACE [ä¸´æ—¶è¡¨ç©ºé—´] (é»˜è®¤TEMP)  
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; create USER software
  2  identified by 123456
  3  default tablespace Softwaremanagement;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;åˆ†é…æƒé™&#34;&gt;åˆ†é…æƒé™&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt; GRANT CONNECT TO [username];  
SQL&amp;gt; GRANT RESOURCE TO [username];  
SQL&amp;gt; GRANT DBA TO [username];  -- DBAä¸ºæœ€é«˜çº§æƒé™ï¼Œå¯ä»¥åˆ›å»ºæ•°æ®åº“ã€è¡¨ç­‰ã€‚ 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åˆ°è¿™é‡Œï¼Œæ•°æ®åº“ä¸­çš„è¡¨ç©ºé—´ã€ç”¨æˆ·ä»¥åŠç”¨æˆ·æƒé™éƒ½åˆ›å»ºå¹¶åˆ†é…å¥½äº†ï¼Œæ¥ä¸‹æ¥ç”¨æˆ·å°±å¯ä»¥åœ¨è‡ªå·±çš„è¡¨ç©ºé—´ä¸­åˆ›å»ºè¡¨ï¼Œç„¶åè¿›è¡Œå¼€å‘ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æƒé™ç®¡ç†&#34;&gt;æƒé™ç®¡ç†&lt;/h2&gt;

&lt;p&gt;åœ¨ç»™ç”¨æˆ·åˆ†é…æƒé™çš„æ—¶å€™ï¼Œåˆ†é…äº† &lt;code&gt;CONNECT&lt;/code&gt;ã€&lt;code&gt;RESOURCE&lt;/code&gt; æƒé™ç»™ç”¨æˆ·ã€‚è¿™ä¸¤ä¸ªæƒé™åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;

&lt;h4 id=&#34;oracleä¸­çš„æƒé™&#34;&gt;oracleä¸­çš„æƒé™&lt;/h4&gt;

&lt;p&gt;Oracle ä¸­çš„æƒé™åˆ†ä¸ºä¸¤ç±»ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ç³»ç»Ÿæƒé™ï¼šç³»ç»Ÿè§„å®šç”¨æˆ·ä½¿ç”¨æ•°æ®åº“çš„æƒé™ï¼Œç³»ç»Ÿæƒé™æ˜¯å¯¹ç”¨æˆ·è€Œè¨€ã€‚&lt;/li&gt;
&lt;li&gt;å®ä½“æƒé™ï¼šæŸç§æƒé™çš„ç”¨æˆ·å¯¹å…¶ä»–ç”¨æˆ·çš„è¡¨æˆ–è§†å›¾çš„å­˜å–æƒé™ï¼Œæ˜¯é’ˆå¯¹è¡¨æˆ–è€…è§†å›¾è€Œè¨€ã€‚å¦‚ &lt;code&gt;select&lt;/code&gt;ã€&lt;code&gt;update&lt;/code&gt;ã€&lt;code&gt;insert&lt;/code&gt;ã€&lt;code&gt;delete&lt;/code&gt;ã€&lt;code&gt;alter&lt;/code&gt;ã€&lt;code&gt;index&lt;/code&gt;ã€&lt;code&gt;all&lt;/code&gt;ï¼Œå…¶ä¸­ &lt;code&gt;all&lt;/code&gt; åŒ…å«æ‰€æœ‰çš„å®ä½“æƒé™ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;ç³»ç»Ÿæƒé™åˆ†ç±»&#34;&gt;ç³»ç»Ÿæƒé™åˆ†ç±»&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;DBAï¼šæ‹¥æœ‰å…¨éƒ¨ç‰¹æƒï¼Œæ˜¯ç³»ç»Ÿæœ€é«˜æƒé™ï¼Œåªæœ‰DBAæ‰å¯ä»¥åˆ›å»ºæ•°æ®åº“ç»“æ„ã€‚&lt;/li&gt;
&lt;li&gt;RESOURCEï¼šæ‹¥æœ‰resourceæƒé™çš„ç”¨æˆ·åªå¯ä»¥åˆ›å»ºå®ä½“ï¼Œä¸å¯ä»¥åˆ›å»ºæ•°æ®åº“ç»“æ„ã€‚&lt;/li&gt;
&lt;li&gt;CONNECTï¼šæ‹¥æœ‰connectæƒé™çš„ç”¨æˆ·åªå¯ä»¥ç™»å½•oracleï¼Œä¸å¯ä»¥åˆ›å»ºå®ä½“ï¼Œä¸å¯ä»¥åˆ›å»ºæ•°æ®åº“ç»“æ„ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;å»ºè®®ï¼š
å¯¹äºæ™®é€šç”¨æˆ·ï¼Œæˆäºˆ &lt;code&gt;CONNECT&lt;/code&gt;ã€&lt;code&gt;RESOURCE&lt;/code&gt; æƒé™ï¼›
å¯¹äº &lt;code&gt;DBA&lt;/code&gt; ç®¡ç†ç”¨æˆ·ï¼Œæˆäºˆ &lt;code&gt;CONNECT&lt;/code&gt;ã€&lt;code&gt;RESOURCE&lt;/code&gt;ã€&lt;code&gt;DBA&lt;/code&gt; æƒé™ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;å¯¼å…¥å¯¼å‡º&#34;&gt;å¯¼å…¥å¯¼å‡º&lt;/h2&gt;

&lt;p&gt;æ•°æ®åº“çš„å¯¼å…¥å¯¼å‡ºä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„éœ€æ±‚ã€‚&lt;/p&gt;

&lt;h4 id=&#34;å¯¼å‡º&#34;&gt;å¯¼å‡º&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ exp [username]/[password]@[orcl] file=./database.dmp  full=y
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;username&lt;/code&gt; æ˜¯æ•°æ®åº“ç”¨æˆ·å&lt;/li&gt;
&lt;li&gt;&lt;code&gt;password&lt;/code&gt; æ˜¯æ•°æ®åº“ç”¨æˆ·å¯†ç &lt;/li&gt;
&lt;li&gt;&lt;code&gt;orcl&lt;/code&gt; æ˜¯æ•°æ®åº“å®ä¾‹åç§°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;file&lt;/code&gt; åé¢çš„å‚æ•°æ˜¯å¯¼å‡ºçš„æ•°æ®åº“æ–‡ä»¶å­˜æ”¾ä½ç½®åŠæ–‡ä»¶å&lt;/li&gt;
&lt;li&gt;&lt;code&gt;full&lt;/code&gt; å…¶å€¼ä¸º &lt;code&gt;y&lt;/code&gt; è¡¨ç¤ºå…¨éƒ¨å¯¼å‡ºï¼Œé»˜è®¤ä¸º &lt;code&gt;no&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¦‚æœåªéœ€å¯¼å‡ºæŸå‡ å¼ è¡¨ï¼Œå¯ä»¥æŒ‡å®š &lt;code&gt;tables&lt;/code&gt; å‚æ•°ï¼š&lt;code&gt;tables=&#39;(tableName, tableName1)&#39;&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h4 id=&#34;å¯¼å…¥&#34;&gt;å¯¼å…¥&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ imp [username]/[password]@[orcl] file=./database.dmp
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å’Œå¯¼å‡ºæ•°æ®åº“è¯­æ³•ä¸€æ ·ï¼Œåªæ˜¯å…³é”®å­—ä¸ä¸€æ ·ã€‚&lt;/p&gt;

&lt;h4 id=&#34;æ‰§è¡Œ-sql-æ–‡ä»¶&#34;&gt;æ‰§è¡Œ SQL æ–‡ä»¶&lt;/h4&gt;

&lt;p&gt;æ‰§è¡Œ SQL æ–‡ä»¶çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ã€‚å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ SQL PLUS å‘½ä»¤&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sqlplus [username]/password@[orcl] @path/file.name
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ–è€…è¿œç¨‹æ‰§è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sqlplus [username]/password@server_IP/service_name @path/file.name
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚æœsqlè„šæœ¬æ–‡ä»¶æ¯”è¾ƒå¤æ‚ï¼ŒåŒ…å«äº†begin endè¯­å¥ï¼Œå°±ä¼šä¸æ–­æ˜¾ç¤ºè¡Œå·ï¼Œè§£å†³åŠæ³•å°±æ˜¯åœ¨ sql è„šæœ¬çš„æœ€åç”¨ &lt;code&gt;/&lt;/code&gt; ç¬¦å·ç»“å°¾ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;åœ¨ SQL PLUS ä¸­æ‰§è¡Œ&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt;start file_path
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;SQL&amp;gt;@ file_path
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…¶ä¸­ &lt;code&gt;file_path&lt;/code&gt; æ˜¯æ–‡ä»¶è·¯å¾„ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;å‚è€ƒ&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.cnblogs.com/fnng/archive/2012/08/12/2634485.html&#34;&gt;Oracleè¡¨ç©ºé—´ï¼ˆtablespacesï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://zyjustin9.iteye.com/blog/2193804&#34;&gt;Oracleæ•°æ®åº“ï¼Œå®ä¾‹ï¼Œè¡¨ç©ºé—´ï¼Œç”¨æˆ·ï¼Œè¡¨ä¹‹é—´çš„å…³ç³»&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://nvd11.blog.163.com/blog/static/2000183122012111524636835/&#34;&gt;Oracle åœ¨Sqlplus æ‰§è¡Œsqlè„šæœ¬æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Install Shadowsocks Server in VPS</title>
      <link>http://nodejh.com/post/Install-Shadowsocks-Server-in-VPS/</link>
      <pubDate>Fri, 10 Feb 2017 16:52:15 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Install-Shadowsocks-Server-in-VPS/</guid>
      <description>&lt;p&gt;é¦–å…ˆå…³äº Shadowsocks çš„ä½¿ç”¨è¯´æ˜åœ¨è¿™é‡Œï¼š&lt;a href=&#34;https://github.com/shadowsocks/shadowsocks/wiki/Shadowsocks-ä½¿ç”¨è¯´æ˜&#34;&gt;Shadowsocks ä½¿ç”¨è¯´æ˜&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨è¯´æ˜ä¸­æè¿°çš„ä¹Ÿéå¸¸è¯¦ç»†ã€‚æˆ‘ä¸»è¦æ˜¯è®°å½• åœ¨ Vultr çš„ VPS ä¸Šå®‰è£… shadowsocks å®‰è£…ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„é”™è¯¯ï¼Œä»¥åŠé”™è¯¯è§£å†³åŠæ³•ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘çš„ VPS ç³»ç»Ÿç‰ˆæœ¬æ˜¯ Ubuntu 16.10ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ cat /etc/issue
Ubuntu 16.10 \n \l

# æˆ–
$ sudo lsb_release -a
No LSB modules are available.
Distributor ID:	Ubuntu
Description:	Ubuntu 16.10
Release:	16.10
Codename:	yakkety
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é¦–å…ˆå®‰è£… pipï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt-get install python-pip
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åé€šè¿‡ pip å®‰è£… shadowsocksï¼Œç»“æœå°±æŠ¥é”™äº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo pip install shadowsocks
Could not import setuptools which is required to install from a source distribution.
Please install setuptools.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ˜¯å› ä¸ºæ²¡æœ‰å®‰è£… setuptoolsï¼Œæ‰€ä»¥å®‰è£…ä¸€ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo pip install -U setuptools
# ç„¶åå†å®‰è£… shadowsocks
$ sudo pip install shadowsocks
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ›´å…·ä½“çš„å†…å®¹å¯åœ¨ Github Issues æŸ¥çœ‹ï¼š&lt;a href=&#34;https://github.com/pypa/pip/issues/1064&#34;&gt;ImportError: No module named setuptools (add details to docs) &lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥é…ç½® shadowsocksï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo vim /etc/shadowsocks.json
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å†™å…¥ä¸‹é¢çš„é…ç½®ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{
    &amp;quot;server&amp;quot;:&amp;quot;my_server_ip&amp;quot;,
    &amp;quot;server_port&amp;quot;:8388,
    &amp;quot;local_address&amp;quot;: &amp;quot;127.0.0.1&amp;quot;,
    &amp;quot;local_port&amp;quot;:1080,
    &amp;quot;password&amp;quot;:&amp;quot;mypassword&amp;quot;,
    &amp;quot;timeout&amp;quot;:300,
    &amp;quot;method&amp;quot;:&amp;quot;chacha20&amp;quot;,
    &amp;quot;fast_open&amp;quot;: false
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Shadowsocks çš„é…ç½®æ–‡ä»¶æè¿°åœ¨ &lt;a href=&#34;https://github.com/shadowsocks/shadowsocks/wiki/Configuration-via-Config-File&#34;&gt;Configuration via Config File&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘çš„åŠ å¯†ç®—æ³•è®¾ç½®çš„æ˜¯ &lt;code&gt;chacha20&lt;/code&gt;ã€‚ä¹‹å‰ä¸»æµçš„SSæœ‰ä¸¤ç§åŠ å¯†ç®—æ³•ï¼š&lt;code&gt;RC4-MD5&lt;/code&gt; å’Œ &lt;code&gt;aes-256-cfb&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;aes-256-cfb&lt;/code&gt; æ˜¯å„ç§ä¸€é”®åŒ…é»˜è®¤çš„åŠ å¯†æ–¹æ³•ï¼Œä½†æ˜¯ç”±äºè·¯ç”±å™¨å’Œæ‰‹æœºæ€§èƒ½çš„é—®é¢˜ï¼Œè¿™ç§ç®—æ³•è¿˜æ˜¯å¤šå°‘ä¼šå½±å“åˆ°ä¸€äº›é€Ÿåº¦çš„ã€‚&lt;code&gt;RC4-MD5&lt;/code&gt; ä¸»è¦æ˜¯åŠ å¯†å¤ªç®€å•äº†ï¼Œåœ¨ GFW é¢å‰åŠ å¯†ä¸åŠ å¯†å·²ç»æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«&amp;hellip;æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯†ç å¼ºåº¦æ¯” &lt;code&gt;RC4-MD5&lt;/code&gt; é«˜,ä½†æ˜¯é€Ÿåº¦æ¯” &lt;code&gt;aes-256-cfb&lt;/code&gt; å¿«çš„åŠ å¯†ç®—æ³•,é‚£å°±æ˜¯ &lt;code&gt;chacha20&lt;/code&gt; äº†ã€‚å¯ä»¥è¯´æ˜¯ç›®å‰æ€§ä»·æ¯”æ¯”è¾ƒé«˜çš„åŠ å¯†ç®—æ³•ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶ååå°å¯åŠ¨ shadowsocksï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo ssserver -c /etc/shadowsocks.json -d start
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åˆæŠ¥é”™äº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;INFO: loading config from /etc/shadowsocks.json
Traceback (most recent call last):
  File &amp;quot;/usr/local/bin/ssserver&amp;quot;, line 11, in &amp;lt;module&amp;gt;
    load_entry_point(&#39;shadowsocks==2.8.2&#39;, &#39;console_scripts&#39;, &#39;ssserver&#39;)()
  File &amp;quot;/usr/local/lib/python2.7/dist-packages/shadowsocks/server.py&amp;quot;, line 34, in main
    config = shell.get_config(False)
  File &amp;quot;/usr/local/lib/python2.7/dist-packages/shadowsocks/shell.py&amp;quot;, line 262, in get_config
    check_config(config, is_local)
  File &amp;quot;/usr/local/lib/python2.7/dist-packages/shadowsocks/shell.py&amp;quot;, line 124, in check_config
    encrypt.try_cipher(config[&#39;password&#39;], config[&#39;method&#39;])
  File &amp;quot;/usr/local/lib/python2.7/dist-packages/shadowsocks/encrypt.py&amp;quot;, line 44, in try_cipher
    Encryptor(key, method)
  File &amp;quot;/usr/local/lib/python2.7/dist-packages/shadowsocks/encrypt.py&amp;quot;, line 83, in __init__
    random_string(self._method_info[1]))
  File &amp;quot;/usr/local/lib/python2.7/dist-packages/shadowsocks/encrypt.py&amp;quot;, line 109, in get_cipher
    return m[2](method, key, iv, op)
  File &amp;quot;/usr/local/lib/python2.7/dist-packages/shadowsocks/crypto/sodium.py&amp;quot;, line 62, in __init__
    load_libsodium()
  File &amp;quot;/usr/local/lib/python2.7/dist-packages/shadowsocks/crypto/sodium.py&amp;quot;, line 42, in load_libsodium
    raise Exception(&#39;libsodium not found&#39;)
Exception: libsodium not found
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å› ä¸ºæ²¡æœ‰ &lt;code&gt;libsodium&lt;/code&gt;ï¼Œ&lt;code&gt;libsodium&lt;/code&gt; æ˜¯ &lt;code&gt;chacha20&lt;/code&gt; åŠ å¯†ç®—æ³•æ‰€éœ€è¦çš„ä¸€ä¸ªåŒ…ã€‚æ‰€ä»¥æ¥ä¸‹æ¥å°±å®‰è£…å®ƒï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ wget https://download.libsodium.org/libsodium/releases/LATEST.tar.gz
tar zxf LATEST.tar.gz
cd libsodium*
./configure
sudo make &amp;amp;&amp;amp; sudo make install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç¼–è¯‘çš„æ—¶å€™åˆæŠ¥é”™äº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;configure: error: no acceptable C compiler found in $PATH
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ˜¯å› ä¸ºæ²¡æœ‰ C ç¼–è¯‘å™¨ã€‚æ‰€ä»¥ç»§ç»­å®‰è£…ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt-get install build-essential
# å®‰è£…æˆåŠŸä¹‹åå†ç¼–è¯‘
$ sudo make &amp;amp;&amp;amp; sudo make install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åå°†ä¸‹é¢çš„ä»£ç åŠ å…¥åˆ° &lt;code&gt;/etc/ld.so.conf&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;include ld.so.conf.d/*.conf&amp;quot;
/lib
/usr/lib64
/usr/local/lib
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å†é‡æ–°è½½å…¥é…ç½®ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo ldconfig
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹æ¥å†å¯åŠ¨ shadowsocksï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo ssserver -c /etc/shadowsocks.json -d start
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æŸ¥çœ‹ shadowsocks æ—¥å¿—ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ tail -f /var/log/shadowsocks.log
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶ååªéœ€è¦é…ç½®å¥½å®¢æˆ·ç«¯ï¼Œå°±å¯ä»¥æ„‰å¿«åœ°ç•ªèŒ„äº†ã€‚&lt;/p&gt;

&lt;p&gt;æœ€ååˆ†äº«ä¸€ä¸‹æˆ‘çš„ vultr é‚€è¯·é“¾æ¥ï¼Œé€šè¿‡è¯¥é“¾æ¥æ³¨å†Œæ‚¨å°†è·å¾— &lt;code&gt;$20&lt;/code&gt; ï¼š&lt;a href=&#34;http://www.vultr.com/?ref=7104654-3B&#34;&gt;vultr&lt;/a&gt;ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Change Source List in Ubuntu</title>
      <link>http://nodejh.com/post/Change-Source-List-in-Ubuntu/</link>
      <pubDate>Tue, 07 Feb 2017 13:08:16 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Change-Source-List-in-Ubuntu/</guid>
      <description>

&lt;h2 id=&#34;1-è½¯ä»¶ç®¡ç†å·¥å…·-apt-get&#34;&gt;1. è½¯ä»¶ç®¡ç†å·¥å…· apt-get&lt;/h2&gt;

&lt;p&gt;Ubuntu è½¯ä»¶æºæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè½¯ä»¶ä»“åº“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ &lt;code&gt;sudo apt-get install &amp;lt;package-name&amp;gt;&lt;/code&gt; å‘½ä»¤æ¥ä»ä»“åº“ä¸­ä¸‹è½½å®‰è£…è½¯ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;ä¸Šé¢å‘½ä»¤ä¸­æåˆ°çš„ &lt;code&gt;apt-get&lt;/code&gt; åˆ™æ˜¯ Ubuntu ç³»ç»Ÿä¸­çš„ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·ï¼Œå…¶å¸¸ç”¨çš„å‡ ä¸ªå‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å®‰è£…è½¯ä»¶&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt-cache search &amp;lt;package-name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;å¸è½½è½¯ä»¶&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt-get remove &amp;lt;package-name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åªå¸è½½è½¯ä»¶ï¼Œä¸åˆ é™¤é…ç½®æ–‡ä»¶ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å®Œå…¨å¸è½½&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt-get purge &amp;lt;package-name&amp;gt;
# æˆ–
$ sudo apt-get remove &amp;lt;package-name&amp;gt; --purge
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åˆ é™¤åŒ…æ‹¬é…ç½®æ–‡ä»¶åœ¨å†…çš„æ‰€æœ‰æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æœç´¢è½¯ä»¶&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt-cache &amp;lt;package-name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ›´å¤šçš„å…³äº &lt;code&gt;apt-get&lt;/code&gt; çš„ç”¨æ³•å¯ä½¿ç”¨ &lt;code&gt;man apt-get&lt;/code&gt; å‘½ä»¤æŸ¥çœ‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;2-è½¯ä»¶æºçš„åˆ†ç±»&#34;&gt;2. è½¯ä»¶æºçš„åˆ†ç±»&lt;/h2&gt;

&lt;p&gt;Ubuntu è½¯ä»¶æºåˆ†ä¸ºä¸¤ç§ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Ubuntu å®˜æ–¹è½¯ä»¶æº&lt;/li&gt;
&lt;li&gt;PPA è½¯ä»¶æº&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Ubuntu å®˜æ–¹è½¯ä»¶æºä¸­åŒ…å«äº† Ubuntu ç³»ç»Ÿä¸­æ‰€ç”¨åˆ°çš„ç»å¤§éƒ¨åˆ†çš„è½¯ä»¶ï¼Œå®ƒå¯¹åº”çš„æºåˆ—è¡¨æ˜¯ &lt;code&gt;/etc/apt/sources.list&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;PPA è½¯ä»¶æºå³ Personal Package Archivesï¼ˆä¸ªäººè½¯ä»¶åŒ…æ¡£æ¡ˆï¼‰ã€‚æœ‰äº›è½¯ä»¶æ²¡æœ‰è¢«é€‰å…¥ UBuntu å®˜æ–¹è½¯ä»¶ä»“åº“ï¼Œä¸ºäº†æ–¹ä¾¿Ubuntuç”¨æˆ·ä½¿ç”¨ï¼Œ&lt;a href=&#34;https://launchpad.net&#34;&gt;Launchpad&lt;/a&gt; æä¾›äº† PPAï¼Œå…è®¸ç”¨æˆ·å»ºç«‹è‡ªå·±çš„è½¯ä»¶ä»“åº“ï¼Œè‡ªç”±çš„ä¸Šä¼ è½¯ä»¶ã€‚PPAä¹Ÿè¢«ç”¨æ¥å¯¹ä¸€äº›æ‰“ç®—è¿›å…¥Ubuntuå®˜æ–¹ä»“åº“çš„è½¯ä»¶ï¼Œæˆ–è€…æŸäº›è½¯ä»¶çš„æ–°ç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ã€‚&lt;/p&gt;

&lt;p&gt;Launchpad æ˜¯ Ubuntu æ¯å…¬å¸ Canonical æœ‰é™å…¬å¸æ‰€æ¶è®¾çš„ç½‘ç«™ï¼Œæ˜¯ä¸€ä¸ªæä¾›ç»´æŠ¤ã€æ”¯æ´æˆ–è”ç»œ Ubuntu å¼€å‘è€…çš„å¹³å°ã€‚&lt;/p&gt;

&lt;h2 id=&#34;3-ä¿®æ”¹å®˜æ–¹è½¯ä»¶æº&#34;&gt;3. ä¿®æ”¹å®˜æ–¹è½¯ä»¶æº&lt;/h2&gt;

&lt;p&gt;ç”±äºåœ¨å›½å†…ä» Ubuntu å®˜æ–¹æºä¸‹è½½è½¯ä»¶æ¯”è¾ƒæ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸éœ€è¦æ›´æ¢è½¯ä»¶æºæ¥åŠ å¿«ä¸‹è½½é€Ÿåº¦ã€‚äº’è”ç½‘ä¸Šæœ‰å¾ˆå¤šå¼€æºé•œåƒç«™ç‚¹ï¼Œä¸‹é¢åˆ—å‡ºäº†ä¸€äº›ç½‘ç«™ã€‚&lt;/p&gt;

&lt;p&gt;é€‰æ‹©æºåˆ—è¡¨çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆä½¿ç”¨ &lt;code&gt;ping&lt;/code&gt; å‘½ä»¤æµ‹è¯•ä¸€ä¸‹ç½‘ç»œé€Ÿåº¦ï¼Œé€‰æ‹©æœ€å¿«çš„æºã€‚&lt;/p&gt;

&lt;h3 id=&#34;3-1-æºåˆ—è¡¨&#34;&gt;3.1 æºåˆ—è¡¨&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Ubuntu Sources List Generator&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://repogen.simplylinux.ch&#34;&gt;Ubuntu Sources List Generator&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¯ä»¥åœ¨è¯¥ç½‘ç«™ä¸Šæ ¹æ®æ‰€å¤„åœ°åŒºã€Ubuntuå‘è¡Œç‰ˆæœ¬ç­‰æ¡ä»¶è‡ªåŠ¨ç”Ÿæˆ Ubuntu æºã€‚å¦‚æˆ‘çš„ Ubuntu ç‰ˆæœ¬å·æ˜¯ 16.04ï¼Œç”Ÿæˆçš„æºåˆ—è¡¨æ˜¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#------------------------------------------------------------------------------#
#                            OFFICIAL UBUNTU REPOS                             #
#------------------------------------------------------------------------------#


###### Ubuntu Main Repos
deb http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse 
deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse 

###### Ubuntu Update Repos
deb http://cn.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse 
deb http://cn.archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiverse 
deb http://cn.archive.ubuntu.com/ubuntu/ xenial-proposed main restricted universe multiverse 
deb http://cn.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse 
deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse 
deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiverse 
deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-proposed main restricted universe multiverse 
deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é¡ºä¾¿ç»™å‡ºæŸ¥çœ‹ Ubuntu ç‰ˆæœ¬å·çš„å‘½ä»¤ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ lsb_release -a
No LSB modules are available.
Distributor ID:	Ubuntu
Description:	Ubuntu 16.04 LTS
Release:	16.04
Codename:	xenial
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Ubuntu Wiki æºåˆ—è¡¨&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://wiki.ubuntu.org.cn/æºåˆ—è¡¨&#34;&gt;Ubuntu Wiki æºåˆ—è¡¨&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¯¥ç«™ç‚¹æä¾›äº†å¤§é‡çš„å¼€æºé•œåƒï¼Œå¯ä»¥å…ˆæ ¹æ®è‡ªå·±çš„ç‰ˆæœ¬å·ï¼Œç‚¹å‡»ç‰ˆæœ¬å·åé¢çš„ &lt;code&gt;[è¯¦ç»†]&lt;/code&gt; é“¾æ¥è¿›å…¥ &lt;code&gt;æ¨¡æ¿: Ubuntu source&lt;/code&gt; é¡µé¢ï¼Œè¯¥é¡µé¢æä¾›äº†å¾ˆå¤šå¯ç”¨çš„æœåŠ¡å™¨åˆ—è¡¨&lt;/p&gt;

&lt;h3 id=&#34;3-2-ä¿®æ”¹æºåˆ—è¡¨&#34;&gt;3.2 ä¿®æ”¹æºåˆ—è¡¨&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;é¦–å…ˆå¤‡ä»½æºåˆ—è¡¨(for sure)&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo cp /etc/apt/sources.list /etc/apt/sources.list_backup
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;è€Œåç”¨geditæˆ–å…¶ä»–ç¼–è¾‘å™¨æ‰“å¼€&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo gedit /etc/apt/sources.list
# æˆ– vim
$ sudo vim /etc/apt/sources.list
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ä»ä¸Šé¢çš„åˆ—è¡¨ä¸­é€‰æ‹©åˆé€‚çš„æºï¼Œæ›¿æ¢æ‰æ–‡ä»¶ä¸­æ‰€æœ‰çš„å†…å®¹ï¼Œä¿å­˜ç¼–è¾‘å¥½çš„æ–‡ä»¶ã€‚&lt;strong&gt;æ³¨æ„ï¼šä¸€å®šè¦é€‰å¯¹ç‰ˆ&lt;/strong&gt;æœ¬&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ç„¶åï¼Œåˆ·æ–°åˆ—è¡¨&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt-get update
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šä¸€å®šè¦æ‰§è¡Œåˆ·æ–°&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;4-ä¿®æ”¹-ppa-æº&#34;&gt;4. ä¿®æ”¹ PPA æº&lt;/h2&gt;

&lt;p&gt;æ·»åŠ  PPA è½¯ä»¶æºçš„å‘½ä»¤ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo add-apt-repository ppa:user/ppa-name
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åˆ é™¤ PPA è½¯ä»¶æºçš„å‘½ä»¤ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo add-apt-repository --remove ppa:user/ppa-name
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¯”å¦‚ FireFox PPA æºï¼Œ&lt;a href=&#34;https://launchpad.net/~ubuntu-mozilla-daily/+archive/ppa&#34;&gt;https://launchpad.net/~ubuntu-mozilla-daily/+archive/ppa&lt;/a&gt; ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ° &lt;code&gt;ppa:ubuntu-mozilla-daily/ppa&lt;/code&gt; çš„å­—æ ·ï¼Œç„¶åæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŠŠè¿™ä¸ªæºåŠ å…¥åˆ° source list ä¸­ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt-add-repository ppa:ubuntu-mozilla-daily/ppa
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…³äº PPA çš„æºï¼Œå¯ä»¥é€šè¿‡ Google æœç´¢ï¼Œä¹Ÿå¯ä»¥åœ¨ &lt;a href=&#34;https://launchpad.net&#34;&gt;https://launchpad.net&lt;/a&gt; ç½‘ç«™æœç´¢ï¼ˆå¯èƒ½æ•ˆç‡æ¯”è¾ƒä½ï¼‰ã€‚æœ‰çš„è½¯ä»¶å¯èƒ½åœ¨å®˜ç½‘æä¾›äº† PPA æºåç§°ã€‚&lt;/p&gt;

&lt;p&gt;æ·»åŠ å®Œæˆä¹‹åï¼Œå°±ä¼šåœ¨ &lt;code&gt;/etc/apt/sources.list.d/&lt;/code&gt; é‡Œé¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼š&lt;code&gt;ubuntu-mozilla-daily-ubuntu-ppa-xenial.list&lt;/code&gt;ã€‚ç°åœ¨æ¥çœ‹çœ‹é‡Œé¢çš„å†…å®¹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ cat /etc/apt/sources.list.d/ubuntu-mozilla-daily-ubuntu-ppa-xenial.list
deb http://ppa.launchpad.net/ubuntu-mozilla-daily/ppa/ubuntu xenial main
# deb-src http://ppa.launchpad.net/ubuntu-mozilla-daily/ppa/ubuntu xenial main
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥å‘ç°å…¶æºåˆ—è¡¨æ ¼å¼å…¶å®å’Œå®˜æ–¹æºä¸€æ¨¡ä¸€æ ·ã€‚ä¹‹æ‰€ä»¥æŠŠ PPA å’Œå®˜æ–¹æºåŒºåˆ†å¼€æ¥ï¼Œæ˜¯å› ä¸ºç¬¬ä¸‰æ–¹æºå¯èƒ½æ²¡æœ‰åè¶³çš„ä¿éšœã€‚&lt;/p&gt;

&lt;p&gt;æ·»åŠ å®Œæˆä¹‹åï¼Œä¾æ—§éœ€è¦ä½¿ç”¨ &lt;code&gt;sudo apt-get update&lt;/code&gt; æ¥åˆ·æ–°ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Architecture And Code Analysis Of Teaching Evaluation</title>
      <link>http://nodejh.com/post/Architecture-And-Code-Analysis-Of-Teaching-Evaluation/</link>
      <pubDate>Fri, 30 Dec 2016 18:58:19 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Architecture-And-Code-Analysis-Of-Teaching-Evaluation/</guid>
      <description>

&lt;p&gt;å¤§åˆ°ä¸€ä¸ªä¼ä¸šçº§åº”ç”¨ï¼Œå°åˆ°ç±»ä¼¼äºè¯¥ä¸€é”®è¯„æ•™è½¯ä»¶ï¼Œéƒ½æœ‰è‡ªå·±çš„è½¯ä»¶æ¶æ„è®¾è®¡ã€‚é€šå¸¸æ¥è¯´ï¼Œå¯¹äºåŒä¸€ä¸ªéœ€æ±‚ï¼Œå®ç°æ–¹å¼æ˜¯å¤šç§å¤šæ ·çš„ã€‚å¦‚ä½•è®¾è®¡åº”ç”¨é€»è¾‘ï¼Œå¦‚ä½•ç»„ç»‡ä»£ç æ¨¡å—ï¼Œå¦‚ä½•ç¡®å®šç›®å½•ç»“æ„ç­‰ç­‰ï¼Œ éƒ½éœ€è¦åœ¨ç¼–ç ä¹‹å‰è¿›è¡Œè€ƒè™‘ã€‚æ¯ä¸ªäººçš„ç¼–ç é£æ ¼ä¸å°½ç›¸åŒï¼Œå†™å‡ºæ¥çš„ä»£ç ä¹Ÿå„æœ‰åƒç§‹ã€‚è¦æƒ³å¾—å‡ºä¸€ä¸ªæœ€ä½³å®è·µï¼Œå°±è¦ä¸æ–­æ€»ç»“è‡ªå·±çš„è¿‡å¾€ç»éªŒï¼Œå­¦ä¹ åˆ«äººçš„ä¼˜ç§€è®¾è®¡ï¼Œå¹¶å†æ¬¡å°†å…¶è¿ç”¨äºå®è·µæ‰èƒ½çœŸæ­£ç†è§£å…¶ä¸­çš„å¥¥ä¹‰ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡ä¸»è¦å°±æ˜¯ä»‹ç»ä¸€é”®è¯„æ•™ç¨‹åºçš„è½¯ä»¶ç»“æ„è®¾è®¡ï¼Œå¹¶å¯¹ä»£ç è¿›è¡Œç®€è¦åˆ†æï¼ŒåŒæ—¶ä¹Ÿä¼šè®²è¿°ä¸€äº›è‡ªå·±é‡åˆ°çš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;h2 id=&#34;1-ä»€ä¹ˆæ˜¯ä¸€é”®è¯„æ•™&#34;&gt;1. ä»€ä¹ˆæ˜¯ä¸€é”®è¯„æ•™&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;é¦–å…ˆå£°æ˜ï¼Œè¯¥ç¨‹åºçš„æœ¬è´¨ç›®çš„æ˜¯ç”¨äºå­¦ä¹ äº¤æµã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ¯å­¦æœŸè¿›è¡Œæ•™å­¦è¯„ä¼°çš„æ—¶å€™ï¼Œéƒ½è¦è¯„å¾ˆå¤šæ•™å¸ˆï¼Œæ¯ä¸ªæ•™å¸ˆéƒ½æœ‰å¾ˆå¤šé€‰é¡¹ï¼Œå†åŠ ä¸Šæ•™åŠ¡ç³»ç»Ÿç½‘ç«™æ¯”è¾ƒè€æ—§ï¼Œæ“ä½œä¸æ–¹é¢ï¼Œè¯„æ•™æ€»æ˜¯è¦èŠ±å¾ˆé•¿æ—¶é—´ã€‚&lt;/p&gt;

&lt;p&gt;â€œä¸€é”®è¯„æ•™ï¼Œç”¨è¿‡éƒ½è¯´å¥½â€ã€‚çº¿ä¸Šåœ°å€ &lt;a href=&#34;http://pj.fyscu.com&#34;&gt;http://pj.fyscu.com&lt;/a&gt;ï¼Œæºç  &lt;a href=&#34;https://github.com/nodejh/teach_evaluation&#34;&gt;https://github.com/nodejh/teach_evaluation&lt;/a&gt; ã€‚&lt;/p&gt;

&lt;p&gt;çˆ±ç¾ä¹‹å¿ƒäººçš†æœ‰ä¹‹ï¼Œæˆ‘ä¹Ÿå¾ˆå–œæ¬¢å¥½ç”¨åˆå¥½çœ‹çš„äº‹ç‰©ï¼Œæ‰€ä»¥æˆ‘åœ¨å†™ä»£ç çš„æ—¶å€™ä¹Ÿå°½é‡åšåˆ°å¥½çœ‹åˆå¥½ç”¨ã€‚è½¯ä»¶æˆªå›¾å¦‚ä¸‹ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¥½çœ‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2016-12-30-UNADJUSTEDNONRAW_thumb_16c8.jpg&#34; alt=&#34;è¾“å…¥è´¦å·çš„é¡µé¢&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2016-12-30-UNADJUSTEDNONRAW_thumb_16c3.jpg&#34; alt=&#34;è¯„ä¼°ç»“æœé¡µé¢&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;2-åŠŸèƒ½åˆ†æ&#34;&gt;2. åŠŸèƒ½åˆ†æ&lt;/h2&gt;

&lt;p&gt;éœ€æ±‚å¾ˆæ˜ç¡®ï¼Œå°±æ˜¯èƒ½å¤Ÿåœ¨ä¸€ä¸ªç½‘é¡µä¸Šå®ç°ç‚¹å‡»æŒ‰é’®è‡ªåŠ¨è¯„ä¼°æ‰€æœ‰æ•™å¸ˆã€‚é‚£ä¹ˆè¦å®ç°è¿™æ ·çš„éœ€æ±‚ï¼Œè¯¥æ€ä¹ˆå»åšå‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;å…ˆæ¥æƒ³æƒ³æˆ‘ä»¬é€šå¸¸æ‰‹åŠ¨è¯„æ•™çš„æ­¥éª¤ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ç™»å½•è¿›å…¥æ•™åŠ¡ç³»ç»Ÿç½‘ç«™&lt;/li&gt;
&lt;li&gt;æ‰¾åˆ°æ•™å­¦è¯„ä¼°é“¾æ¥å¹¶è¿›å…¥ï¼Œè¿™ä¸ªæ—¶å€™å°±èƒ½çœ‹åˆ°æ‰€æœ‰éœ€è¦è¿›è¡Œè¯„ä¼°çš„æ•™å¸ˆåˆ—è¡¨&lt;/li&gt;
&lt;li&gt;ä»æ•™å¸ˆåˆ—è¡¨ä¸­ç‚¹å‡»æŸä¸ªæ•™å¸ˆï¼Œè¿›å…¥åˆ°è¯¥æ•™å¸ˆçš„æ•™å­¦è¯„ä¼°é¡µé¢&lt;/li&gt;
&lt;li&gt;å¡«å†™å„ç§éœ€è¦å¡«å†™çš„è¡¨å•&lt;/li&gt;
&lt;li&gt;å¡«å†™å®Œæ¯•ä¹‹åï¼Œç‚¹å‡»æäº¤æŒ‰é’®è¿›è¡Œè¯„æ•™&lt;/li&gt;
&lt;li&gt;ä¸€åˆ‡æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œåˆ™å¯¹è¯¥æ•™å¸ˆè¯„æ•™æˆåŠŸ&lt;/li&gt;
&lt;li&gt;ç„¶åè¿”å›åˆ°æ•™å¸ˆåˆ—è¡¨é¡µé¢ï¼Œé€‰æ‹©ä¸‹ä¸€ä¸ªéœ€è¦è¯„ä¼°çš„æ•™å¸ˆ&lt;/li&gt;
&lt;li&gt;é‡å¤ &lt;code&gt;3-7&lt;/code&gt; è¿™äº”ä¸ªæ­¥éª¤ï¼Œç›´åˆ°æ‰€æœ‰æ•™å¸ˆè¯„ä¼°å®Œæ¯•&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è¦ç”¨ç¨‹åºå®ç°ä¸€é”®è¯„æ•™ï¼Œå…¶å®å°±æ˜¯ç”¨ç¨‹åºæ¨¡æ‹Ÿä¸Šé¢çš„æ­¥éª¤ã€‚æ‰€ä»¥ç¨‹åºè¦å®ç°çš„ä¸»è¦åŠŸèƒ½æœ‰ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ¨¡æ‹Ÿç™»å½•ï¼Œè·å– cookie&lt;/li&gt;
&lt;li&gt;è·å–éœ€è¦è¯„ä¼°çš„æ•™å¸ˆåˆ—è¡¨&lt;/li&gt;
&lt;li&gt;å¯¹åˆ—è¡¨ä¸­çš„æ¯ä¸ªæ•™å¸ˆè¿›è¡Œè¯„æ•™&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç„¶åæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç”¨æˆ·ç•Œé¢æ¥è®©ç”¨æˆ·è¿›è¡Œæ“ä½œã€‚è¿™ä¸ªç•Œé¢å¯ä»¥æ˜¯ APPï¼Œä¹Ÿå¯ä»¥æ˜¯ç½‘é¡µã€‚ç”±äºç½‘é¡µæ›´æ–¹ä¾¿æ›´åˆ©äºä¼ æ’­ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©äº†ç½‘é¡µã€‚æ‰€ä»¥æˆ‘ä»¬å°±è¿˜éœ€è¦ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œç”¨æ¥æä¾›é™æ€é¡µé¢èµ„æºï¼Œå¹¶ä¸”æ¥æ”¶å¹¶å“åº”ç”¨æˆ·æ“ä½œåå‘é€çš„ HTTP è¯·æ±‚ã€‚&lt;/p&gt;

&lt;h2 id=&#34;3-è½¯ä»¶è®¾è®¡&#34;&gt;3. è½¯ä»¶è®¾è®¡&lt;/h2&gt;

&lt;p&gt;è½¯ä»¶è®¾è®¡ä¸»è¦ä»ä¸‰ä¸ªæ–¹é¢æ¥è¯´æ˜ã€‚ä¸€æ˜¯æŠ€æœ¯é€‰æ‹©ï¼ŒäºŒæ˜¯è½¯ä»¶æ¶æ„ï¼Œä¸‰æ˜¯ç›®å½•ç»“æ„ã€‚&lt;/p&gt;

&lt;h3 id=&#34;3-1-æŠ€æœ¯é€‰æ‹©&#34;&gt;3.1 æŠ€æœ¯é€‰æ‹©&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆæ˜¯å„ç§æŠ€æœ¯çš„é€‰æ‹©ï¼ŒåŒ…æ‹¬å‰åç«¯ç¼–ç¨‹è¯­è¨€ï¼ˆè¯­æ³•ï¼‰ã€ç¬¬ä¸‰æ–¹æ¨¡å—çš„é€‰æ‹©ã€å’ŒæœåŠ¡å™¨éƒ¨ç½²ã€‚&lt;/p&gt;

&lt;h4 id=&#34;3-1-1-åç«¯è¯­è¨€&#34;&gt;3.1.1 åç«¯è¯­è¨€&lt;/h4&gt;

&lt;p&gt;è¯¥ç¨‹åºåç«¯ä½¿ç”¨çš„æ˜¯ Node.jsã€‚æˆ‘çš„ Node.js ç‰ˆæœ¬æ˜¯ 7.3ã€‚å¤§é‡ä½¿ç”¨äº† ES6 çš„è¯­æ³•ï¼Œæ¯”å¦‚ Promiseã€æ¨¡æ¿å­—ç¬¦ä¸²ã€ç®­å¤´å‡½æ•°ã€‚åªè¦ä½ çš„ Node.js ç‰ˆæœ¬ &amp;gt;= 6.0 åº”è¯¥éƒ½æ˜¯å¯ä»¥è¿è¡Œçš„ã€‚&lt;/p&gt;

&lt;h4 id=&#34;3-1-2-ç¬¬ä¸‰æ–¹æ¨¡å—&#34;&gt;3.1.2 ç¬¬ä¸‰æ–¹æ¨¡å—&lt;/h4&gt;

&lt;p&gt;åœ¨å¼€å‘ç¨‹åºä¹‹å‰ï¼Œæˆ‘æƒ³è¦å°½é‡è®©åº”ç”¨çš„ä½“ç§¯è¶³å¤Ÿå°ï¼Œæ‰€ä»¥æˆ‘å°½é‡ä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—ã€‚&lt;/p&gt;

&lt;p&gt;æœ€ç»ˆæˆ‘åªä½¿ç”¨äº† &lt;code&gt;cheerio&lt;/code&gt; å’Œ &lt;code&gt;icon-lite&lt;/code&gt; è¿™ä¸¤ä¸ªç¬¬ä¸‰æ–¹åŒ…ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cheerio&lt;/code&gt; ä¸»è¦ç”¨æ¥åˆ†ææŠ“å–åˆ°çš„ HTML æ–‡æ¡£ã€‚å…¶å®æœ€å¼€å§‹ä¹Ÿæƒ³ä¸ç”¨ &lt;code&gt;cheerio&lt;/code&gt;ï¼Œç›´æ¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åˆ†æé¡µé¢çš„ï¼Œä½†æ­£åˆ™è¡¨è¾¾å¼ç¼–å†™éº»çƒ¦ï¼Œæˆ‘çš„èƒ½åŠ›ä¹Ÿæœ‰é™ï¼Œæ‰€ä»¥æœ€ç»ˆé€‰æ‹©äº†ä½¿ç”¨ &lt;code&gt;cheerio&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;icon-lite&lt;/code&gt; åˆ™æ˜¯ç”¨æ¥å¯¹ &lt;code&gt;GBK&lt;/code&gt; æ–‡æœ¬è¿›è¡Œè§£ç ã€‚å› ä¸ºæ•™åŠ¡ç³»ç»Ÿç½‘ç«™ä½¿ç”¨çš„æ˜¯ GBK çš„ç¼–ç ï¼Œæ‰€ä»¥ç›´æ¥æŠ“å–çš„ç»“æœæ˜¯ä¹±ç çš„ã€‚é™¤äº† &lt;code&gt;icon-lite&lt;/code&gt; è¿™ä¸ªåŒ…ï¼Œæˆ‘æ‰¾ä¸åˆ°å…¶ä»–çš„å¯ä»¥è§£å†³ä¹±ç é—®é¢˜çš„æ–¹æ¡ˆäº†ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;3-1-3-ç¼–ç è§„èŒƒ&#34;&gt;3.1.3 ç¼–ç è§„èŒƒ&lt;/h4&gt;

&lt;p&gt;ç„¶åä½¿ç”¨äº† ESLint æ¥è§„èŒƒä»£ç ã€‚ä¸»è¦æ˜¯ç”¨çš„æ˜¯ airbnb çš„ Eslint è§„åˆ™ï¼Œå¹¶ä¸”æ ¹æ®è‡ªå·±çš„å–œå¥½å¯¹ &lt;code&gt;.eslintrc&lt;/code&gt; ä½œäº†é…ç½®ã€‚å…·ä½“é…ç½®åœ¨æºç  &lt;a href=&#34;https://github.com/nodejh/teaching_evaluation/blob/master/.eslintrc&#34;&gt;.eslintrc&lt;/a&gt; ä¸­å¯ä»¥çœ‹åˆ°ã€‚&lt;/p&gt;

&lt;h4 id=&#34;3-1-4-å‰ç«¯æŠ€æœ¯&#34;&gt;3.1.4 å‰ç«¯æŠ€æœ¯&lt;/h4&gt;

&lt;p&gt;ä¸ºäº†å‡å°ä»£ç ä½“ç§¯ï¼Œæé«˜åŠ è½½é€Ÿåº¦ï¼ŒèŠ‚çœå¸¦å®½ï¼Œå‰ç«¯æ²¡æœ‰ä½¿ç”¨ä»»ä½•ç¬¬ä¸‰æ–¹ JS åº“ã€‚å¹¶ä¸”è¿™åªæ˜¯ä¸€ä¸ªå°åº”ç”¨ï¼Œæœ‰æ²¡æœ‰å¿…é¡»ä½¿ç”¨åºå¤§ï¼ˆç›¸æ¯”è¯¥ç¨‹åºè€Œè¨€æ˜¾å¾—åºå¤§ï¼‰çš„ç¬¬ä¸‰æ–¹åº“ã€‚&lt;/p&gt;

&lt;p&gt;å‰ç«¯ä½¿ç”¨çš„æ˜¯ ES5 çš„è¯­æ³•ã€‚æœ€å¼€å§‹æƒ³ç”¨ ES6 æ¥å†™çš„ï¼Œä½† ES6 å†™å¥½çš„ä»£ç è¿˜éœ€è¦ç¼–è¯‘æˆ ES5 æ‰èƒ½åœ¨æµè§ˆå™¨è¿è¡Œï¼Œå¹¶ä¸”è¿˜éœ€è¦å¼•å…¥å„ç§ polyfillï¼Œæœ€ç»ˆè¿˜æ˜¯å†³å®šä½¿ç”¨ ES5ã€‚&lt;/p&gt;

&lt;p&gt;å‰ç«¯å”¯ä¸€ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹èµ„æºçš„ï¼Œåªæœ‰ä¸¤ä¸ªå­—ä½“å›¾æ ‡äº†ã€‚ä¸€ä¸ªæ˜¯ &lt;code&gt;heart&lt;/code&gt; çš„å›¾æ ‡ â¤ï¸ï¼Œæ¯•ç«Ÿæ˜¯ç”¨å¿ƒå†™çš„ä»£ç ï¼Œ&lt;code&gt;Made with â¤ï¸ by nodejh&lt;/code&gt;ï¼›è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯â€œå…³é—­â€å°å›¾æ ‡ã€‚å›¾æ ‡ä½¿ç”¨çš„æ˜¯ &lt;a href=&#34;https://icomoon.io/&#34;&gt;IcoMoon&lt;/a&gt; çš„å­—ä½“å›¾æ ‡åº“ï¼Œå¯ä»¥è‡ªå·±åœ¨é‡Œé¢æ‰¾åˆ°éœ€è¦çš„å›¾æ ‡ç„¶åä¸‹è½½ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;è¯¥ç¨‹åºåªæœ‰ &lt;code&gt;index.html&lt;/code&gt; è¿™ä¸€ä¸ª HTML æ–‡ä»¶ï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªå•é¡µåº”ç”¨ã€‚æ‰€æœ‰çš„æ“ä½œå’Œäº¤äº’éƒ½åœ¨è¿™ä¸€ä¸ªé¡µé¢å®Œæˆã€‚&lt;/p&gt;

&lt;h4 id=&#34;3-1-5-å‰ç«¯ä»£ç å‹ç¼©&#34;&gt;3.1.5 å‰ç«¯ä»£ç å‹ç¼©&lt;/h4&gt;

&lt;p&gt;ä¸ºäº†è¿›ä¸€æ­¥å‹ç¼©å‰ç«¯èµ„æºæ–‡ä»¶çš„ä½“ç§¯ï¼Œæ‰€ä»¥å¯¹é™æ€èµ„æºè¿›è¡Œäº†å‹ç¼©ã€‚&lt;/p&gt;

&lt;p&gt;å‹ç¼© CSS ä½¿ç”¨çš„æ˜¯åœ¨çº¿å‹ç¼©å·¥å…· &lt;a href=&#34;http://csscompressor.com/&#34;&gt;CSS Compressor&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å‹ç¼© JS ä½¿ç”¨çš„æ˜¯ &lt;a href=&#34;https://github.com/mishoo/UglifyJS2&#34;&gt;UglifyJS2&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h4 id=&#34;3-1-6-éƒ¨ç½²&#34;&gt;3.1.6 éƒ¨ç½²&lt;/h4&gt;

&lt;p&gt;å®Œæˆç¼–ç åï¼Œä»£ç æ˜¯éƒ¨ç½²åœ¨ Ubuntu 16.04 ä¸Šçš„ï¼Œç„¶åä½¿ç”¨äº† &lt;a href=&#34;https://github.com/Unitech/pm2&#34;&gt;pm2&lt;/a&gt; è¿›è¡Œè¿›ç¨‹çš„ç®¡ç†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;3-2-è½¯ä»¶æ¶æ„&#34;&gt;3.2 è½¯ä»¶æ¶æ„&lt;/h3&gt;

&lt;p&gt;ç¨‹åºçš„æ•´ä½“æ¶æ„ä¸»è¦åˆ†ä¸ºä¸‰å±‚ï¼Œå¯ä»¥å°±å°†å…¶ç†è§£ä¸º MVC çš„ä¸‰ä¸ªå±‚æ¬¡ã€‚&lt;/p&gt;

&lt;p&gt;MVC æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œè®¾è®¡æ¨¡å¼ä¸æ˜¯ä¸€å±‚ä¸å˜çš„ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®è‡ªå·±çš„å®é™…ä¸šåŠ¡çµæ´»è¿ç”¨ã€‚MVC æ˜¯ä¸€ä¸ªå¾ˆç»å…¸çš„è®¾è®¡æ¨¡å¼ï¼Œç”Ÿæ´»ä¸­çš„å¾ˆå¤šäº‹ç‰©ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ® MVC å¯¹å…¶è¿›è¡Œå®šä¹‰ã€‚å°±æ‹¿äººæ¥è¿›è¡Œç±»æ¯”ï¼Œå¤§è„‘å°±æ˜¯ Cï¼ˆControllerï¼‰ï¼Œæ§åˆ¶ç€äººçš„ä¸€åˆ‡æ´»åŠ¨ã€‚èº¯ä½“å¤–è¡¨å°±æ˜¯ Vï¼ˆViewï¼‰ å±‚ï¼Œä¸€æ–¹é¢æ˜¯è¡¨ç°ç€ä¸€ä¸ªäººçš„å¤–è§‚ï¼Œå¦ä¸€æ–¹é¢æ˜¯äººçš„å„ç§æ´»åŠ¨çš„å¤–åœ¨è¡¨ç°ã€‚ä½“å†…å„ç§å™¨å®˜æ¯”å¦‚å¿ƒè„ã€è‚ºç­‰å°±ç›¸å½“äº Mï¼ˆModelï¼‰ï¼Œä»è¡¨é¢å¯èƒ½å¹¶ä¸èƒ½ç›´è§‚çœ‹åˆ° M å±‚çš„ä½œç”¨ï¼Œä½†å®ƒå—å¤§è„‘æ§åˆ¶ï¼Œè¿›è¡Œç€è¡€æ¶²å¾ªç¯å‘¼å¸ç³»ç»Ÿç­‰é‡è¦åŠŸèƒ½ï¼Œè€Œè¿™äº›å™¨å®˜å¯èƒ½åˆè·Ÿèº¯ä½“ç›¸äº’ä½œç”¨ï¼Œæ¯”å¦‚å½±å“äººçš„ç²¾ç¥é¢è²Œæˆ–é«˜çŸ®èƒ–ç˜¦ã€‚&lt;/p&gt;

&lt;p&gt;è¯´æ­£ç»çš„ã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆæ˜¯è¯¥ä¸€é”®è¯„æ•™ç¨‹åºçš„ M å±‚ï¼ŒåŒ…æ‹¬é¡µé¢æŠ“å–ã€é¡µé¢åˆ†æå’Œè¯„æ•™ç­‰åŠŸèƒ½æ¨¡å—ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åæ˜¯ V å±‚ï¼Œä¸»è¦æ˜¯å‰ç«¯é¡µé¢ï¼Œç›´æ¥ç»™ç”¨æˆ·ä½¿ç”¨ï¼Œä¸ç”¨æˆ·äº¤äº’çš„ç•Œé¢ã€‚æ¯”å¦‚ç”¨æˆ·ç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®çš„æ—¶å€™ï¼Œå°±å‘ C å±‚å‘é€ä¸€ä¸ª HTTP è¯·æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;C æ˜¯æ§åˆ¶ä¸­å¿ƒï¼Œæ¥æ”¶ V å±‚çš„ HTTP è¯·æ±‚ï¼Œæ ¹æ® HTTP è¯·æ±‚å†³å®šè°ƒç”¨å“ªäº› M å±‚çš„æ¨¡å—ï¼Œç„¶åå°†æ¨¡å—è°ƒç”¨åçš„å¤„ç†ç»“æœè¿”å›ç»™ Vã€‚&lt;/p&gt;

&lt;p&gt;è¿™æ ·ä¸€ä¸ªäº‹ä»¶çš„å¤„ç†æµç¨‹å¯èƒ½å°±æ˜¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;V(HTTP è¯·æ±‚)---&amp;gt; C (è°ƒç”¨ M çš„å¯¹åº”æ¨¡å—)---&amp;gt; M(è¿”å›å¤„ç†ç»“æœ) ---&amp;gt; C(HTTP å“åº”) ---&amp;gt; V
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;3-3-ç›®å½•ç»“æ„&#34;&gt;3.3 ç›®å½•ç»“æ„&lt;/h3&gt;

&lt;p&gt;äº†è§£äº†è½¯ä»¶çš„æ•´ä½“æ¶æ„ä¹‹åï¼Œå°±æ¥çœ‹çœ‹ä»£ç çš„ç›®å½•ç»“æ„ï¼Œä»£ç çš„ç›®å½•ç»“æ„ä¹Ÿå®Œç¾åœ°å°è¯äº†è¿™ä¸‰å±‚æ¶æ„ã€‚&lt;/p&gt;

&lt;p&gt;ä»£ç çš„ä¸»è¦ç›®å½•ï¼å­ç›®å½•åŠå…¶åŠŸèƒ½å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;|____app.js  # å…¥å£æ–‡ä»¶
|____controller  # C å±‚ç›®å½•ï¼Œå®šä¹‰äº†å„ç§æ§åˆ¶å™¨
| |____evaluate.js  # è¯„æ•™çš„æ§åˆ¶å™¨
| |____evaluationList.js  # è·å–éœ€è¦è¯„æ•™åˆ—è¡¨çš„æ§åˆ¶å™¨
| |____staticServer.js  # é™æ€æœåŠ¡å™¨æ§åˆ¶å™¨
|____helper  # ä¸€äº›è‡ªå®šä¹‰çš„åŠŸèƒ½æ¨¡å—
| |____colors.js  # åå…­è¿›åˆ¶é¢œè‰²ä»£ç ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ”¹å˜ console.log çš„é¢œè‰²
| |____dateformat.js  # æ—¶é—´æ ¼å¼åŒ–
| |____getContentType.js  # è·å–æ–‡ä»¶åç¼€åå¯¹åº”çš„ Content-Typeï¼Œç”¨äºé™æ€æœåŠ¡å™¨
| |____log.js  # è‡ªå®šä¹‰çš„å½©è‰² console.log() è¾“å‡ºï¼Œå‘Šåˆ«æ»¡å±é»‘ç™½æ—¥å¿—
| |____request.js  # HTTP è¯·æ±‚çš„å°è£…
|____models  # M å±‚ç›®å½•ï¼Œå®šä¹‰äº†å„ç§æ¨¡å—åŠå®ç°
| |____evaluate.js  # è¯„æ•™åŠŸèƒ½æ¨¡å—
| |____getEvaluationList.js  # è·å–éœ€è¦è¯„æ•™çš„æ•™å¸ˆåˆ—è¡¨
| |____loginZhjw.js  # æ¨¡æ‹Ÿç™»å½•æ•™åŠ¡ç³»ç»Ÿ
| |____showEvaluatePage.js  # æ˜¾ç¤ºæŸä¸ªå…·ä½“çš„è¯„æ•™é¡µé¢
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;çœ‹å®Œç›®å½•ç»“æ„ï¼Œå†å›å¤´çœ‹çœ‹è½¯ä»¶çš„ä¸‰å±‚æ¶æ„ï¼Œè‚¯å®šå°±æ¸…æ™°å¾ˆå¤šäº†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;4-ä»£ç åˆ†æ&#34;&gt;4. ä»£ç åˆ†æ&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹æ¥å†å¯¹ä¸€äº›é‡è¦çš„åŠŸèƒ½æ¨¡å—ä»¥åŠæ¶‰åŠåˆ°çš„ä»£ç è¿›è¡Œç®€è¦åˆ†æã€‚ç›¸ä¿¡äº†è§£å®Œä»£ç çš„æ‰§è¡Œæµç¨‹ä¹‹åï¼Œå¯¹è½¯ä»¶çš„æ•´ä½“æ¶æ„ç†è§£ï¼Œå®šä¼šå†è¿›ä¸€æ­¥ã€‚&lt;/p&gt;

&lt;h3 id=&#34;4-1-app-js&#34;&gt;4.1 app.js&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;app.js&lt;/code&gt; æ˜¯æ•´ä¸ªé¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™ä½¿ç”¨ &lt;code&gt;node app.js&lt;/code&gt; å³å¯å¯åŠ¨ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ app.js é‡Œé¢ï¼Œä¸»è¦æ˜¯åˆ›å»ºäº† HTTP Serverï¼Œç„¶åæ ¹æ®è¯·æ±‚çš„è·¯å¾„ï¼Œè°ƒç”¨å¯¹åº”çš„æ§åˆ¶å™¨ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;if (method === &#39;POST&#39; &amp;amp;&amp;amp; pathname === &#39;/api/evaluationList&#39;) {
    // æ¨¡æ‹Ÿç™»å½•ï¼Œè·å–éœ€è¦è¯„æ•™çš„è€å¸ˆåˆ—è¡¨
    return evaluationListController(req, res);
  }

  if (method === &#39;POST&#39; &amp;amp;&amp;amp; pathname === &#39;/api/evaluate&#39;) {
    // è¯„æ•™
    return evaluateController(req, res);
  }

  if (method === &#39;GET&#39;) {
    // æ‰€æœ‰ GET è¯·æ±‚éƒ½å½“ä½œæ˜¯è¯·æ±‚é™æ€èµ„æº
    return staticServerController(req, res);
  }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å½“è¯·æ±‚æ–¹æ³•æ˜¯ &lt;code&gt;POST&lt;/code&gt; ä¸”è·¯å¾„æ˜¯ &lt;code&gt;/api/evaluationList&lt;/code&gt; æ—¶ï¼Œå°±è¯´æ˜å‰ç«¯æ˜¯å‘é€çš„ä¸€ä¸ªè·å–éœ€è¦è¯„ä¼°çš„æ•™å¸ˆåˆ—è¡¨çš„è¯·æ±‚ï¼Œæ‰€ä»¥ç´§æ¥ç€æ‰§è¡Œ &lt;code&gt;evaluationListController(req, res);&lt;/code&gt;ï¼Œè°ƒç”¨è¯¥æ§åˆ¶å™¨ï¼Œå¹¶ä¸”ä½¿ç”¨ &lt;code&gt;return&lt;/code&gt; æ¥åœæ­¢ä»£ç çš„æ‰§è¡Œã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæœ‰æ–°çš„ API çš„è¯·æ±‚ï¼Œéƒ½å¯ä»¥åœ¨è¿™é‡ŒåŠ ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæ‰€æœ‰çš„è‡ªå®šä¹‰çš„è¯·æ±‚åŠè·¯å¾„éƒ½ä¸æ»¡è¶³ï¼Œå¹¶ä¸”è¯·æ±‚çš„æ–¹æ³•æ˜¯ &lt;code&gt;GET&lt;/code&gt;ï¼Œé‚£å°±å½“ä½œæ˜¯è¯·æ±‚é™æ€èµ„æºæ–‡ä»¶ï¼Œå¦‚ HTMLã€CSSã€JS æˆ–å›¾ç‰‡ç­‰ã€‚è¿™é‡Œå°±è°ƒç”¨ &lt;code&gt;staticServerController(req, res)&lt;/code&gt;ã€‚&lt;code&gt;staticServerController&lt;/code&gt; æ˜¯åœ¨ Controller é‡Œé¢å®šä¹‰çš„è¿”å›é™æ€æ–‡ä»¶çš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœ &lt;code&gt;GET&lt;/code&gt; è¯·æ±‚ä¹Ÿä¸æ˜¯ï¼Œåˆ™è¿”å› &lt;code&gt;400 Bad Request&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åç¨‹åºç›‘å¬äº† &lt;code&gt;5000&lt;/code&gt; ç«¯å£ï¼Œè¿™æ ·å‘é€è¯·æ±‚åˆ° &lt;code&gt;5000&lt;/code&gt; ç«¯å£ï¼Œä»£ç å°±èƒ½æ¥æ”¶åˆ°è¯·æ±‚å¹¶è¿›è¡Œå¤„ç†äº†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;4-2-é™æ€èµ„æºæœåŠ¡å™¨&#34;&gt;4.2 é™æ€èµ„æºæœåŠ¡å™¨&lt;/h3&gt;

&lt;p&gt;å‰é¢å·²ç»æåˆ°äº†ï¼Œ&lt;code&gt;staticServerController&lt;/code&gt; æ˜¯åœ¨ Controller é‡Œé¢å®šä¹‰çš„è¿”å›é™æ€æ–‡ä»¶çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªé™æ€èµ„æºæœåŠ¡å™¨ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºæˆ‘ä»¬çš„è½¯ä»¶å¾ˆç®€å•ï¼Œæ‰€ä»¥å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨ express æˆ– koa ç­‰æ¡†æ¶ï¼Œè‡ªå·±å†™ä¸€ä¸ªç®€å•çš„é™æ€æœåŠ¡å™¨å®Œå…¨è¶³å¤Ÿåº”å¯¹æ‰€æœ‰ä¸šåŠ¡éœ€æ±‚äº†ã€‚&lt;/p&gt;

&lt;p&gt;ä¸»è¦ä»£ç å¦‚ä¸‹ï¼Œä»£ç ä¼˜ç¾ï¼Œæ³¨é‡Šè¯¦å°½ï¼Œé€šä¿—æ˜“æ‡‚ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/**
 * é™æ€æœåŠ¡å™¨
 * @param  {object} req request
 * @param  {object} res response
 * @return {null}   null
 */
const staticServerController = (req, res) =&amp;gt; {
  let pathname = url.parse(req.url).pathname;
  if (path.extname(pathname) === &#39;&#39;) {
    // æ²¡æœ‰æ‰©å±•åï¼Œåˆ™æŒ‡å®šè®¿é—®ç›®å½•
    pathname += &#39;/&#39;;
  }

  if (pathname.charAt(pathname.length - 1) === &#39;/&#39;) {
    // å¦‚æœè®¿é—®çš„æ˜¯ç›®å½•ï¼Œåˆ™æ·»åŠ é»˜è®¤æ–‡ä»¶ index.html
    pathname += &#39;index.html&#39;;
  }
  // æ‹¼æ¥å®é™…æ–‡ä»¶è·¯å¾„
  const filepath = path.join(__dirname, &#39;./../public&#39;, pathname);
  fs.access(filepath, fs.F_OK, (error) =&amp;gt; {
    if (error) {
      res.writeHead(404);
      res.end(&#39;&amp;lt;h1&amp;gt;404 Not Found&amp;lt;/h1&amp;gt;&#39;);
      return false;
    }
    const contentType = getContentType(filepath);
    res.writeHead(200, { &#39;Content-Type&#39;: contentType });
    // è¯»å–æ–‡ä»¶æµå¹¶ä½¿ç”¨ç®¡é“å°†æ–‡ä»¶æµä¼ è¾“åˆ°HTTPæµè¿”å›ç»™é¡µé¢
    fs.createReadStream(filepath)
      .pipe(res);
  });
};

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™é‡Œéœ€è¦ç¨å¾®ç•™æ„çš„æ˜¯ &lt;code&gt;getContentType&lt;/code&gt; è¿™ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„å®šä¹‰å’Œå®ç°è¢«æ”¾åœ¨äº† &lt;code&gt;helper/getContentType.js&lt;/code&gt; é‡Œé¢ï¼Œå…¶ä¸»è¦ä½œç”¨ï¼Œå°±æ˜¯æ ¹æ®è¯·æ±‚è·¯å¾„çš„åç¼€åæ¥ç¡®å®š HTTP Response é‡Œé¢çš„ &lt;code&gt;Content-Type&lt;/code&gt; ç±»å‹ï¼Œä»¥ä¾¿æµè§ˆå™¨æˆ–å®¢æˆ·ç«¯è¯†åˆ«ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/**
 * è·å– Content-Type
 * @param  {string} filepath æ–‡ä»¶è·¯å¾„
 * @return {string}          æ–‡ä»¶å¯¹åº”çš„ Conent-Type
 */
const getContentType = (filepath) =&amp;gt; {
  let contentType = &#39;&#39;;
  const ext = path.extname(filepath);
  switch (ext) {
    case &#39;.html&#39;:
      contentType = &#39;text/html&#39;;
      break;
    case &#39;.js&#39;:
      contentType = &#39;text/javascript&#39;;
      break;
    case &#39;.css&#39;:
      contentType = &#39;text/css&#39;;
      break;
    case &#39;.gif&#39;:
      contentType = &#39;image/gif&#39;;
      break;
    case &#39;.jpg&#39;:
      contentType = &#39;image/jpeg&#39;;
      break;
    case &#39;.png&#39;:
      contentType = &#39;image/png&#39;;
      break;
    case &#39;.ico&#39;:
      contentType = &#39;image/icon&#39;;
      break;
    case &#39;.manifest&#39;:
      contentType = &#39;text/cache-manifest&#39;;
      break;
    default:
      contentType = &#39;application/octet-stream&#39;;
  }
  return contentType;
};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·æˆ‘ä»¬çš„ä¸€ä¸ªç®€å•çš„é™æ€èµ„æºæ–‡ä»¶æœåŠ¡å™¨å°±æˆå‹äº†ï¼Œå•ç‹¬æŠŠè¿™ä¸¤æ®µä»£ç æ‹¿å‡ºå»ä¹Ÿæ˜¯å®Œå…¨å¯ä»¥è¿è¡Œçš„ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç”¨æˆ·è¯·æ±‚ &lt;code&gt;localhost:5000&lt;/code&gt; çš„æ—¶å€™ï¼Œæ ¹æ®ä¸Šé¢çš„ä»£ç ï¼Œå°±ä¼šå»å¯»æ‰¾ &lt;code&gt;public/index.html&lt;/code&gt; è¿™ä¸ªæ–‡ä»¶ç„¶åè¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;index.html&lt;/code&gt; å°±æ˜¯æˆ‘ä»¬çš„å‰ç«¯é¡µé¢ã€‚&lt;/p&gt;

&lt;h3 id=&#34;4-3-æ¨¡æ‹Ÿç™»å½•&#34;&gt;4.3 æ¨¡æ‹Ÿç™»å½•&lt;/h3&gt;

&lt;p&gt;è¦æƒ³è·å–è¯„æ•™åˆ—è¡¨æˆ–è¿›è¡Œè¯„æ•™ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯ç™»å½•æ•™åŠ¡ç³»ç»Ÿã€‚ç»æŠ“åŒ…åˆ†æï¼Œæ•™åŠ¡ç³»ç»Ÿä½¿ç”¨çš„æ˜¯ &lt;code&gt;session&lt;/code&gt; &lt;code&gt;cookie&lt;/code&gt; çš„è®¤è¯æœºåˆ¶ï¼Œå…³äºå¦‚ä½•æŠ“åŒ…åˆ†æï¼Œå¯ä»¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ã€Šæ¨¡æ‹Ÿç™»å½•æŸæŸå¤§å­¦å›¾ä¹¦é¦†ç³»ç»Ÿã€‹[&lt;a href=&#34;http://nodejh.com/post/Crawler-for-SCU-Libirary/]ã€‚è¿™ä¸€æ­¥æˆ‘ä»¬éœ€è¦è·å–ç™»å½•åçš„&#34;&gt;http://nodejh.com/post/Crawler-for-SCU-Libirary/]ã€‚è¿™ä¸€æ­¥æˆ‘ä»¬éœ€è¦è·å–ç™»å½•åçš„&lt;/a&gt; &lt;code&gt;cookie&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ç™»å½•çš„æ—¶å€™ï¼Œæ˜¯å‘ &lt;code&gt;http://202.115.47.141/loginAction.do&lt;/code&gt; å‘é€çš„ POST è¯·æ±‚ï¼Œè¯·æ±‚çš„ &lt;code&gt;Content-Type&lt;/code&gt; æ˜¯ &lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt; ï¼Œå‚æ•°æ˜¯ &lt;code&gt;zjh=xx&amp;amp;mm=xx&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ›¾ç»æ•™åŠ¡ç³»ç»Ÿå¯ä»¥ä½¿ç”¨ GET æ–¹å¼ç™»å½•ï¼Œæ‰€æœ‰æœ‰ä¸€ç§å¿«æ·ç™»å½•æ–¹å¼ï¼Œå°±æ˜¯åœ¨æµè§ˆå™¨åœ°å€æ  &lt;code&gt;http://202.115.47.141/loginAction.do?zjh=[ä½ çš„å­¦å·]&amp;amp;&amp;amp;mm=[ä½ çš„å¯†ç ]&lt;/code&gt;ã€‚è€Œä¸”è¿™ç§æ–¹æ³•å¯ä»¥ç»•è¿‡â€œç™»å½•äººæ•°å·²æ»¡â€çš„é™åˆ¶ã€‚è¿™åœ¨é€‰è¯¾æ—¶æœŸï¼Œè¿™ç§å¼ºåˆ¶çš„ç™»å½•æ–¹å¼è¿˜æ˜¯å¾ˆå¥½ç”¨çš„ã€‚ä¸è¿‡ GET æ–¹æ³•ä¹Ÿæœ‰ç¼ºç‚¹å°±æ˜¯ï¼Œä½ çš„å­¦å·å’Œå¯†ç å°±ç›´æ¥æš´éœ²äº†ï¼Œä¸å®‰å…¨ã€‚æ›¾ç»è¿˜é€šè¿‡ Google æœç´¢ï¼Œæœåˆ°äº†æŸä¸ªåŒå­¦çš„è´¦å·åŠå¯†ç ã€‚ç°åœ¨æ•™åŠ¡ç³»ç»Ÿä¼°è®¡æ˜¯å‡çº§äº†ç¦æ­¢äº†è¿™ä¸ªæ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;æ¨¡æ‹Ÿç™»å½•æ•™åŠ¡ç³»ç»Ÿçš„ç¨‹åºåœ¨ &lt;code&gt;models/loginZhjw.js&lt;/code&gt; é‡Œé¢ï¼Œè¯¦ç»†ä»£ç å°±ä¸è´´äº†ï¼Œæ€»çš„æ¥è¯´ï¼Œå°±æ˜¯é€šè¿‡ Node.js çš„ HTTP æ¨¡å—ï¼Œè®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰çš„ HTTP Headers ä¿¡æ¯ï¼Œç„¶åå‘é€ HTTP è¯·æ±‚ã€‚å½“ç„¶ï¼Œå…¶ä»–ä»»ä½•ç¼–ç¨‹è¯­è¨€é“ç†éƒ½ä¸€æ ·ã€‚&lt;/p&gt;

&lt;p&gt;æ¨¡æ‹Ÿç™»å½•åï¼Œæ•™åŠ¡ç³»ç»Ÿä¼šè¿”å› HTTP Responseã€‚HTTP Response çš„ &lt;code&gt;Content-Type&lt;/code&gt; éƒ½æ˜¯ &lt;code&gt;text/html&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯è¯´è¿”å›çš„å§‹ç»ˆéƒ½æ˜¯ HTML æ–‡æœ¬ã€‚æ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥æ ¹è¿”å›çš„ HTML æ–‡æœ¬çš„å†…å®¹åˆ¤æ–­æ˜¯å¦ç™»å½•æˆåŠŸã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæ–‡æœ¬åŒ…å«ä¸‹é¢ &lt;code&gt;errorText&lt;/code&gt; å¯¹è±¡çš„å±æ€§å­—ç¬¦ä¸²ä¹‹ä¸€ï¼Œéƒ½æ˜¯ç™»å½•å¤±è´¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt; const errorText = {
        number: &#39;ä½ è¾“å…¥çš„è¯ä»¶å·ä¸å­˜åœ¨ï¼Œè¯·æ‚¨é‡æ–°è¾“å…¥ï¼&#39;,
        password: &#39;æ‚¨çš„å¯†ç ä¸æ­£ç¡®ï¼Œè¯·æ‚¨é‡æ–°è¾“å…¥ï¼&#39;,
        database: &#39;æ•°æ®åº“å¿™è¯·ç¨å€™å†è¯•&#39;,
        notLogin: &#39;è¯·æ‚¨ç™»å½•åå†ä½¿ç”¨&#39;,
      };
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åŒæ—¶ï¼Œä¹Ÿç»è¿‡æŠ“åŒ…å‘ç°ï¼Œç™»å½•æˆåŠŸåè¿”å›çš„ HTML æ–‡æœ¬çš„ &lt;code&gt;title&lt;/code&gt; éƒ¨åˆ†æ˜¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;title&amp;gt;å­¦åˆ†åˆ¶ç»¼åˆæ•™åŠ¡&amp;lt;/title&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è€Œå…¶ä»–æƒ…å†µéƒ½ä¸æ˜¯ã€‚æ‰€ä»¥å°±å¯ä»¥å¤§è‡´åˆ¤æ–­ï¼Œé™¤äº†ä¸Šé¢å‡ ç§ &lt;code&gt;errorText&lt;/code&gt; æ˜¯ç™»å½•å¤±è´¥ä¹‹å‰ï¼Œåªæœ‰è¿”å›çš„ HTML åŒ…å« &lt;code&gt;&amp;lt;title&amp;gt;å­¦åˆ†åˆ¶ç»¼åˆæ•™åŠ¡&amp;lt;/title&amp;gt;&lt;/code&gt; æ‰æ˜¯è¿”å›æˆåŠŸã€‚&lt;/p&gt;

&lt;p&gt;ç™»å½•æˆåŠŸåçš„ HTTP Response Headers éƒ¨åˆ†å«æœ‰ä¸€ä¸ª &lt;code&gt;set-cookie&lt;/code&gt; å±æ€§ï¼Œè€Œè¿™ä¸ªå±æ€§çš„å€¼å°±æ˜¯ç™»å½•æˆåŠŸåçš„ cookieã€‚æˆ‘ä»¬æŠ“é‚£ä¹ˆå¤šåŒ…ï¼Œåšäº†é‚£ä¹ˆå¤šå‡†å¤‡ï¼Œæ‰¾çš„å°±æ˜¯å®ƒã€‚æ‰€ä»¥æœ€ç»ˆä»ç™»å½•æˆåŠŸçš„å“åº”ä¸­å–å‡º cookie çš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;const cookie = result.headers[&#39;set-cookie&#39;].join().split(&#39;;&#39;)[0];
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¹‹åè·å–éœ€è¦è¯„ä¼°çš„æ•™å¸ˆåˆ—è¡¨å’Œè¯„æ•™ï¼Œéƒ½éœ€è¦åœ¨å‘é€ HTTP è¯·æ±‚æ—¶åœ¨ HTTP Headers é‡Œé¢å¸¦ä¸Šè¯¥ cookieã€‚&lt;/p&gt;

&lt;h3 id=&#34;4-3-è·å–éœ€è¦è¯„ä¼°çš„æ•™å¸ˆåˆ—è¡¨&#34;&gt;4.3 è·å–éœ€è¦è¯„ä¼°çš„æ•™å¸ˆåˆ—è¡¨&lt;/h3&gt;

&lt;p&gt;è·å–éœ€è¦è¯„ä¼°çš„æ•™å¸ˆåˆ—è¡¨å°±ç®€å•å¾ˆå¤šäº†ï¼Œå‘é€çš„æ˜¯ GET è¯·æ±‚ï¼Œç„¶ååœ¨ HTTP Headers é‡Œé¢è®¾ç½® Cookie å³å¯ï¼Œå…¶å¤´å‘é€ HTTP è¯·æ±‚çš„å¤´ä¿¡æ¯å¤§æ¦‚å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;const options = {
    hostname: &#39;202.115.47.141&#39;,
    port: 80,
    path: &#39;/jxpgXsAction.do?oper=wjShow&#39;,
    method: &#39;POST&#39;,
    headers: {
      Cookie: data.cookie,
      &#39;Content-Type&#39;: &#39;application/x-www-form-urlencoded&#39;,
      &#39;Content-Length&#39;: Buffer.byteLength(postData),
    },
  };
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;4-4-è¿›è¡Œè¯„æ•™&#34;&gt;4.4 è¿›è¡Œè¯„æ•™&lt;/h3&gt;

&lt;p&gt;è·å–åˆ°æ•™å¸ˆåˆ—è¡¨ä¹‹åï¼Œå°±å¯ä»¥è¿›è¡Œè¯„æ•™äº†ã€‚ä½†è¿™é‡Œæœ‰ä¸€ä¸ªå‘ï¼Œå°±æ˜¯è¿›è¡Œè¯„æ•™ä¹‹å‰ï¼Œå¿…é¡»å…ˆè®¿é—®è¯„æ•™é¡µé¢ï¼Œå†å‘é€è¯„æ•™è¯·æ±‚ã€‚ä¸ç„¶æ˜¯æ— æ³•è¯„æ•™æˆåŠŸçš„ã€‚å°±æ˜¯è¿™ä¸ªé—®é¢˜ï¼Œå¯¼è‡´æˆ‘çº ç»“äº†å¥½ä¹…ã€‚&lt;/p&gt;

&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨ç¨‹åºæ¨¡æ‹Ÿè¯„æ•™çš„æ—¶å€™ï¼Œå°±è¦å‘é€ä¸¤ä¸ª HTTP è¯·æ±‚äº†ï¼Œä¸€æ˜¯å‘é€è¯·æ±‚åˆ°æŸä¸ªè€å¸ˆçš„è¯„æ•™é¡µé¢ï¼Œå¯¹åº”çš„æ˜¯ &lt;code&gt;models/showEvaluatePage.js&lt;/code&gt; è¿™ä¸ªæ–‡ä»¶ï¼›äºŒæ˜¯å‘é€è¯„æ•™è¯·æ±‚ï¼Œå¯¹åº”çš„æ˜¯ &lt;code&gt;models/evaluate.js&lt;/code&gt;ã€‚è€Œä¸”è¿™ä¸¤ä¸ªè¯·æ±‚éƒ½æ˜¯ POST ç±»å‹çš„ã€‚æ‰€ä»¥ä»£ç ç±»é€»è¾‘ä¼¼äºä¸‹é¢è¿™æ ·ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// æ˜¾ç¤ºè¯„æ•™é¡µé¢
showEvalutePage(data)
    .then(() =&amp;gt; {
    // è¯„æ•™
    return evaluate(data)
    })
    .then((result) =&amp;gt; {
    // è¯„æ•™ç»“æœ
    })
        .catch((exception) =&amp;gt; {
            // æ•è·å¼‚å¸¸
        });
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;4-5-public-js-style-js&#34;&gt;4.5 public/js/style.js&lt;/h3&gt;

&lt;p&gt;å‰ç«¯çš„ JS ä»£ç éƒ½åœ¨ &lt;code&gt;style.js&lt;/code&gt; è¿™ä¸ªæ–‡ä»¶é‡Œé¢äº†ï¼Œä¸»è¦å°±æ˜¯ç›‘å¬äº†æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ï¼Œç„¶åå‘é€ HTTP è¯·æ±‚ï¼Œå¹¶æ ¹æ®è¯·æ±‚ç»“æœå¢åˆ é¡µé¢çš„ DOMã€‚&lt;/p&gt;

&lt;p&gt;å‰ç«¯ç”±äºæ²¡æœ‰ä½¿ç”¨ jQuery ç­‰ç¬¬ä¸‰æ–¹åº“ï¼Œæ‰€ä»¥æ“ä½œ DOM å’Œäº‹ä»¶ç›‘å¬éƒ½æ˜¯åŸç”Ÿ JS å®ç°çš„ã€‚å‘é€ AJAX è¯·æ±‚ä¹Ÿæ˜¯è‡ªå·±å°è£…çš„ XHR å¯¹è±¡ã€‚æœ‰å…³äº XHR çš„æ›´å¤šå†…å®¹ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å†™çš„ &lt;a href=&#34;http://nodejh.com/post/ajax-xhr-jquery-and-fetch-api/&#34;&gt;ã€ŠAJAX: XHR, jQuery and Fetch APIã€‹&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;5-æ€»ç»“&#34;&gt;5. æ€»ç»“&lt;/h2&gt;

&lt;p&gt;åˆ°è¿™é‡Œï¼Œè¿™ç¯‡æ–‡ç« å°±åŸºæœ¬å®Œæˆäº†ã€‚æœ¬æ–‡è®²è¿°çš„å®è·µï¼Œå¯èƒ½ä¹Ÿä¸æ˜¯æœ€ä½³çš„å®è·µï¼Œä¹Ÿæœ‰å¾ˆå¤šå€¼å¾—ç»§ç»­å•†è®¨å’Œæ”¹è¿›ä¹‹å¤„ã€‚åªæœ‰ä¸æ–­å®è·µï¼Œä¸æ–­æ€»ç»“ï¼Œæ‰èƒ½å†™å‡ºæ›´ç¾çš„ä»£ç ã€‚äººç”Ÿä¸ä¹Ÿä¸€æ ·ï¼Ÿæ€»ç»“è¿‡å»çš„æ•™è®­ï¼Œæ‰èƒ½æ›´å¥½åœ°å‰è¡Œã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>macOS Sierra Apache Multiple PHP versions</title>
      <link>http://nodejh.com/post/macOS-Sierra-Apache-Multiple-PHP-versions/</link>
      <pubDate>Thu, 29 Dec 2016 00:04:41 +0800</pubDate>
      
      <guid>http://nodejh.com/post/macOS-Sierra-Apache-Multiple-PHP-versions/</guid>
      <description>

&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦å†…å®¹ç¿»è¯‘è‡ª&lt;a href=&#34;https://getgrav.org/blog/macos-sierra-apache-multiple-php-versions&#34;&gt;ã€ŠmacOS 10.12 Sierra Apache Setup: Multiple PHP Versionsã€‹&lt;/a&gt;ï¼Œå¹¶åŠ å…¥äº†è‡ªå·±çš„å®è·µã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;å‰è¨€ï¼šæ¯æ¬¡æ­å»ºå¼€å‘ç¯å¢ƒçœŸçš„æ˜¯ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œä½†éšç€æ—¶é—´çš„æ¨ç§»å’Œç³»ç»Ÿç¯å¢ƒçš„å·®å¼‚ï¼Œç½‘ä¸Šçš„æ•™ç¨‹è‡ªå·±æ›¾ç»å®‰è£…çš„ç»éªŒç»å¸¸ä¸åˆæ—¶å®œï¼Œæ€»ä¼šå‡ºç°ä¸€äº›è¿™æ ·æˆ–é‚£æ ·çš„é—®é¢˜ã€‚é€šè¿‡å‡ ç•ªæœå¯»ï¼Œæˆ‘ç»ˆäºæ‰¾åˆ°ä¸€ç¯‡å®Œå–„çš„æ•™ç¨‹ï¼Œå°†å…¶ç¿»è¯‘æˆäº†ä¸­æ–‡ã€‚æˆ‘ä¹Ÿä¼šæŒç»­æ›´æ–°è¿™ç¯‡æ–‡ç« ï¼Œä¸æ–­å®Œå–„å¹¶è®°å½•é‡åˆ°çš„æˆ–æ–°æˆ–æ—§çš„é—®é¢˜ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥ç»ˆç»“åœ¨ macOS ä¸Šå®‰è£… PHP å¼€å‘ç¯å¢ƒçš„è¯é¢˜ã€‚&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;å…³äºå¦‚ä½•åœ¨ macOS 10.12 ä¸Šæ­å»º Web å¼€å‘ç¯å¢ƒï¼ŒåŸä½œè€…ä¸€å…±å†™äº†ä¸‰ç¯‡æ–‡ç« ã€‚è¿™æ˜¯ç¬¬ä¸€ç¯‡ã€‚&lt;/p&gt;

&lt;p&gt;å½“å‰çš„æ“ä½œç³»ç»Ÿæ˜¯ macOS 10.12ï¼Œè¿™ç¯‡æ•™ç¨‹è®²è¿°çš„ç¯å¢ƒæ­å»ºå’Œä¸€èˆ¬ PHP å®‰è£…æœ€å¤§çš„ä¸åŒæ˜¯ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ Apacheï¼ˆmacOS è‡ªå¸¦äº† apacheã€pythonã€ruby ç­‰ä¸€äº›åˆ—å¼€å‘å·¥å…·ï¼‰ï¼Œè€Œæ˜¯ä½¿ç”¨ Homebrew çš„ Apacheã€‚å½“ç„¶ï¼Œç³»ç»Ÿè‡ªå¸¦çš„ Apaceh ä¹Ÿæ˜¯å¯ä»¥å·¥ä½œçš„ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ macOs ä¸Šè¿›è¡Œ Web å¼€å‘ï¼Œç¡®å®æ˜¯ä¸€ä»¶å¾ˆä»¤äººæ„‰å¿«çš„äº‹æƒ…ã€‚ç›®å‰ä¹Ÿæœ‰å¾ˆå¤šé›†æˆå¼€å‘å·¥å…·å¯ä»¥æ–¹ä¾¿åœ°æ­å»ºå¼€å‘ç¯å¢ƒï¼Œæ¯”å¦‚ &lt;a href=&#34;http://www.mamp.info/en/mamp-pro/&#34;&gt;MAMP PRO&lt;/a&gt;ï¼Œå®ƒå…·æœ‰éå¸¸æ¼‚äº®çš„ä¸€ä¸ª UI ç•Œé¢ï¼Œå¹¶ä¸”é›†æˆäº† Apacheã€PHP å’Œ MySQL ä¸‰ä¸ªè½¯ä»¶ï¼Œéå¸¸é€‚åˆæ–°æ‰‹ä½¿ç”¨ã€‚ä½†æ˜¯æœ‰æ—¶å€™ï¼Œç”±äºå…¶é…ç½®æ¨¡æ¿æœ‰é™ï¼Œè½¯ä»¶æ²¡æœ‰åŠæ—¶å‡çº§ï¼Œä½¿ç”¨å®ƒçš„æ—¶å€™å¯èƒ½ä¼šé‡åˆ°è½¯ä»¶ç‰ˆæœ¬ä¸èƒ½åŠæ—¶æ›´æ–°ã€é…ç½®ä¸å¤Ÿæ–¹ä¾¿çµæ´»ç­‰é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;äºæ˜¯å¾ˆå¤šäººå°±å¼€å§‹å¯»æ‰¾æ›¿ä»£æ–¹æ¡ˆã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆã€‚å¹¶ä¸”æ–‡ç« ç»™å‡ºäº†ç®€å•ç›´æ¥çš„å®‰è£…é…ç½®æ­¥éª¤ã€‚&lt;/p&gt;

&lt;h2 id=&#34;1-å®‰è£…-homebrew&#34;&gt;1. å®‰è£… Homebrew&lt;/h2&gt;

&lt;p&gt;ä»¥ä¸‹æ‰€æœ‰è½¯ä»¶çš„å®‰è£…éƒ½ä¾èµ–äº macOS ä¸Šçš„ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…· Homebrewã€‚ä½¿ç”¨ &lt;code&gt;brew&lt;/code&gt; å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°åœ¨ mac ä¸Šå®‰è£…å„ç§åŠŸèƒ½å„å¼‚çš„è½¯ä»¶ï¼Œå½“ç„¶ï¼Œé¦–å…ˆçš„å®‰è£… homebrewã€‚å®‰è£…æ­¥éª¤ä¹Ÿéå¸¸ç®€å•ï¼Œæ‰“å¼€ç»ˆç«¯ç„¶åè¾“å…¥ä¸‹é¢çš„ä»£ç ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ruby -e &amp;quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åç­‰å¾…ç»ˆç«¯æç¤ºä½ è¾“å…¥å¯†ç ï¼Œç¨‹åºå°±ä¼šå¼€å§‹è‡ªåŠ¨å®‰è£…ã€‚å¦‚æœä½ æ²¡æœ‰å®‰è£… &lt;code&gt;XCode Command Line Tools&lt;/code&gt;ï¼Œå®ƒä¼šè‡ªåŠ¨å¸®ä½ è£…ä¸Šã€‚ç­‰å¾…å‡ åˆ†é’Ÿï¼Œå¾…å®Œæˆåï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ Homebrew æ˜¯å¦æ­£ç¡®å®‰è£…ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ brew --version
Homebrew 1.1.5
Homebrew/homebrew-core (git revision a50a6; last commit 2016-12-28)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åŒæ—¶å¯èƒ½ä½ ä¹Ÿéœ€è¦æ‰§è¡Œä¸€ä¸‹ä¸‹é¢çš„å‘½ä»¤ï¼Œæ¥æ£€æµ‹é…ç½®æ˜¯å¦æ­£ç¡®ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ brew doctor
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è‹¥æœ‰é…ç½®ä¸å½“çš„åœ°æ–¹ï¼Œbrew ä¼šç»™å‡ºæç¤ºï¼Œå®‰è£…æç¤ºä¿®å¤å³å¯ã€‚&lt;/p&gt;

&lt;h3 id=&#34;1-1-æ·»åŠ ç¬¬ä¸‰æ–¹ä»“åº“&#34;&gt;1.1 æ·»åŠ ç¬¬ä¸‰æ–¹ä»“åº“&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬å°†éœ€è¦ä½¿ç”¨ä¸€äº›æ¥è‡ªç¬¬ä¸‰æ–¹ä»“åº“çš„è½¯ä»¶ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ é¢å¤–çš„ä»“åº“ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ brew tap homebrew/dupes
$ brew tap homebrew/versions
$ brew tap homebrew/php
$ brew tap homebrew/apache
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åæ›´æ–° brewï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ brew update
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹æ¥å°±å¯ä»¥å°½æƒ…ä½¿ç”¨ brew äº†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;2-apache-çš„å®‰è£…&#34;&gt;2. Apache çš„å®‰è£…&lt;/h2&gt;

&lt;p&gt;æœ€æ–°çš„ macOS 10.12 é¢„è£…äº† Apache 2.4ï¼Œä½†è‹¹æœç§»é™¤äº†ä¸€äº›å¿…è¦çš„è„šæœ¬ï¼Œæ‰€ä»¥ Apache å’Œ Homebrew é…åˆä½¿ç”¨å°†ä¼šå˜å¾—å›°éš¾ã€‚å½“ç„¶è§£å†³è¯¥é—®é¢˜çš„æ–¹æ³•å°±æ˜¯ï¼Œä½¿ç”¨ Homebrew é‡æ–°å®‰è£…é…ç½® Apacheï¼Œå¹¶ä½¿å…¶è¿è¡Œåœ¨æ ‡å‡†ç«¯å£ä¸Šï¼ˆ80/443ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä¹‹å‰å·²ç»å®‰è£…æœ‰ Apache å¹¶ä¸”åœ¨è¿è¡Œä¸­ï¼Œé¦–å…ˆå°±éœ€è¦å…³é—­å®ƒï¼Œç„¶åç§»é™¤è‡ªåŠ¨åŠ è½½è„šæœ¬ã€‚ä¸‹é¢çš„å‘½ä»¤æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ï¼Œåªç®¡è¿è¡Œå°±å¥½äº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apachectl stop
$ sudo launchctl unload -w /System/Library/LaunchDaemons/org.apache.httpd.plist 2&amp;gt;/dev/null
$ brew install httpd24 --with-privileged-ports --with-http2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹æ¥éœ€è¦ç­‰å¾…ä¸€å°ä¼šå„¿ï¼Œå› ä¸ºè¿™ä¸ªå‘½ä»¤æ˜¯ä¸‹è½½æºç å¹¶ç¼–è¯‘å®‰è£… Apacheã€‚ä¸Šé¢å‘½ä»¤æ‰§è¡Œç»“æœå¦‚ä¸‹é¢è¿™æ ·ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ğŸº  /usr/local/Cellar/httpd24/2.4.23_2: 212 files, 4.4M, built in 1 minute 45 seconds
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™é‡Œçš„è·¯å¾„å¾ˆé‡è¦ï¼Œå› ä¸ºåœ¨æ¥ä¸‹æ¥çš„æ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ä½¿ç”¨è¿™ä¸ªè·¯å¾„ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè·¯å¾„æ˜¯ &lt;code&gt;/usr/local/Cellar/httpd24/2.4.23_2/&lt;/code&gt;ï¼Œå¦‚æœä½ çš„è·¯å¾„ä¸æ˜¯è¿™ä¸ªï¼Œåˆ™åœ¨è¿è¡Œä¸‹é¢çš„å‘½ä»¤çš„æ—¶å€™ï¼Œå°†å…¶æ›¿æ¢ä¸ºä½ çš„è·¯å¾„å°±å¯ä»¥äº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo cp -v /usr/local/Cellar/httpd24/2.4.23_2/homebrew.mxcl.httpd24.plist /Library/LaunchDaemons
sudo chown -v root:wheel /Library/LaunchDaemons/homebrew.mxcl.httpd24.plist
sudo chmod -v 644 /Library/LaunchDaemons/homebrew.mxcl.httpd24.plist
sudo launchctl load /Library/LaunchDaemons/homebrew.mxcl.httpd24.plist
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç°åœ¨æˆ‘ä»¬å°±é€šè¿‡ Homebrew å®‰è£…ä¸Šäº† Apacheï¼Œå¹¶ä½¿ç”¨ç®¡ç†å‘˜æƒé™å°†å…¶é…ç½®ä¸ºè‡ªåŠ¨å¯åŠ¨ã€‚è¿™ä¸ªæ—¶å€™ Apache åº”è¯¥å·²ç»åœ¨è¿è¡Œäº†ï¼Œæ‰€ä»¥ä½ æ‰“å¼€æµè§ˆå™¨è®¿é—® &lt;code&gt;localhost&lt;/code&gt; å°†ä¼šçœ‹åˆ° â€œIt worksï¼â€ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2016-12-28-macOS-Sierra-Apache-Multiple-PHP-versions-php-information-page-it-works.png&#34; alt=&#34;macOS-Sierra-Apache-Multiple-PHP-versions-php-information-page-it-works&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;2-1-ä¸€äº›å°é—®é¢˜&#34;&gt;2.1 ä¸€äº›å°é—®é¢˜&lt;/h3&gt;

&lt;p&gt;å¦‚æœä½ çš„æµè§ˆå™¨æç¤ºè¯´ä¸èƒ½å»ºç«‹è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œé‚£ä¹ˆé¦–å…ˆæ£€æŸ¥ä¸€ä¸‹ Apache æœåŠ¡æ˜¯å¦å·²ç»å¯åŠ¨äº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ps -aef | grep httpd
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚æœ Apache æ­£åœ¨è¿è¡Œï¼Œä½ å°†ä¼šçœ‹åˆ°ä¸€äº› httpd è¿›ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;é‡å¯ Apacheï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apachectl -k restart
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›‘æ§ Apache çš„é”™è¯¯æ—¥å¿—ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ tail -f /usr/local/var/log/apache2/error_log
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚æœä¸Šé¢è¿™äº›æ­¥éª¤éƒ½æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œé‚£ä¹ˆç¡®å®šä½ çš„ Apache æ˜¯å¦ç›‘å¬äº† &lt;code&gt;80&lt;/code&gt; ç«¯å£ï¼Œå³ &lt;code&gt;/usr/local/etc/apache2/2.4/httpd.conf&lt;/code&gt; é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰ &lt;code&gt;Listen: 80&lt;/code&gt;ï¼Œæˆ–è€… &lt;code&gt;Listen:&lt;/code&gt; åé¢æ˜¯å…¶ä»–ç«¯å£ã€‚&lt;/p&gt;

&lt;p&gt;Apache æ˜¯é€šè¿‡ &lt;code&gt;apachectl&lt;/code&gt; æ¥è¿›è¡Œæ§åˆ¶çš„ï¼Œå®ƒçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apachectl start
$ sudo apachectl stop
$ sudo apachectl -k restart
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;-k&lt;/code&gt; å‚æ•°å°†å¼ºåˆ¶é‡å¯ Apacheï¼Œä¸ç®¡ Apache æ˜¯å¦å‡†å¤‡å¥½ã€‚&lt;/p&gt;

&lt;p&gt;æœ€ç»ˆæˆ‘å°†æˆ‘çš„ Apache çš„ç«¯å£ä¿®æ”¹ä¸ºäº† &lt;code&gt;7070&lt;/code&gt;ï¼Œä¸»è¦æ˜¯å› ä¸º &lt;code&gt;80&lt;/code&gt; ç«¯å£æ˜¯ HTTP æœåŠ¡çš„é»˜è®¤ç«¯å£ï¼Œ&lt;code&gt;8080&lt;/code&gt; ç«¯å£æ˜¯ Tomcat çš„é»˜è®¤ç«¯å£ï¼Œä¸ºäº†é¿å…ä¸å…¶ä»–è½¯ä»¶å¦‚ nginx ç­‰å‘ç”Ÿæ½œåœ¨ç«¯å£å†²çªé—®é¢˜ï¼Œæ‰€ä»¥æ”¹ä¸ºäº† &lt;code&gt;7070&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&#34;2-2-apache-çš„é…ç½®&#34;&gt;2.2 Apache çš„é…ç½®&lt;/h3&gt;

&lt;p&gt;ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ª Web æœåŠ¡å™¨ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œä¸€äº›é…ç½®ï¼Œä»¥ä¾¿äºæ›´æ–¹ä¾¿æˆ‘ä»¬æœ¬åœ°çš„å¼€å‘ã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆä¿®æ”¹ Apache çš„ &lt;code&gt;document root&lt;/code&gt;ï¼Œè¿™æ˜¯ Web æœåŠ¡çš„æ ¹ç›®å½•ï¼ŒApache ä¼šä»è¿™ä¸ªç›®å½•ä¸­å¯»æ‰¾èµ„æºæ–‡ä»¶ã€‚é»˜è®¤çš„ document root æ˜¯ &lt;code&gt;/Library/WebServer/Documents&lt;/code&gt;ã€‚ä½œä¸ºä¸€ä¸ªå¼€å‘ç¯å¢ƒï¼Œæˆ‘ä»¬å¯èƒ½æ›´å¸Œæœ›ç½‘ç«™çš„æ ¹ç›®å½•ï¼ˆå³ Web æœåŠ¡çš„æ ¹ç›®å½•ï¼‰åœ¨æˆ‘ä»¬è‡ªå·±çš„ç”¨æˆ·ä¸»ç›®å½•ä¸‹ã€‚æ‰€ä»¥æ¥ä¸‹æ¥ä¿®æ”¹é…ç½®ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯é€šè¿‡ &lt;code&gt;open -e&lt;/code&gt; å‘½ä»¤ä½¿ç”¨ Mac é»˜è®¤çš„æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ open -e /usr/local/etc/apache2/2.4/httpd.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2016-12-28-macOS-Sierra-Apache-Multiple-PHP-versions-php-information-page-it-works-textedit.png&#34; alt=&#34;macOS-Sierra-Apache-Multiple-PHP-versions-php-information-page-it-works-textedit&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æœç´¢ &lt;code&gt;DocumentRoot&lt;/code&gt;ï¼Œç„¶åä½ ä¼šçœ‹åˆ°ä¸‹é¢è¿™è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DocumentRoot &amp;quot;/usr/local/var/www/htdocs&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å°†è¿™è¡Œé…ç½®æ”¹ä¸ºè‡ªå·±çš„ç”¨æˆ·ä¸»ç›®å½•ä¸­çš„ç›®å½•ï¼ŒæŠŠ &lt;code&gt;your_user&lt;/code&gt; æ”¹ä¸ºä½ çš„ç”¨æˆ·åï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DocumentRoot /Users/your_user/sites
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç´§æ¥ç€è¿˜è¦å°†ä¸Šé¢è¿™è¡Œä»£ç ä¸‹é¢çš„ &lt;code&gt;&amp;lt;Directory&amp;gt;&lt;/code&gt; ä¹Ÿæ”¹ä¸ºä½ çš„æ–°çš„ document rootï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;Directory /Users/your_user/sites&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨ &lt;code&gt;&amp;lt;Directory&amp;gt;&lt;/code&gt; ä»£ç å—é‡Œé¢ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°† &lt;code&gt;AllowOverride&lt;/code&gt; æ”¹ä¸ºä¸‹é¢çš„æ ·å­ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# AllowOverride controls what directives may be placed in .htaccess files.
# It can be &amp;quot;All&amp;quot;, &amp;quot;None&amp;quot;, or any combination of the keywords:
#   AllowOverride FileInfo AuthConfig Limit
#
AllowOverride All
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹æ¥é€šè¿‡å–æ¶ˆæ³¨é‡Šä½¿ç”¨ &lt;code&gt;mod_rewrite&lt;/code&gt; æ¨¡å—ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;LoadModule rewrite_module libexec/mod_rewrite.so
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;2-4-ç”¨æˆ·å’Œç”¨æˆ·ç»„&#34;&gt;2.4 ç”¨æˆ·å’Œç”¨æˆ·ç»„&lt;/h3&gt;

&lt;p&gt;ç°åœ¨ Apache å·²ç»æŒ‡å‘äº†æˆ‘ä»¬çš„ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ sites ç›®å½•ï¼Œä¸è¿‡ä¾æ—§è¿˜å­˜åœ¨ä¸€ä¸ªé—®é¢˜ã€‚Apche è¿è¡Œçš„æ—¶å€™ï¼Œå…¶ç”¨æˆ·åŠç”¨æˆ·ç»„éƒ½æ˜¯ &lt;code&gt;daemon&lt;/code&gt;ï¼Œå½“ç¨‹åºè®¿é—®æˆ‘ä»¬çš„ç”¨æˆ·ä¸»ç›®å½•çš„æ—¶å€™ï¼Œå°±ä¼šé‡åˆ°æƒé™é—®é¢˜ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•å°±æ˜¯ï¼Œåœ¨ &lt;code&gt;httpd.conf&lt;/code&gt; å°†ç”¨æˆ·å’Œç”¨æˆ·ç»„åˆ†åˆ«æ”¹ä¸ºä½ çš„ç”¨æˆ·å &lt;code&gt;your_user&lt;/code&gt; å’Œ &lt;code&gt;staff&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;User your_user
Group staff
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;2-5-sites-ç›®å½•&#34;&gt;2.5 sites ç›®å½•&lt;/h3&gt;

&lt;p&gt;æ¥ä¸‹æ¥å°±éœ€è¦åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª &lt;code&gt;sites&lt;/code&gt; ç›®å½•äº†ï¼Œç„¶åæ·»åŠ ä¸€ä¸ªç®€å•çš„ &lt;code&gt;index.html&lt;/code&gt; æ–‡ä»¶ï¼Œå¹¶å†™å…¥ &lt;code&gt;&amp;lt;h1&amp;gt;My User Web Root&amp;lt;/h1&amp;gt;&lt;/code&gt; ä»£ç ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ mkdir ~/Sites
$ echo &amp;quot;&amp;lt;h1&amp;gt;My User Web Root&amp;lt;/h1&amp;gt;&amp;quot; &amp;gt; ~/Sites/index.html
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åé‡å¯ Apache ä½¿é…ç½®ç”Ÿæ•ˆï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apachectl -k restart
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å†è®¿é—® &lt;code&gt;http://localhost&lt;/code&gt; å°±ä¼šæ˜¾ç¤º &lt;code&gt;index.html&lt;/code&gt; é‡Œé¢çš„å†…å®¹ã€‚å¦‚æœä½ çš„é…ç½®ä¹Ÿç”Ÿæ•ˆäº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­ä¸‹ä¸€æ­¥äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2016-12-28-macOS-Sierra-Apache-Multiple-PHP-versions-php-sites-webroot.png&#34; alt=&#34;macOS-Sierra-Apache-Multiple-PHP-versions-php-sites-webroot&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;3-php-çš„å®‰è£…&#34;&gt;3. PHP çš„å®‰è£…&lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬æ¥ä¸‹æ¥å®‰è£… PHP 5.5ã€PHP 5.6ã€PHP 7.0 å’Œ PHP 7.1ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªç®€å•çš„è„šæœ¬æ¥åˆ‡æ¢ä¸åŒçš„ç‰ˆæœ¬ã€‚&lt;/p&gt;

&lt;p&gt;ä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;brew options php55&lt;/code&gt; æ¥æŸ¥çœ‹æ‰€æœ‰å¯ä»¥å®‰è£…çš„é€‰é¡¹è®¾ç½®ï¼Œæ¯”å¦‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ &lt;code&gt;--with-httpd24&lt;/code&gt; å‚æ•°æ¥ç¼–è¯‘å®‰è£… PHP ä»¥åŠä½¿ Apache æ”¯æŒ PHP æ‰€éœ€è¦çš„ä¸€äº›æ¨¡å—ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ brew install php55 --with-httpd24
$ brew unlink php55
$ brew install php56 --with-httpd24
$ brew unlink php56
$ brew install php70 --with-httpd24
$ brew unlink php70
$ brew install php71 --with-httpd24
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸Šé¢çš„å‘½ä»¤ä¼šä»æºç ä¸‹è½½ PHPï¼Œå¹¶è¿›è¡Œç¼–è¯‘å®‰è£…ã€‚è¿™å¯èƒ½éœ€è¦ä¸€ç‚¹æ—¶é—´ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä¹‹å‰å·²ç»å®‰è£…è¿‡ PHPï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ &lt;code&gt;reinstall&lt;/code&gt; æ¥ä»£æ›¿ &lt;code&gt;install&lt;/code&gt; è¿›è¡Œå®‰è£…ã€‚&lt;/p&gt;

&lt;h4 id=&#34;3-0-1-issue-configure-error-cannot-find-libz&#34;&gt;3.0.1 ISSUE configure: error: Cannot find libz&lt;/h4&gt;

&lt;p&gt;æˆ‘åœ¨å®‰è£…çš„æ—¶å€™é‡åˆ°äº†ä¸€ä¸ªé”™è¯¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;==&amp;gt; ./configure --prefix=/usr/local/Cellar/php56/5.6.11_2 --localstatedir=/usr/local/var --sysconfdir=/usr/local/etc/php/5.6 --with-config-file-path=/usr/local/etc/php/5.6 --with
checking whether to enable the SQLite3 extension... yes
checking bundled sqlite3 library... yes
checking for ZLIB support... yes
checking if the location of ZLIB install directory is defined... no
configure: error: Cannot find libz
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ€ç»ˆåœ¨ Github ä¸Šæ‰¾åˆ°äº†è¯¥ ISSUE &lt;a href=&#34;https://github.com/Homebrew/homebrew-php/issues/1946&#34;&gt;Cannot find libz when install php56 #1946
&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å…¶åŸå› å¯èƒ½æ˜¯ Xcode çš„ Command Line Tool æ²¡æœ‰æ­£ç¡®å®‰è£…ã€‚è§£å†³é—®é¢˜çš„æ–¹æ³•æ˜¯è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥é‡æ–°å®‰è£…ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;xcode-select --install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯èƒ½ä½ ä¹Ÿéœ€è¦æ ¹æ®è‡ªå·±çš„éœ€è¦ä¿®æ”¹ä¸€äº› PHP çš„é…ç½®ï¼Œå¸¸è§çš„æ¯”å¦‚ä¿®æ”¹å†…å­˜é…ç½®æˆ– &lt;code&gt;date.timezone&lt;/code&gt; é…ç½®ã€‚å„ä¸ªç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶å³ &lt;code&gt;php.ini&lt;/code&gt; åœ¨ä¸‹é¢çš„ç›®å½•ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/usr/local/etc/php/5.5/php.ini
/usr/local/etc/php/5.6/php.ini
/usr/local/etc/php/7.0/php.ini
/usr/local/etc/php/7.1/php.ini
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;3-1-apache-å’Œ-php-çš„é…ç½®-ç¬¬ä¸€éƒ¨åˆ†&#34;&gt;3.1. Apache å’Œ PHP çš„é…ç½® - ç¬¬ä¸€éƒ¨åˆ†&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬å·²ç»æˆåŠŸå®‰è£…äº†å¤šä¸ªç‰ˆæœ¬çš„ PHPï¼Œä½†æˆ‘ä»¬è¿˜éœ€è¦å‘Šè¯‰ Apache æ€ä¹ˆä½¿ç”¨å®ƒä»¬ã€‚å†æ¬¡æ‰“å¼€ &lt;code&gt;/usr/local/etc/apache2/2.4/httpd.conf&lt;/code&gt;ï¼Œå¹¶æœç´¢ &lt;code&gt;#LoadModule php5_module&lt;/code&gt; æ‰€åœ¨è¡Œã€‚&lt;/p&gt;

&lt;p&gt;å¯ä»¥å‘ç°ï¼Œæ¯ä¸ªç‰ˆæœ¬çš„ PHP éƒ½æœ‰ä¸€ä¸ª &lt;code&gt;LoadModule&lt;/code&gt; å…¥å£ï¼Œæ¯ä¸ª &lt;code&gt;LoadModule&lt;/code&gt; éƒ½æŒ‡å‘ä¸€ä¸ªç‰¹å®šç‰ˆæœ¬çš„ PHPã€‚è¿™é‡Œé»˜è®¤çš„è·¯å¾„å¦‚ &lt;code&gt;/usr/local/Cellar/php71/7.1.0_11/libexec/apache2/libphp7.so&lt;/code&gt; æ˜¯ &lt;code&gt;brew&lt;/code&gt; åº”ç”¨ç¨‹åºçš„å®‰è£…è·¯å¾„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ›´é€šç”¨çš„è·¯å¾„æ¥æ›¿æ¢å®ƒä»¬ï¼ˆå…·ä½“çš„è·¯å¾„å¯èƒ½æœ‰æ‰€ä¸åŒï¼‰ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;LoadModule php5_module        /usr/local/Cellar/php55/5.5.38_11/libexec/apache2/libphp5.so
LoadModule php5_module        /usr/local/Cellar/php56/5.6.29_5/libexec/apache2/libphp5.so
LoadModule php7_module        /usr/local/Cellar/php70/7.0.14_7/libexec/apache2/libphp7.so
LoadModule php7_module        /usr/local/Cellar/php71/7.1.0_11/libexec/apache2/libphp7.so
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å°†ä¸Šé¢çš„è·¯å¾„ä¿®æ”¹ä¸ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;LoadModule php5_module        /usr/local/opt/php55/libexec/apache2/libphp5.so
LoadModule php5_module        /usr/local/opt/php56/libexec/apache2/libphp5.so
LoadModule php7_module        /usr/local/opt/php70/libexec/apache2/libphp7.so
LoadModule php7_module        /usr/local/opt/php71/libexec/apache2/libphp7.so
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¹‹æ‰€ä»¥å¯ä»¥è¿™ä¹ˆä¿®æ”¹ï¼Œæ˜¯å› ä¸º &lt;code&gt;/usr/local/opt/php71&lt;/code&gt; å…¶å®æ˜¯ç”± &lt;code&gt;brew&lt;/code&gt; åˆ›å»ºçš„ &lt;code&gt;/usr/local/Cellar/php71&lt;/code&gt; çš„ä¸€ä¸ªè½¯è¿æ¥ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¹ˆä¿®æ”¹çš„å¥½å¤„æ˜¯ï¼Œå‡çº§ PHP çš„å°ç‰ˆæœ¬å·çš„æ—¶å€™ï¼Œæ¯”å¦‚ç”± &lt;code&gt;7.1.0_11&lt;/code&gt; æ—¶ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†ä¿®æ”¹ &lt;code&gt;LoadModule&lt;/code&gt; å¯¹åº”çš„å€¼äº†ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬æ¯æ¬¡å¼€å‘æˆ–è¿è¡Œä¾æ—§åªéœ€è¦ä¸€èˆ¬ä¹Ÿåªèƒ½ä½¿ç”¨æŸä¸€ä¸ªç‰ˆæœ¬çš„ PHPã€‚ä»¥æˆ‘ä»¬è¦ä½¿ç”¨ 7.1 è¿™ä¸ªç‰ˆæœ¬å¼€å‘åº”ç”¨ä¸ºä¾‹ï¼Œå°†å…¶ä»–ç‰ˆæœ¬çš„ &lt;code&gt;LoadModule&lt;/code&gt; éƒ½æ³¨é‡Šæ‰ï¼Œåªä¿ç•™å¯¹åº”ç‰ˆæœ¬çš„ &lt;code&gt;LoadModule&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#LoadModule php5_module        /usr/local/opt/php55/libexec/apache2/libphp5.so
#LoadModule php5_module        /usr/local/opt/php56/libexec/apache2/libphp5.so
#LoadModule php7_module        /usr/local/opt/php70/libexec/apache2/libphp7.so
LoadModule php7_module        /usr/local/opt/php71/libexec/apache2/libphp7.so
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·çš„é…ç½®å°±ä¼šå‘Šè¯‰ Apache ä½¿ç”¨ PHP 7.1 æ¥å¤„ç† PHP è¯·æ±‚ã€‚ï¼ˆç¨åæˆ‘ä»¬å°†æ·»åŠ åˆ‡æ¢ PHP ç‰ˆæœ¬çš„è„šæœ¬ã€‚ï¼‰&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥è¿˜éœ€è¦é…ç½® PHP çš„ä¸»ç›®å½•ç´¢å¼•æ–‡ä»¶ï¼ˆDirectory Indexesï¼‰ï¼Œæ‰¾åˆ°ä¸‹é¢çš„ä»£ç å—ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;IfModule dir_module&amp;gt;
    DirectoryIndex index.html
&amp;lt;/IfModule&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å°†å…¶æ›¿æ¢ä¸ºä¸‹é¢çš„ä»£ç ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;IfModule dir_module&amp;gt;
    DirectoryIndex index.php index.html
&amp;lt;/IfModule&amp;gt;

&amp;lt;FilesMatch \.php$&amp;gt;
    SetHandler application/x-httpd-php
&amp;lt;/FilesMatch&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¿å­˜åé‡å¯ Apacheï¼ŒPHP çš„å®‰è£…å°±å®Œæˆäº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apachectl -k restart
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;3-2-éªŒè¯-php-å®‰è£…ç»“æœ&#34;&gt;3.2. éªŒè¯ PHP å®‰è£…ç»“æœ&lt;/h3&gt;

&lt;p&gt;éªŒè¯ PHP æ˜¯å¦æ­£ç¡®å®‰è£…çš„æœ€å¥½æ–¹æ³•æ˜¯ä½¿ç”¨ &lt;code&gt;phpinfo()&lt;/code&gt; è¿™ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¾“å‡º PHP çš„ç‰ˆæœ¬ç­‰ä¿¡æ¯ã€‚å½“ç„¶ï¼Œæœ€å¥½ä¸è¦åœ¨ä½ çš„ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å®ƒã€‚ä½†åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œä½¿ç”¨å®ƒå¯¹æˆ‘ä»¬äº†è§£ç³»ç»Ÿä¸­ PHP å®‰è£…ä¿¡æ¯éå¸¸æœ‰å¸®åŠ©ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ç½‘ç«™ä¸»ç›®å½•å³ä½ çš„ &lt;code&gt;sites/&lt;/code&gt; ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª &lt;code&gt;info.php&lt;/code&gt; çš„æ–‡ä»¶ï¼Œç„¶åè¾“å…¥ä¸‹é¢çš„ä»£ç ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;?php
phpinfo();
?&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® &lt;code&gt;http://localhost:7070/info.php&lt;/code&gt;ï¼Œä½ è®²çœ‹åˆ°ä¸‹é¢çš„å®Œç¾çš„ PHP ä¿¡æ¯é¡µé¢ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2016-12-28-macOS-Sierra-Apache-Multiple-PHP-versions-php-information-page.png&#34; alt=&#34;php information page&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœèƒ½å¤Ÿçœ‹åˆ°ç±»ä¼¼çš„é¡µé¢ï¼Œå°±è¯´æ˜ Apache å’Œ PHP å·²ç»æˆåŠŸè¿è¡Œäº†ã€‚ä½ å¯ä»¥é€šè¿‡æ³¨é‡Š &lt;code&gt;LoadModule ... php56 ...&lt;/code&gt; æ¥æµ‹è¯•å…¶ä»–ç‰ˆæœ¬çš„ PHPã€‚ä¿®æ”¹é…ç½®åï¼Œé‡å¯ Apache å¹¶åˆ·æ–°é¡µé¢å°±èƒ½çœ‹åˆ°ç±»ä¼¼çš„é¡µé¢äº†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;3-3-php-ç‰ˆæœ¬åˆ‡æ¢è„šæœ¬&#34;&gt;3.3 PHP ç‰ˆæœ¬åˆ‡æ¢è„šæœ¬&lt;/h3&gt;

&lt;p&gt;åœ¨å¼€å‘ä¸­ï¼Œå¦‚æœæ¯æ¬¡éƒ½é€šè¿‡ä¿®æ”¹ &lt;code&gt;/usr/local/etc/apache2/2.4/httpd.conf&lt;/code&gt; æ–‡ä»¶å»åˆ‡æ¢ PHP ç‰ˆæœ¬ï¼Œæ˜¾ç„¶å¤ªéº»çƒ¦äº†ã€‚æœ‰æ²¡æœ‰æ›´å®¹æ˜“çš„æ–¹æ³•å‘¢ï¼Ÿå¹¸è¿çš„æ˜¯ï¼Œä¸€äº›å‹¤åŠ³çš„å¼€å‘è€…å·²ç»å†™å¥½äº†è¿™æ ·çš„ä¸€ä¸ªè„šæœ¬ &lt;a href=&#34;https://gist.github.com/w00fz/142b6b19750ea6979137b963df959d11&#34;&gt; PHP switcher script&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬å°†æ·»åŠ  &lt;code&gt;sphp&lt;/code&gt; åˆ° brew çš„ &lt;code&gt;/usr/local/bin&lt;/code&gt; é‡Œé¢ã€‚åŸæ–‡ç»™çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ curl -L https://gist.github.com/w00fz/142b6b19750ea6979137b963df959d11/raw &amp;gt; /usr/local/bin/sphp
$ chmod +x /usr/local/bin/sphp
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…¶ä¸­ç¬¬ä¸€è¡Œå‘½ä»¤çš„ä½œç”¨ï¼Œå°±æ˜¯å°† Gist ä¸Šçš„è¿™ä¸ªåˆ‡æ¢ PHP ç‰ˆæœ¬çš„è„šæœ¬ä¸‹è½½å¹¶å†™å…¥åˆ° &lt;code&gt;/usr/local/bin/sphp&lt;/code&gt; è¿™ä¸ªæ–‡ä»¶é‡Œé¢ã€‚ç¬¬äºŒè¡Œå‘½ä»¤çš„ä½œç”¨æ˜¯èµ‹äºˆ &lt;code&gt;/usr/local/bin/sphp&lt;/code&gt; å¯æ‰§è¡Œæƒé™ã€‚&lt;/p&gt;

&lt;p&gt;ä½†ç”±äºå›½å†…å¹¶ä¸èƒ½è®¿é—® Gistï¼Œæ‰€ä»¥ç¬¬ä¸€è¡Œå‘½ä»¤å¹¶ä¸èƒ½æ‰§è¡ŒæˆåŠŸã€‚æ‰€ä»¥æˆ‘åœ¨è¿™é‡Œæä¾›äº†æ•´ä¸ªè„šæœ¬ä»£ç ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#!/bin/bash

# Check if command was ran as root.
if [[ $(id -u) -eq 0 ]]; then
    echo &amp;quot;The command \&amp;quot;sphp\&amp;quot; should not be executed as root or via sudo directly.&amp;quot;
    echo &amp;quot;When a service requires root access, you will be prompted for a password as needed.&amp;quot;
    exit 1
fi

# Usage
if [ $# -ne 1 ]; then
    echo &amp;quot;Usage: sphp [phpversion]&amp;quot;
    echo &amp;quot;Versions installed:&amp;quot;
    brew list | grep &#39;^php[0-9]\{2,\}$&#39; | grep -o -E &#39;[0-9]+&#39; | while read -r line ; do
        echo &amp;quot; - phpversion: $line&amp;quot;
    done
    exit 1
fi

currentversion=&amp;quot;`php -r \&amp;quot;error_reporting(0); echo str_replace(&#39;.&#39;, &#39;&#39;, substr(phpversion(), 0, 3));\&amp;quot;`&amp;quot;
newversion=&amp;quot;$1&amp;quot;

majorOld=${currentversion:0:1}
majorNew=${newversion:0:1}
minorNew=${newversion:1:1}

brew list php$newversion 2&amp;gt; /dev/null &amp;gt; /dev/null

if [ $? -eq 0 ]; then
    echo &amp;quot;PHP version $newversion found&amp;quot;

    # Check if new version is already the current version.
    # if [ &amp;quot;${newversion}&amp;quot; == &amp;quot;${currentversion}&amp;quot; ]; then
    #     echo -n &amp;quot;PHP version ${newversion} is already being used. Continue by reloading? (y/n) &amp;quot;
    #     while true; do
    #         read -n 1 yn
    #         case $yn in
    #             [Yy]* ) echo &amp;amp;&amp;amp; break;;
    #             [Nn]* ) echo &amp;amp;&amp;amp; exit 1;;
    #         esac
    #     done
    # fi

    echo &amp;quot;Unlinking old binaries...&amp;quot;
    brew unlink php$currentversion 2&amp;gt; /dev/null &amp;gt; /dev/null

    echo &amp;quot;Linking new binaries...&amp;quot;
    brew link php$newversion

    echo &amp;quot;Linking new modphp addon...&amp;quot;
    sudo ln -sf `brew list php$newversion | grep libphp` /usr/local/lib/libphp${majorNew}.so
    echo /usr/local/lib/libphp${majorNew}.so
    echo &amp;quot;Fixing LoadModule...&amp;quot;
    apacheConf=`httpd -V | grep -i server_config_file | cut -d &#39;&amp;quot;&#39; -f 2`
    sudo sed -i -e &amp;quot;/LoadModule php${majorOld}_module/s/^#*/#/&amp;quot; $apacheConf

    if grep &amp;quot;LoadModule php${majorNew}_module .*php${newversion}&amp;quot; $apacheConf &amp;gt; /dev/null
    then
        sudo sed -i -e &amp;quot;/LoadModule php${majorNew}_module .*php${newversion}/s/^#//&amp;quot; $apacheConf
    else
        sudo sed -i -e &amp;quot;/LoadModule php${majorNew}_module/s/^#//&amp;quot; $apacheConf
    fi

    echo &amp;quot;Updating version file...&amp;quot;

    pgrep -f /usr/sbin/httpd 2&amp;gt; /dev/null &amp;gt; /dev/null
    if [ $? -eq 0 ]; then
        echo &amp;quot;Restarting system Apache...&amp;quot;
        sudo pkill -9 -f /usr/sbin/httpd
        sudo /usr/sbin/apachectl -k restart &amp;gt; /dev/null 2&amp;gt;&amp;amp;1
    fi

    pgrep -f /usr/local/&amp;quot;Cellar|opt&amp;quot;/*/httpd 2&amp;gt; /dev/null &amp;gt; /dev/null
    if [ $? -eq 0 ]; then
        echo &amp;quot;Restarting homebrew Apache...&amp;quot;
        sudo pkill -9 -f /usr/local/&amp;quot;Cellar|opt&amp;quot;/*/httpd
        sudo /usr/local/bin/apachectl -k restart &amp;gt; /dev/null 2&amp;gt;&amp;amp;1
    fi

    # pgrep -x httpd 2&amp;gt; /dev/null &amp;gt; /dev/null
    # if [ $? -eq 0 ]; then
    #     echo &amp;quot;Restarting non-root homebrew Apache...&amp;quot;
    #     httpd -k restart &amp;gt; /dev/null 2&amp;gt;&amp;amp;1
    # fi

    echo &amp;quot;Done.&amp;quot;

    # Show PHP CLI version for verification.
    echo &amp;amp;&amp;amp; php -v
else
    echo &amp;quot;PHP version $majorNew.$minorNew was not found.&amp;quot;
    echo &amp;quot;Try \`brew install php${newversion}\` first.&amp;quot;
    exit 1
fi
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€šè¿‡ &lt;code&gt;open -e /usr/local/bin/sphp&lt;/code&gt; æ‰“å¼€ &lt;code&gt;sphp&lt;/code&gt; æ–‡ä»¶ï¼Œå¹¶å°†ä¸Šé¢çš„ä»£ç å¤åˆ¶è¿›å…¥ï¼Œç„¶åèµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ chmod +x /usr/local/bin/sphp
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;3-4-æ£€æµ‹-path-è·¯å¾„&#34;&gt;3.4. æ£€æµ‹ PATH è·¯å¾„&lt;/h3&gt;

&lt;p&gt;Homebrew åœ¨å®‰è£…ç¨‹åºçš„æ—¶å€™ä¸€èˆ¬ä¼šæŠŠç¨‹åºçš„å¯æ‰§è¡Œæ–‡ä»¶åŠ å…¥åˆ° &lt;code&gt;/usr/local/bin&lt;/code&gt; å’Œ &lt;code&gt;/usr/local/sbin&lt;/code&gt; è¿™ä¸¤ä¸ªç›®å½•é‡Œé¢ã€‚é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å¯ä»¥å¿«é€Ÿæµ‹è¯•å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ echo $PATH
/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚æœæ²¡æœ‰çœ‹åˆ°ç±»ä¼¼çš„è¾“å‡ºï¼Œä½ å¯èƒ½éœ€è¦æ‰‹åŠ¨æ·»åŠ è¿™äº›è·¯å¾„ã€‚æ·»åŠ ä¸‹é¢çš„ä»£ç åˆ° shell çš„é…ç½®æ–‡ä»¶ä¸­ï¼ˆä¸åŒçš„ shell å¯èƒ½éœ€è¦å°†è·¯å¾„æ·»åŠ åˆ°ä¸åŒçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚ &lt;code&gt;~/.profile&lt;/code&gt; &lt;code&gt;~/.bash_profile&lt;/code&gt; &lt;code&gt;~/.zshrc&lt;/code&gt;ï¼‰ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯ macOS é»˜è®¤çš„ shellï¼Œåˆ™æ·»åŠ åˆ° &lt;code&gt;~/.profile&lt;/code&gt; ï¼ˆè‹¥æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œåˆ™åˆ›å»ºå®ƒï¼‰ï¼›å¦‚æœä½¿ç”¨çš„æ˜¯ zshï¼Œåˆ™æ·»åŠ åˆ° &lt;code&gt;~/.zshrc&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;export PATH=/usr/local/bin:/usr/local/sbin:$PATH
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨æ·»åŠ è·¯å¾„åˆ°é…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œæœ€å¥½å…³é—­å…¶ä»–ä¸ç›¸å…³çš„ç»ˆç«¯ï¼Œå› ä¸ºæŸäº›å¼€ç€çš„ç»ˆç«¯å¯èƒ½ä¼šå¯¹è·¯å¾„é€ æˆä¸€äº›å¥‡æ€ªçš„é—®é¢˜ã€‚æ·»åŠ å®Œæˆåï¼Œé…ç½®ä¼šåœ¨ä¸‹æ¬¡æ‰“å¼€ç»ˆç«¯çš„æ—¶å€™ç”Ÿæ•ˆã€‚æˆ–è€…ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œé‡æ–°è½½å…¥é…ç½®æ–‡ä»¶ä½¿å…¶ç«‹å³ç”Ÿæ•ˆï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# è‹¥ä½¿ç”¨çš„æ˜¯é»˜è®¤ç»ˆç«¯
$ source ~/.profile
# æˆ–å¦‚æœä½¿ç”¨çš„æ˜¯ zsh
$ source ~/.zshrc
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;3-5-apache-å’Œ-php-çš„é…ç½®-ç¬¬äºŒéƒ¨åˆ†&#34;&gt;3.5. Apache å’Œ PHP çš„é…ç½® - ç¬¬äºŒéƒ¨åˆ†&lt;/h3&gt;

&lt;p&gt;å°½ç®¡ä¹‹å‰æˆ‘ä»¬å·²ç»é…ç½®å¥½äº† Apache å’Œ PHPï¼Œç°åœ¨æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ¥ä½¿ç”¨ &lt;code&gt;PHP switcher script&lt;/code&gt; åˆ‡æ¢ PHP çš„ç‰ˆæœ¬ã€‚ç»§ç»­æ‰“å¼€ &lt;code&gt;/usr/local/etc/apache2/2.4/httpd.conf&lt;/code&gt; ç„¶åæ‰¾åˆ° &lt;code&gt;LoadModule php&lt;/code&gt; æ‰€åœ¨çš„è¡Œï¼š&lt;/p&gt;

&lt;p&gt;ç„¶åæ³¨é‡Šæ‰æ­£åœ¨ä½¿ç”¨çš„ &lt;code&gt;LoadModule&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#LoadModule php5_module        /usr/local/opt/php55/libexec/apache2/libphp5.so
#LoadModule php5_module        /usr/local/opt/php56/libexec/apache2/libphp5.so
#LoadModule php7_module        /usr/local/opt/php70/libexec/apache2/libphp7.so
#LoadModule php7_module        /usr/local/opt/php71/libexec/apache2/libphp7.so
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¹¶åœ¨ä¸‹é¢æ·»åŠ ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# Brew PHP LoadModule for `sphp` switcher
#LoadModule php5_module /usr/local/lib/libphp5.so
LoadModule php7_module /usr/local/lib/libphp7.so
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚æœä½ å®‰è£…äº† PHP 5.5 æˆ– 5.6 ç­‰ï¼Œæ³¨é‡Šæ‰çš„ &lt;code&gt;php5_module&lt;/code&gt; åŒæ ·ä¹Ÿéå¸¸é‡è¦ã€‚&lt;code&gt;PHP switcher script&lt;/code&gt; ä¼šè‡ªåŠ¨æ³¨é‡Šæˆ–å–æ¶ˆæ³¨é‡Š PHP moduleã€‚&lt;/p&gt;

&lt;h3 id=&#34;3-6-php-åˆ‡æ¢æµ‹è¯•&#34;&gt;3.6 PHP åˆ‡æ¢æµ‹è¯•&lt;/h3&gt;

&lt;p&gt;å®Œæˆä¸Šé¢çš„æ­¥éª¤ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ &lt;code&gt;sphp&lt;/code&gt; å‘½ä»¤æ¥åˆ‡æ¢ PHP ç‰ˆæœ¬äº†ã€‚&lt;code&gt;sphp&lt;/code&gt; çš„å‚æ•°æ˜¯ç”±ä¸¤ä¸ªæ•°å­—ç»„åˆæˆçš„ä¸¤ä½æ•°ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sphp 5
PHP version 55 found
Unlinking old binaries...
Linking new binaries...
Linking /usr/local/Cellar/php55/5.5.38_11... 17 symlinks created
Linking new modphp addon...
/usr/local/lib/libphp5.so
Fixing LoadModule...
Updating version file...
Restarting homebrew Apache...
Done.

PHP 5.5.38 (cli) (built: Dec 28 2016 15:48:28)
Copyright (c) 1997-2015 The PHP Group
Zend Engine v2.5.0, Copyright (c) 1998-2015 Zend Technologies
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åè®¿é—® &lt;code&gt;http://localhost:7070/info.php&lt;/code&gt;ï¼Œå¯ä»¥çœ‹åˆ° PHP ç‰ˆæœ¬å·²ç»æ­£ç¡®åˆ‡æ¢ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2016-12-28-macOS-Sierra-Apache-Multiple-PHP-versions-php-information-page-sphp.png&#34; alt=&#34;macOS-Sierra-Apache-Multiple-PHP-versions-php-information-page-sphp&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;3-6-1-issue-unable-to-load-dynamic-library-usr-local-opt-php56-mongo-mongo-so&#34;&gt;3.6.1 ISSUE Unable to load dynamic library &amp;lsquo;/usr/local/opt/php56-mongo/mongo.so&amp;rsquo;&lt;/h4&gt;

&lt;p&gt;æˆ‘åœ¨åˆ‡æ¢ç‰ˆæœ¬çš„æ—¶å€™ä¹Ÿé‡åˆ°äº†é—®é¢˜ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sphp 71
...
Warning: PHP Startup: Unable to load dynamic library &#39;/usr/local/opt/php56-mongo/mongo.so&#39; - dlopen(/usr/local/opt/php56-mongo/mongo.so, 9): image not found in Unknown on line 0
PHP 5.6.29 (cli) (built: Dec 28 2016 15:58:30)
Copyright (c) 1997-2016 The PHP Group
Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ ¹æ®é”™è¯¯æç¤ºï¼Œå¤§æ¦‚æ˜¯å› ä¸º &lt;code&gt;php56-mongo&lt;/code&gt; è¿™ä¸ªæ‰©å±•æ²¡æœ‰ï¼Œäºæ˜¯æˆ‘ä½¿ç”¨ brew å®‰è£…äº† &lt;code&gt;php56-mongo&lt;/code&gt; é—®é¢˜å°±è§£å†³äº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ brew install php56-mongo
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;3-7-æ›´æ–°-php-å’Œå…¶ä»–é€šè¿‡-brew-å®‰è£…çš„ç¨‹åº&#34;&gt;3.7 æ›´æ–° PHP å’Œå…¶ä»–é€šè¿‡ Brew å®‰è£…çš„ç¨‹åº&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨ brew æ›´æ–° PHP å’Œå…¶ä»–é€šè¿‡ brew å®‰è£…çš„ç¨‹åºéå¸¸ç®€å•ï¼Œç¬¬ä¸€æ­¥æ˜¯æ›´æ–° brew æœ¬èº«ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ brew update
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å‡çº§åå°†ä¼šåˆ—å‡ºä¸€ç³»åˆ—å¯æµ‹å›å½’å†…å¿ƒçš„ç¨‹åºï¼Œç„¶åä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ›´æ–°ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ brew upgrade
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;3-8-ä½¿ç”¨å…·ä½“çš„-æœ€æ–°çš„-php-ç‰ˆæœ¬&#34;&gt;3.8 ä½¿ç”¨å…·ä½“çš„/æœ€æ–°çš„ PHP ç‰ˆæœ¬&lt;/h3&gt;

&lt;p&gt;å½“æˆ‘ä»¬ä½¿ç”¨ PHP çš„æ—¶å€™ï¼Œæ¯æ¬¡æˆ‘ä»¬åªä½¿ç”¨äº†å…¶ä¸­ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¹¶ä¸”åªæœ‰å½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬ä¼šæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹å½“å‰ PHP ç‰ˆæœ¬ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ php -v
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹å…·ä½“çš„å¯ç”¨ PHP ç‰ˆæœ¬ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ brew info php55
homebrew/php/php55: stable 5.5.38 (bottled), HEAD
PHP Version 5.5
https://php.net
Conflicts with: php53, php54, php56, php70, php71
/usr/local/Cellar/php55/5.5.38_11 (329 files, 47.7M)
  Built from source on 2016-12-28 at 15:49:20 with: --with-httpd24
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¯”å¦‚ä¸Šé¢çš„ PHP 5.5 ç‰ˆæœ¬çš„åªæœ‰ä¸€ä¸ªå¯ç”¨ç‰ˆæœ¬ 5.5.38ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åå¯ä»¥ä½¿ç”¨ brew æ¥åˆ‡æ¢åˆ°ä¸€ä¸ªå…·ä½“çš„ç‰ˆæœ¬ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ brew switch php55 5.5.38
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åˆ°æ­¤ï¼Œè¿™ç¯‡æ–‡ç« å°±ç»“æŸäº†ã€‚ä½ å·²ç»å®ŒæˆæŒæ¡äº† Apache 2.4 å’Œå„ä¸ªç‰ˆæœ¬ PHP çš„å®‰è£…ï¼Œå¹¶ä¸”èƒ½å¤Ÿåœ¨ 5.5 5.6 7.0 7.1 ä¸­å¿«é€Ÿåˆ‡æ¢ PHP ç‰ˆæœ¬ã€‚åŸä½œè€…è¿˜å†™äº†ä¸¤å¤–ä¸¤ç¯‡æ–‡ç« ï¼Œåˆ†åˆ«æ˜¯ &lt;a href=&#34;https://getgrav.org/blog/macos-sierra-apache-mysql-vhost-apc&#34;&gt;macOS 10.12 Sierra Apache Setup: MySQL, APC &amp;amp; More&lt;/a&gt; å’Œ &lt;a href=&#34;https://getgrav.org/blog/macos-sierra-apache-ssl&#34;&gt;macOS 10.12 Sierra Apache Setup: SSL&lt;/a&gt;ï¼Œè¿‘æœŸå†…æˆ‘ä¹Ÿä¼šå°†å®ƒä»¬ç¿»è¯‘æˆä¸­æ–‡ï¼Œå¹¶åŠ å…¥è‡ªå·±çš„å®è·µæ€»ç»“ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Github Issue: []()&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Wechat Development Access Guide</title>
      <link>http://nodejh.com/post/Wechat-Development-Access-Guide/</link>
      <pubDate>Sun, 04 Dec 2016 19:32:03 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Wechat-Development-Access-Guide/</guid>
      <description>

&lt;p&gt;åœ¨è¿›è¡Œå¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘ä¹‹å‰ï¼Œéœ€è¦å…ˆæ¥å…¥å¾®ä¿¡å…¬ä¼—å¹³å°ã€‚å…·ä½“çš„æ­¥éª¤åœ¨ &lt;a href=&#34;http://mp.weixin.qq.com/wiki/8/f9a0b8382e0b77d87b3bcc1ce6fbc104.html&#34;&gt;å…¬ä¼—å¹³å°å¼€å‘è€…æ–‡æ¡£-æ¥å…¥æŒ‡å—&lt;/a&gt; å·²æœ‰è¯¦ç»†ä»‹ç»ï¼Œæ–‡æ¡£ä¸­ä¹Ÿæä¾›äº†éªŒè¯æœåŠ¡å™¨çš„ PHP ç¤ºä¾‹ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡ä¸»è¦æä¾›äº† Node.js ç‰ˆæœ¬çš„éªŒè¯ä»£ç ï¼ŒåŒæ—¶æŠŠæ­¥éª¤ç»†åŒ–ï¼Œè®©å¼€å‘è€…æ›´æ–¹ä¾¿åœ°äº†è§£æ•´ä¸ªæ¥å…¥è¿‡ç¨‹ï¼Œå¯¹åˆå­¦è€…æ›´å‹å¥½ã€‚&lt;/p&gt;

&lt;h2 id=&#34;tl-dr&#34;&gt;TL;DR&lt;/h2&gt;

&lt;p&gt;åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°åå°çš„ &lt;code&gt;å¼€å‘è€…ä¸­å¿ƒ/å¡«å†™æœåŠ¡å™¨é…ç½®&lt;/code&gt; é¡µé¢ï¼Œé…ç½®å¥½ URL å’Œ Token åï¼Œå¤åˆ¶ä¸‹é¢çš„ä»£ç ï¼Œä¿®æ”¹ Tokenï¼Œåœ¨æœåŠ¡å™¨è¿è¡Œï¼Œç„¶åå†åœ¨é¡µé¢ä¸Šç‚¹å‡»æäº¤å³å¯è¿›è¡Œæ¥å…¥éªŒè¯ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// checkSignature.js
/**
 * æ•´ä¸ªéªŒè¯æ­¥éª¤åˆ†ä¸ºä¸‰æ­¥
 *    1. å°†tokenã€timestampã€nonceä¸‰ä¸ªå‚æ•°è¿›è¡Œå­—å…¸åºæ’åº
 *    2. å°†ä¸‰ä¸ªå‚æ•°å­—ç¬¦ä¸²æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œsha1åŠ å¯†
 *    3. å¼€å‘è€…è·å¾—åŠ å¯†åçš„å­—ç¬¦ä¸²å¯ä¸signatureå¯¹æ¯”ï¼Œæ ‡è¯†è¯¥è¯·æ±‚æ¥æºäºå¾®ä¿¡
 */


const http = require(&#39;http&#39;);
const url = require(&#39;url&#39;);
const crypto = require(&#39;crypto&#39;);


// Web æœåŠ¡å™¨ç«¯å£
const port = 3333;
// å¾®ä¿¡å…¬ä¼—å¹³å°æœåŠ¡å™¨é…ç½®ä¸­çš„ Token
const token = &#39;token&#39;;


/**
 *  å¯¹å­—ç¬¦ä¸²è¿›è¡Œsha1åŠ å¯†
 * @param  {string} str éœ€è¦åŠ å¯†çš„å­—ç¬¦ä¸²
 * @return {string}     åŠ å¯†åçš„å­—ç¬¦ä¸²
 */
function sha1(str) {
  const md5sum = crypto.createHash(&#39;sha1&#39;);
  md5sum.update(str);
  const ciphertext = md5sum.digest(&#39;hex&#39;);
  return ciphertext;
}

/**
 * éªŒè¯æœåŠ¡å™¨çš„æœ‰æ•ˆæ€§
 * @param  {object} req http è¯·æ±‚
 * @param  {object} res http å“åº”
 * @return {object}     éªŒè¯ç»“æœ
 */
function checkSignature(req, res) {
  const query = url.parse(req.url, true).query;
  console.log(&#39;Request URL: &#39;, req.url);
  const signature = query.signature;
  const timestamp = query.timestamp;
  const nonce = query.nonce;
  const echostr = query.echostr;
  console.log(&#39;timestamp: &#39;, timestamp);
  console.log(&#39;nonce: &#39;, nonce);
  console.log(&#39;signature: &#39;, signature);
  // å°† token/timestamp/nonce ä¸‰ä¸ªå‚æ•°è¿›è¡Œå­—å…¸åºæ’åº
  const tmpArr = [token, timestamp, nonce];
  const tmpStr = sha1(tmpArr.sort().join(&#39;&#39;));
  console.log(&#39;Sha1 String: &#39;, tmpStr);
  // éªŒè¯æ’åºå¹¶åŠ å¯†åçš„å­—ç¬¦ä¸²ä¸ signature æ˜¯å¦ç›¸ç­‰
  if (tmpStr === signature) {
    // åŸæ ·è¿”å›echostrå‚æ•°å†…å®¹
    res.end(echostr);
    console.log(&#39;Check Success&#39;);
  } else {
    res.end(&#39;failed&#39;);
    console.log(&#39;Check Failed&#39;);
  }
}


const server = http.createServer(checkSignature)
server.listen(port, () =&amp;gt; {
  console.log(`Server is runnig ar port ${port}`);
  console.log(&#39;Start Checking...&#39;);
});

&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;å¡«å†™æœåŠ¡å™¨é…ç½®&#34;&gt;å¡«å†™æœåŠ¡å™¨é…ç½®&lt;/h2&gt;

&lt;p&gt;ç™»å½•è¿›å…¥å¾®ä¿¡å…¬ä¼—å¹³å°åå°ç®¡ç†é¡µé¢&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2016-12-04-Wechat-Development-Access-Guide-login-1.png&#34; alt=&#34;ç™»å½•&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åè¿›å…¥ &lt;code&gt;åŸºæœ¬é…ç½®&lt;/code&gt; é¡µé¢&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2016-12-04-Wechat-Development-Access-Guide-index.png&#34; alt=&#34;åŸºæœ¬é…ç½®&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å†ç„¶åé€‰æ‹© &lt;code&gt;ä¿®æ”¹é…ç½®&lt;/code&gt;ï¼Œè¿›å…¥åˆ° &lt;code&gt;å¡«å†™æœåŠ¡å™¨é…ç½®&lt;/code&gt; å­é¡µé¢&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2016-12-04-Wechat-Development-Access-Guide-config-page.png&#34; alt=&#34;å¡«å†™æœåŠ¡å™¨é…ç½®&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;URL ä¸ºå·²ç»è§£æåˆ°ä½ çš„æœåŠ¡å™¨çš„åŸŸåï¼Œè¿™é‡Œä»¥ &lt;a href=&#34;http://wechat.nodejh.com&#34;&gt;http://wechat.nodejh.com&lt;/a&gt; è¿™ä¸ªäºŒçº§åŸŸåä¸ºä¾‹&lt;/li&gt;
&lt;li&gt;Token éšæ„å¡«å†™å³å¯&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;éªŒè¯æœåŠ¡å™¨åœ°å€çš„æœ‰æ•ˆæ€§&#34;&gt;éªŒè¯æœåŠ¡å™¨åœ°å€çš„æœ‰æ•ˆæ€§&lt;/h2&gt;

&lt;p&gt;éªŒè¯æœåŠ¡å™¨åœ°å€çš„æœ‰æ•ˆæ€§ï¼Œéœ€è¦åœ¨åŸŸåå¯¹åº”çš„æœåŠ¡å™¨ä¸Šè¿è¡Œä¸€æ®µéªŒè¯ç¨‹åºã€‚è¯¥ç¨‹åºä¼šæ¥æ”¶ä¸Šä¸ªæ­¥éª¤ä¸­çš„åŸŸåæ‰€å‘é€çš„ HTTP è¯·æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;å®˜æ–¹æ–‡æ¡£æä¾›äº† PHP çš„ç¤ºä¾‹ç¨‹åºï¼Œä¸‹é¢æ˜¯ Node.js ç‰ˆæœ¬ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// checkSignature.js
/**
 * æ•´ä¸ªéªŒè¯æ­¥éª¤åˆ†ä¸ºä¸‰æ­¥
 *    1. å°†tokenã€timestampã€nonceä¸‰ä¸ªå‚æ•°è¿›è¡Œå­—å…¸åºæ’åº
 *    2. å°†ä¸‰ä¸ªå‚æ•°å­—ç¬¦ä¸²æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œsha1åŠ å¯†
 *    3. å¼€å‘è€…è·å¾—åŠ å¯†åçš„å­—ç¬¦ä¸²å¯ä¸signatureå¯¹æ¯”ï¼Œæ ‡è¯†è¯¥è¯·æ±‚æ¥æºäºå¾®ä¿¡
 */


const http = require(&#39;http&#39;);
const url = require(&#39;url&#39;);
const crypto = require(&#39;crypto&#39;);


// Web æœåŠ¡å™¨ç«¯å£
const port = 3333;
// å¾®ä¿¡å…¬ä¼—å¹³å°æœåŠ¡å™¨é…ç½®ä¸­çš„ Token
const token = &#39;token&#39;;


/**
 *  å¯¹å­—ç¬¦ä¸²è¿›è¡Œsha1åŠ å¯†
 * @param  {string} str éœ€è¦åŠ å¯†çš„å­—ç¬¦ä¸²
 * @return {string}     åŠ å¯†åçš„å­—ç¬¦ä¸²
 */
function sha1(str) {
  const md5sum = crypto.createHash(&#39;sha1&#39;);
  md5sum.update(str);
  const ciphertext = md5sum.digest(&#39;hex&#39;);
  return ciphertext;
}

/**
 * éªŒè¯æœåŠ¡å™¨çš„æœ‰æ•ˆæ€§
 * @param  {object} req http è¯·æ±‚
 * @param  {object} res http å“åº”
 * @return {object}     éªŒè¯ç»“æœ
 */
function checkSignature(req, res) {
  const query = url.parse(req.url, true).query;
  console.log(&#39;Request URL: &#39;, req.url);
  const signature = query.signature;
  const timestamp = query.timestamp;
  const nonce = query.nonce;
  const echostr = query.echostr;
  console.log(&#39;timestamp: &#39;, timestamp);
  console.log(&#39;nonce: &#39;, nonce);
  console.log(&#39;signature: &#39;, signature);
  // å°† token/timestamp/nonce ä¸‰ä¸ªå‚æ•°è¿›è¡Œå­—å…¸åºæ’åº
  const tmpArr = [token, timestamp, nonce];
  const tmpStr = sha1(tmpArr.sort().join(&#39;&#39;));
  console.log(&#39;Sha1 String: &#39;, tmpStr);
  // éªŒè¯æ’åºå¹¶åŠ å¯†åçš„å­—ç¬¦ä¸²ä¸ signature æ˜¯å¦ç›¸ç­‰
  if (tmpStr === signature) {
    // åŸæ ·è¿”å›echostrå‚æ•°å†…å®¹
    res.end(echostr);
    console.log(&#39;Check Success&#39;);
  } else {
    res.end(&#39;failed&#39;);
    console.log(&#39;Check Failed&#39;);
  }
}


const server = http.createServer(checkSignature)
server.listen(port, () =&amp;gt; {
  console.log(`Server is runnig ar port ${port}`);
  console.log(&#39;Start Checking...&#39;);
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å› ä¸ºéªŒè¯è¦ä½¿ç”¨ 80(HTTP) ç«¯å£æˆ– 443(HTTPS) ç«¯å£ï¼Œè€Œ Node.js ä¸€èˆ¬ä¸ç›´æ¥ç›‘å¬ 80 ç«¯å£ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ Nginx æˆ–å…¶ä»–ç¨‹åºå°†æ¥è‡ª &lt;code&gt;http://wechat.nodejh.com&lt;/code&gt; çš„è¯·æ±‚è½¬å‘åˆ° Node.js ç¨‹åºç«¯å£å¦‚ä¸Šé¢çš„ 3333ã€‚å…³äº Nginx çš„é…ç½®ï¼Œå¯ä»¥çœ‹æˆ‘ä¹‹å‰å†™çš„&lt;a href=&#34;http://nodejh.com/post/Use-Nginx-Reverse-Proxy-Nodejs/&#34;&gt;ã€Šä½¿ç”¨ Ngnix ç»™ Node.js åº”ç”¨åšåå‘ä»£ç†ã€‹&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œä¹Ÿé¡ºä¾¿ç»™å‡ºè¯¥ç¨‹åºçš„ Nginx é…ç½®&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;upstream nodejs {
    server 127.0.0.1:3333;
    keepalive 64;
}

server {
    listen 80;
    server_name wechat.nodejh.com;
    # æ—¥å¿—
    access_log /var/log/nginx/wechat.nodejh.com.log;
    location / {
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host  $http_host;
        proxy_set_header X-Nginx-Proxy true;
        proxy_set_header Connection &amp;quot;&amp;quot;;
        proxy_pass http://nodejs;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é…ç½®å°±ç»ªä¹‹åï¼Œå¯åŠ¨éªŒè¯ç¨‹åº&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ node checkSignature.js
Server is runnig ar port 3333
Start Checking...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·ï¼Œ&lt;code&gt;checkSignature.js&lt;/code&gt; å°±ä¼šåˆ›å»ºä¸€ä¸ª 3333 ç«¯å£çš„æœåŠ¡ã€‚è®¿é—® &lt;code&gt;http://wechat.nodejh.com&lt;/code&gt; è¿™ä¸ªåŸŸåçš„æ—¶å€™ï¼ŒNginx å°±ä¼šå°†è¯·æ±‚è½¬å‘åˆ° 3333 ç«¯å£ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°åå°ç®¡ç†çš„æœåŠ¡å™¨é…ç½®é¡µé¢ï¼Œç‚¹å‡»æäº¤æŒ‰é’®ï¼Œå°±ä¼šå¡«å†™çš„ URL ï¼ˆè¿™é‡Œæ˜¯ &lt;a href=&#34;http://wechat.nodejh.comï¼‰å‘é€ä¸€ä¸ª&#34;&gt;http://wechat.nodejh.comï¼‰å‘é€ä¸€ä¸ª&lt;/a&gt; HTTP è¯·æ±‚ï¼Œå¹¶å¸¦ä¸Š &lt;code&gt;signature,timestamp,nonce,echostr&lt;/code&gt; è¿™å››ä¸ªå‚æ•°ã€‚&lt;/p&gt;

&lt;p&gt;å¯åŠ¨ &lt;code&gt;checkSignature.js&lt;/code&gt; åï¼Œåœ¨æœåŠ¡å™¨é…ç½®é¡µé¢ï¼Œç‚¹å‡»æäº¤æŒ‰é’®ï¼Œå°±ä¼šå¼€å¯éªŒè¯ã€‚&lt;/p&gt;

&lt;p&gt;æœåŠ¡å™¨ç«¯å‡ºç°ä¸‹é¢çš„ç»“æœï¼Œå°±è¯´æ˜éªŒè¯æˆåŠŸã€‚éªŒè¯æˆåŠŸåï¼Œå¾®ä¿¡å…¬ä¼—å¹³å°åå°ä¼šè‡ªåŠ¨è·³è½¬åˆ° &lt;code&gt;åŸºæœ¬é…ç½®&lt;/code&gt; é¡µé¢ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# æœåŠ¡ç«¯å“åº”...
signature:  8fffb8f011d64819ec61105415114694bb03d392
Sha1 String:  8fffb8f011d64819ec61105415114694bb03d392
Check Success
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åå°±å¯ä»¥ä¾æ®æ¥å£æ–‡æ¡£å®ç°ä¸šåŠ¡é€»è¾‘äº†ã€‚&lt;/p&gt;

&lt;p&gt;åç»­æˆ‘ä¹Ÿè¿˜ä¼šæ›´æ–°ä¸€äº›å…³äºå¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘çš„æ–‡ç« ï¼Œæ¬¢è¿å…³æ³¨ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Github Issue: &lt;a href=&#34;https://github.com/nodejh/nodejh.github.io/issues/24&#34;&gt;https://github.com/nodejh/nodejh.github.io/issues/24&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Fix Locale Setting Warning From Perl</title>
      <link>http://nodejh.com/post/Fix-Locale-Setting-Warning-From-Perl/</link>
      <pubDate>Fri, 02 Dec 2016 15:58:06 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Fix-Locale-Setting-Warning-From-Perl/</guid>
      <description>&lt;p&gt;å½“ä½¿åœ¨ VPS ä¸Šå®‰è£…è½¯ä»¶çš„æ—¶å€™ï¼Œç»å¸¸é‡åˆ°åŒä¸€ä¸ªè­¦å‘Šï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
	LANGUAGE = &amp;quot;en_US:&amp;quot;,
	LC_ALL = (unset),
	LC_CTYPE = &amp;quot;zh_CN.UTF-8&amp;quot;,
	LANG = &amp;quot;en_US&amp;quot;
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale (&amp;quot;en_US&amp;quot;).
locale: Cannot set LC_CTYPE to default locale: No such file or directory
locale: Cannot set LC_ALL to default locale: No such file or directory
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é‚£æ˜¯å› ä¸ºå®‰è£…è½¯ä»¶æ—¶ï¼Œéƒ½ä¼šå»æ‰§è¡Œä¸€ä¸ª &lt;code&gt;update-locale&lt;/code&gt; çš„å‘½ä»¤ï¼Œç”¨æ¥æ›´æ–° &lt;code&gt;locale&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªå‘½ä»¤æ˜¯ä¸€ä¸ªè„šæœ¬ï¼Œç”¨ perl å†™çš„ï¼Œå¯ä»¥ç”¨ &lt;code&gt;whereis update-locale&lt;/code&gt; æŸ¥åˆ°ï¼Œä½ç½®åœ¨ &lt;code&gt;/usr/sbin/update-locale&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¸Šè¿°æŠ¥é”™å¹¶ä¸æ˜¯å› ä¸º &lt;code&gt;update-locale&lt;/code&gt; å‘½ä»¤è€Œå¼•èµ·ï¼Œ&lt;code&gt;update-locale&lt;/code&gt; è¿™æ®µè„šæœ¬æ²¡æœ‰é—®é¢˜ï¼Œè€Œæ˜¯å› ä¸ºperlã€‚&lt;/p&gt;

&lt;p&gt;å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æµ‹è¯•ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;perl -e exit
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…¶å®ï¼ŒçœŸæ­£çš„åŸå› æ˜¯ perl ä¸ºç³»ç»Ÿä½¿ç”¨ &lt;code&gt;zh_CN.UTF-8&lt;/code&gt;ï¼Œä½†ç³»ç»Ÿå¹¶æ²¡æœ‰å®‰è£… &lt;code&gt;zh_CN.UTF-8&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯vpsæ¯”è¾ƒå¸¸è§ï¼Œå› ä¸ºä¸€èˆ¬éƒ½æ˜¯ç”¨ ssh çš„æ–¹å¼è¿æ¥åˆ° vps ä¸Šçš„ &lt;code&gt;sshd&lt;/code&gt; æœ‰è¿™ä¸ªæœºåˆ¶ï¼Œä¼šæŠŠå®¢æˆ·æœºä¸Šçš„è¯­è¨€ç¯å¢ƒå¸¦åˆ°è¿œç¨‹çš„æœºå™¨ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;å®¢æˆ·æœºä¸€èˆ¬éƒ½ä¼šè®¾ç½® &lt;code&gt;zh_CN.UTF-8&lt;/code&gt; è¯­è¨€ï¼Œç”¨æ¥æ˜¾ç¤ºä¸­æ–‡ï¼Œè€Œè¿œç«¯çš„vpsä¸€èˆ¬å°±åªæœ‰en_US.UTF-8ï¼Œzh_CN.UTF-8ä¸€æ—¦å¸¦è¿‡å»å°±ä¼šæŠ¥æ‰¾ä¸åˆ°çš„é”™è¯¯ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥å®‰è£…ä¸€ä¸ªä¸­æ–‡è¯­è¨€ï¼Œperlå°±ä¸ä¼šæŠ¥é”™äº†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo locale-gen zh_CN zh_CN.UTF-8
Generating locales...
  zh_CN.GB2312... done
  zh_CN.UTF-8... done
Generation complete.
$ sudo dpkg-reconfigure locales
Generating locales...
  en_US.UTF-8... done
  zh_CN.GB2312... up-to-date
  zh_CN.UTF-8... up-to-date
Generation complete.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™ä¸ªæ—¶å€™ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ &lt;code&gt;locale&lt;/code&gt; å½“å‰æœ‰å“ªäº›è¯­è¨€ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ locale
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;p&gt;å‚è€ƒ&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://stackoverflow.com/questions/2499794/how-to-fix-a-locale-setting-warning-from-perl&#34;&gt;How to fix a locale setting warning from Perl&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://ubuntuforums.org/showthread.php?t=1346581&#34;&gt;perl: warning: Setting locale failed.&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Use and Break Promise Chain</title>
      <link>http://nodejh.com/post/Use-and-Stop-Promise-Break-Chain/</link>
      <pubDate>Thu, 24 Nov 2016 22:19:49 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Use-and-Stop-Promise-Break-Chain/</guid>
      <description>

&lt;h2 id=&#34;abstract&#34;&gt;Abstract&lt;/h2&gt;

&lt;p&gt;æœ¬æ–‡ä¸»è¦è®²çš„æ˜¯å¦‚ä½•å®ç° Promise çš„é“¾å¼è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯ &lt;code&gt;promise().then().then().catch()&lt;/code&gt; çš„å½¢å¼ï¼Œç„¶åè®¨è®ºå¦‚ä½•åœ¨æŸä¸€ä¸ª &lt;code&gt;then()&lt;/code&gt; é‡Œé¢ä¸­æ­¢ Promiseã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ç¨‹åºä¸­ï¼Œåªè¦è¿”å›äº†ä¸€ä¸ª promise å¯¹è±¡ï¼Œå¦‚æœ promise å¯¹è±¡ä¸æ˜¯ Rejected æˆ– Fulfilled çŠ¶æ€ï¼Œthen æ–¹æ³•å°±ä¼šç»§ç»­è°ƒç”¨ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥å¤„ç†å¤šä¸ªå¼‚æ­¥é€»è¾‘ã€‚ä½†æœ‰æ—¶å€™æŸä¸ª then æ–¹æ³•çš„æ‰§è¡Œç»“æœå¯èƒ½ä¼šå†³å®šæ˜¯å¦éœ€è¦æ‰§è¡Œä¸‹ä¸€ä¸ª thenï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€ä¸­æ­¢ promiseï¼Œä¸»è¦æ€æƒ³å°±æ˜¯ä½¿ç”¨ reject æ¥ä¸­æ­¢ promise çš„ then ç»§ç»­æ‰§è¡Œã€‚&lt;/p&gt;

&lt;p&gt;â€œä¸­æ­¢â€è¿™ä¸ªè¯ä¸çŸ¥é“ç”¨å¾—æ˜¯å¦å‡†ç¡®ã€‚è¿™é‡Œå¯èƒ½è¿˜æ˜¯ &lt;code&gt;break&lt;/code&gt; çš„å«ä¹‰æ›´ç²¾ç¡®ï¼Œè·³å‡ºæœ¬æ¬¡ promiseï¼Œä¸ç»§ç»­æ‰§è¡Œåé¢çš„ then æ–¹æ³•ã€‚ä½† promise ä¾æ—§ä¼šç»§ç»­æ‰§è¡Œã€‚&lt;/p&gt;

&lt;h2 id=&#34;can-i-use-promises&#34;&gt;Can I use promises&lt;/h2&gt;

&lt;p&gt;å½“å‰æµè§ˆå™¨å¯¹ Promise çš„æ”¯æŒæƒ…å†µè§ä¸‹å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://caniuse.com/#search=promise&#34;&gt;http://caniuse.com/#search=promise&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2016-11-24-163312.jpg&#34; alt=&#34;caniusepromise&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;promise&#34;&gt;Promise&lt;/h2&gt;

&lt;p&gt;å…ˆç®€å•å¤ä¹ ä¸€ä¸‹ Promiseã€‚Promise å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªå¤„ç†å¼‚æ­¥çš„æ–¹æ³•ã€‚ä¸€èˆ¬å¯ä»¥é€šè¿‡ &lt;code&gt;new&lt;/code&gt; æ–¹æ³•æ¥è°ƒç”¨ &lt;code&gt;Promise&lt;/code&gt; çš„æ„é€ å™¨å®ä¾‹åŒ–ä¸€ä¸ª promise å¯¹è±¡ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;var promise = new Promise((resolve, reject) =&amp;gt; {
    // å¼‚æ­¥å¤„ç†
    // å¤„ç†ç»“æŸåï¼Œè°ƒç”¨ resolve æˆ– reject
    //      æˆåŠŸæ—¶å°±è°ƒç”¨ resolve
    //      å¤±è´¥æ—¶å°±è°ƒç”¨ reject
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç”¨ &lt;code&gt;new Promise&lt;/code&gt; å®ä¾‹åŒ–çš„ promise å¯¹è±¡æœ‰ä»¥ä¸‹ä¸‰ä¸ªçŠ¶æ€ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&amp;ldquo;has-resolution&amp;rdquo; - Fulfilledã€‚resolve(æˆåŠŸ)æ—¶ï¼Œæ­¤æ—¶ä¼šè°ƒç”¨ onFulfilled&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&amp;ldquo;has-rejection&amp;rdquo; - Rejectedã€‚reject(å¤±è´¥)æ—¶ï¼Œæ­¤æ—¶ä¼šè°ƒç”¨ onRejected&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&amp;ldquo;unresolved&amp;rdquo; - Pendingã€‚æ—¢ä¸æ˜¯resolveä¹Ÿä¸æ˜¯rejectçš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯promiseå¯¹è±¡åˆšè¢«åˆ›å»ºåçš„åˆå§‹åŒ–çŠ¶æ€ç­‰&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å…³äºä¸Šé¢è¿™ä¸‰ç§çŠ¶æ€çš„è¯»æ³•ï¼Œå…¶ä¸­å·¦ä¾§ä¸ºåœ¨ ES6 Promises è§„èŒƒä¸­å®šä¹‰çš„æœ¯è¯­ï¼Œ è€Œå³ä¾§åˆ™æ˜¯åœ¨ Promises/A+ ä¸­æè¿°çŠ¶æ€çš„æœ¯è¯­ã€‚åŸºæœ¬ä¸ŠçŠ¶æ€åœ¨ä»£ç ä¸­æ˜¯ä¸ä¼šæ¶‰åŠåˆ°çš„ï¼Œæ‰€ä»¥åç§°ä¹Ÿæ— éœ€å¤ªåœ¨æ„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2016-11-24-Use-and-Stop-Promise-Chain-promise-states.png&#34; alt=&#34;promise state&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;promise-chain&#34;&gt;Promise Chain&lt;/h2&gt;

&lt;p&gt;å…ˆæ¥å‡è®¾ä¸€ä¸ªä¸šåŠ¡éœ€æ±‚ï¼šåœ¨ç³»ç»Ÿä¸­ä½¿ç”¨æ•™åŠ¡ç³»ç»Ÿè´¦å·è¿›è¡Œç™»å½•ã€‚é¦–å…ˆç”¨æˆ·åœ¨ç™»å½•é¡µé¢è¾“å…¥ç”¨æˆ·åï¼ˆæ•™åŠ¡ç³»ç»Ÿè´¦å·ï¼‰å’Œå¯†ç ï¼ˆæ•™åŠ¡ç³»ç»Ÿå¯†ç ï¼‰ï¼›ç„¶ååˆ¤æ–­æ•°æ®åº“ä¸­æ˜¯å¦å­˜åœ¨è¯¥ç”¨æˆ·ï¼›å¦‚æœä¸å­˜åœ¨åˆ™ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç æ¨¡æ‹Ÿç™»å½•æ•™åŠ¡ç³»ç»Ÿï¼Œå¦‚æœæ¨¡æ‹Ÿç™»å½•æˆåŠŸï¼Œåˆ™å­˜å‚¨ç”¨æˆ·åå’Œå¯†ç ï¼Œå¹¶è¿”å›ç™»å½•æˆåŠŸã€‚&lt;/p&gt;

&lt;p&gt;å¬èµ·æ¥å°±æœ‰ç‚¹å¤æ‚å¯¹ä¸å¯¹ï¼Ÿäºæ˜¯ç”»äº†ä¸ªæµç¨‹å›¾æ¥è§£é‡Šæ•´ä¸ªä¸šåŠ¡é€»è¾‘ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2016-11-24-163823.jpg&#34; alt=&#34;flow char&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸Šå›¾åªæ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬ï¼Œæ¯”å¦‚å¯†ç åŠ å¯†ã€sessionè®¾ç½®ç­‰æ²¡æœ‰è¡¨ç°å‡ºæ¥ï¼Œå¤§å®¶çŸ¥é“å°±å¥½ã€‚å›¾ä¸­ &lt;code&gt;(1)&lt;/code&gt;ã€&lt;code&gt;(2)&lt;/code&gt;ã€&lt;code&gt;(3)&lt;/code&gt; ä¸‰ä¸ªåœ°æ–¹å°±æ˜¯ä¼šè¿›è¡Œå¼‚æ­¥å¤„ç†çš„åœ°æ–¹ï¼Œä¸€èˆ¬æ•°æ®åº“æ“ä½œã€ç½‘ç»œè¯·æ±‚éƒ½æ˜¯å¼‚æ­¥çš„ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœç”¨ä¼ ç»Ÿçš„å›è°ƒå‡½æ•° &lt;code&gt;callback&lt;/code&gt; æ¥å¤„ç†ä¸Šé¢çš„é€»è¾‘ï¼ŒåµŒå¥—çš„å±‚çº§å°±ä¼šæ¯”è¾ƒæ·±ï¼Œä¸Šé¢çš„ä¸šåŠ¡å› ä¸ºæœ‰ä¸‰ä¸ªå¼‚æ­¥æ“ä½œæ‰€ä»¥æœ‰ä¸‰å±‚å›è°ƒï¼Œä»£ç å¤§æ¦‚ä¼šæ˜¯ä¸‹é¢çš„æ ·å­ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// æ ¹æ® name æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
findUserByName(name, function(err, userinfo) {
  if (err) {
    return res.json({
      code: 1000,
      message: &#39;æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œæ•°æ®åº“æ“ä½œæ•°å‡ºç°å¼‚å¸¸&#39;,
    });
  }


  if (userinfo.length &amp;gt; 0) {
  // ç”¨æˆ·å­˜åœ¨
  if (userinfo[0].pwd === pwd)
    // å¯†ç æ­£ç¡®
    return res.json({
      code: 0,
      message: &#39;ç™»å½•æˆåŠŸ&#39;,
    });
  }

  // æ•°æ®åº“ä¸­ä¸å­˜åœ¨è¯¥ç”¨æˆ·ï¼Œæ¨¡æ‹Ÿç™»å½•æ•™åŠ¡ç³»ç»Ÿ
  loginEducationSystem(name, pwd, function(err, result) {
    if (err) {
      return res.json({
        code: 1001,
        message: &#39;æ¨¡æ‹Ÿç™»å½•æ•™åŠ¡ç³»ç»Ÿå‡ºç°å¼‚å¸¸&#39;,
      });
    }

    // çº¦å®šæ­£ç¡®æƒ…å†µä¸‹ï¼Œcode ä¸º 0
    if (result.code !== 0) {
      return res.json({
        code: 1002,
        message: &#39;æ¨¡æ‹Ÿç™»å½•æ•™åŠ¡ç³»ç»Ÿå¤±è´¥ï¼Œå¯èƒ½æ˜¯ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&#39;,
      });
    }

    // æ¨¡æ‹Ÿç™»å½•æˆåŠŸï¼Œå°†ç”¨æˆ·åå¯†ç å­˜å…¥æ•°æ®åº“
    saveUserToDB(name, pwd, function(err, result) {
      if (err) {
        return res.json({
          code: 1003,
          message: &#39;å°†ç”¨æˆ·åå¯†ç å­˜å…¥æ•°æ®åº“å‡ºç°å¼‚å¸¸&#39;,
        });
      }
      if (result.code !== 0) {
        return res.json({
          code: 1004,
          message: &#39;å°†ç”¨æˆ·åå¯†ç å­˜å…¥æ•°æ®åº“å‡ºç°å¼‚å¸¸&#39;,
        });
      }

      return res.json({
        code: 0,
        message: &#39;ç™»å½•æˆåŠŸ!&#39;,
      });
    });
  });
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç å¯èƒ½å­˜åœ¨çš„ä¸ä¼˜é›…ä¹‹å¤„ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;éšç€ä¸šåŠ¡é€»è¾‘å˜è´Ÿè´£ï¼Œå›è°ƒå±‚çº§ä¼šè¶Šæ¥è¶Šæ·±&lt;/li&gt;
&lt;li&gt;ä»£ç è€¦åˆåº¦æ¯”è¾ƒé«˜ï¼Œä¸æ˜“ä¿®æ”¹&lt;/li&gt;
&lt;li&gt;æ¯ä¸€æ­¥æ“ä½œéƒ½éœ€è¦æ‰‹åŠ¨è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œæ¯”è¾ƒéº»çƒ¦&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ¥ä¸‹æ¥å†ç”¨ promise å®ç°æ­¤å¤„çš„ä¸šåŠ¡éœ€æ±‚ã€‚ä½¿ç”¨ promise ç¼–ç ä¹‹å‰ï¼Œå¯ä»¥å…ˆæ€è€ƒä¸¤ä¸ªé—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€æ˜¯å¦‚ä½•é“¾å¼è°ƒç”¨ï¼ŒäºŒæ˜¯å¦‚ä½•ä¸­æ­¢é“¾å¼è°ƒç”¨ã€‚&lt;/p&gt;

&lt;h2 id=&#34;how-to-use-promise-chain&#34;&gt;How to Use Promise Chain&lt;/h2&gt;

&lt;p&gt;ä¸šåŠ¡ä¸­æœ‰ä¸‰ä¸ªéœ€è¦å¼‚æ­¥å¤„ç†çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä¼šåˆ†åˆ«å®ä¾‹åŒ–ä¸‰ä¸ª promise å¯¹è±¡ï¼Œç„¶åå¯¹ promise è¿›è¡Œé“¾å¼è°ƒç”¨ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•è¿›è¡Œé“¾å¼è°ƒç”¨ï¼Ÿ&lt;/p&gt;

&lt;p&gt;å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥åœ¨ promise çš„ then æ–¹æ³•é‡Œé¢è¿”å›å¦ä¸€ä¸ª promise å³å¯ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;function start() {
  return new Promise((resolve, reject) =&amp;gt; {
    resolve(&#39;start&#39;);
  });
}

start()
  .then(data =&amp;gt; {
    // promise start
    console.log(&#39;result of start: &#39;, data);
    return Promise.resolve(1); // p1
  })
  .then(data =&amp;gt; {
    // promise p1
    console.log(&#39;result of p1: &#39;, data);
    return Promise.reject(2); // p2
  })
  .then(data =&amp;gt; {
    // promise p2
    console.log(&#39;result of p2: &#39;, data);
    return Promise.resolve(3); // p3
  })
  .catch(ex =&amp;gt; {
    // promise p3
    console.log(&#39;ex: &#39;, ex);
    return Promise.resolve(4); // p4
  })
  .then(data =&amp;gt; {
    // promise p4
    console.log(&#39;result of p4: &#39;, data);
  });

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç æœ€ç»ˆä¼šè¾“å‡ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;result of start:  start
result of p1:  1
ex:  2
result of p4:  4
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»£ç çš„æ‰§è¡Œé€»è¾‘å¦‚å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://oh1ywjyqf.bkt.clouddn.com/blog/2016-11-24-175131.jpg&#34; alt=&#34;promise chain&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºæ¥ï¼Œä»£ç çš„æ‰§è¡Œé€»è¾‘æ˜¯ &lt;code&gt;promise start --&amp;gt; promise p1 --&amp;gt; promise p3 --&amp;gt; promise p4&lt;/code&gt;ã€‚æ‰€ä»¥ç»“åˆè¾“å‡ºç»“æœå’Œæ‰§è¡Œé€»è¾‘å›¾ï¼Œæ€»ç»“å‡ºä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;promise çš„ then æ–¹æ³•é‡Œé¢å¯ä»¥ç»§ç»­è¿”å›ä¸€ä¸ªæ–°çš„ promise å¯¹è±¡&lt;/li&gt;
&lt;li&gt;ä¸‹ä¸€ä¸ª then æ–¹æ³•çš„å‚æ•°æ˜¯ä¸Šä¸€ä¸ª promise å¯¹è±¡çš„ resolve å‚æ•°&lt;/li&gt;
&lt;li&gt;catch æ–¹æ³•çš„å‚æ•°æ˜¯å…¶ä¹‹å‰æŸä¸ª promise å¯¹è±¡çš„ rejecte å‚æ•°&lt;/li&gt;
&lt;li&gt;ä¸€æ—¦æŸä¸ª then æ–¹æ³•é‡Œé¢çš„ promise çŠ¶æ€æ”¹å˜ä¸ºäº† rejectedï¼Œåˆ™promise æ–¹æ³•è¿ä¼šè·³è¿‡åé¢çš„ then ç›´æ¥æ‰§è¡Œ catch&lt;/li&gt;
&lt;li&gt;catch æ–¹æ³•é‡Œé¢ä¾æ—§å¯ä»¥è¿”å›ä¸€ä¸ªæ–°çš„ promise å¯¹è±¡&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;how-to-break-promise-chain&#34;&gt;How to Break Promise Chain&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹æ¥å°±è¯¥è®¨è®ºå¦‚ä½•ä¸­æ­¢ promise æ–¹æ³•é“¾äº†ã€‚&lt;/p&gt;

&lt;p&gt;é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ promise çš„çŠ¶æ€æ”¹å˜ä¸º rejected åï¼Œpromise å°±ä¼šè·³è¿‡åé¢çš„ then æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;ä¹Ÿå°±æ˜¯ï¼ŒæŸä¸ª then é‡Œé¢å‘ç”Ÿå¼‚å¸¸åï¼Œå°±ä¼šè·³è¿‡ then æ–¹æ³•ï¼Œç›´æ¥æ‰§è¡Œ catchã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œå½“åœ¨æ„é€ çš„ promise æ–¹æ³•é“¾ä¸­ï¼Œå¦‚æœåœ¨æŸä¸ª then åé¢ï¼Œä¸éœ€è¦å†æ‰§è¡Œ then æ–¹æ³•äº†ï¼Œå°±å¯ä»¥æŠŠå®ƒå½“ä½œä¸€ä¸ªå¼‚å¸¸æ¥å¤„ç†ï¼Œè¿”å›ä¸€ä¸ªå¼‚å¸¸ä¿¡æ¯ç»™ catchï¼Œå…¶å‚æ•°å¯è‡ªå®šä¹‰ï¼Œæ¯”å¦‚è¯¥å¼‚å¸¸çš„å‚æ•°ä¿¡æ¯ä¸º &lt;code&gt;{ notRealPromiseException: true}&lt;/code&gt;ï¼Œç„¶ååœ¨ catch é‡Œé¢åˆ¤æ–­ä¸€ä¸‹ &lt;code&gt;notRealPromiseException&lt;/code&gt; æ˜¯å¦ä¸º &lt;code&gt;true&lt;/code&gt;ï¼Œå¦‚æœä¸º &lt;code&gt;true&lt;/code&gt;ï¼Œå°±è¯´æ˜ä¸æ˜¯ç¨‹åºå‡ºç°å¼‚å¸¸ï¼Œè€Œæ˜¯åœ¨æ­£å¸¸é€»è¾‘é‡Œé¢ä¸­æ­¢ then æ–¹æ³•çš„æ‰§è¡Œã€‚&lt;/p&gt;

&lt;p&gt;ä»£ç å¤§æ¦‚å°±è¿™æ ·ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;start()
  .then(data =&amp;gt; {
    // promise start
    console.log(&#39;result of start: &#39;, data);
    return Promise.resolve(1); // p1
    )
  .then(data =&amp;gt; {
    // promise p1
    console.log(&#39;result of p1: &#39;, data);
    return Promise.reject({
      notRealPromiseException: true,
    }); // p2
  })
  .then(data =&amp;gt; {
    // promise p2
    console.log(&#39;result of p2: &#39;, data);
    return Promise.resolve(3); // p3
  })
  .catch(ex =&amp;gt; {
    console.log(&#39;ex: &#39;, ex);
    if (ex.notRealPromiseException) {
      // ä¸€åˆ‡æ­£å¸¸ï¼Œåªæ˜¯é€šè¿‡ catch æ–¹æ³•æ¥ä¸­æ­¢ promise chain
      // ä¹Ÿå°±æ˜¯ä¸­æ­¢ promise p2 çš„æ‰§è¡Œ
      return true;
    }
    // çœŸæ­£å‘ç”Ÿå¼‚å¸¸
    return false;
  });
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·çš„åšæ³•å¯èƒ½ä¸ç¬¦åˆ &lt;code&gt;catch&lt;/code&gt; çš„è¯­ä¹‰ã€‚ä¸è¿‡ä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œpromise æ–¹æ³•é“¾æ²¡æœ‰ç»§ç»­æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥ç®—æ˜¯ä¸€ç§â€œå¼‚å¸¸â€ã€‚&lt;/p&gt;

&lt;h2 id=&#34;refactor-callback-with-promise&#34;&gt;Refactor Callback with Promise&lt;/h2&gt;

&lt;p&gt;è®²äº†é‚£ä¹ˆå¤šé“ç†ï¼Œç°åœ¨å°±æ”¹æ¥ä½¿ç”¨ promise é‡æ„ä¹‹å‰ç”¨å›è°ƒå‡½æ•°å†™çš„å¼‚æ­¥é€»è¾‘äº†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// æ® name æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
const findUserByName = (name, pwd) =&amp;gt; {
  return new Promise((resolve, reject) =&amp;gt; {
    // æ•°æ®åº“æŸ¥è¯¢æ“ä½œ
    if (dbError) {
      // æ•°æ®åº“æŸ¥è¯¢å‡ºé”™ï¼Œå°† promise è®¾ç½®ä¸º rejected
      reject({
        code: 1000,
        message: &#39;æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œæ•°æ®åº“æ“ä½œæ•°å‡ºç°å¼‚å¸¸&#39;,
      });
    }
    // å°†æŸ¥è¯¢ç»“æœèµ‹ç»™ userinfo å˜é‡
    if (userinfo.length === 0) {
      // æ•°æ®åº“ä¸­ä¸å­˜åœ¨è¯¥ç”¨æˆ·
      resolve();
    }
    // æ•°æ®åº“å­˜åœ¨è¯¥ç”¨æˆ·ï¼Œåˆ¤æ–­å¯†ç æ˜¯å¦æ­£ç¡®
    if (pwd === userinfo[0].pwd) {
      // å¯†ç æ­£ç¡®ï¼Œä¸­æ­¢ promise æ‰§è¡Œ
      reject({
        notRealPromiseException: true,
        data: {
          code: 0,
          message: &#39;å¯†ç æ­£ç¡®ï¼Œç™»å½•æˆåŠŸ&#39;,
        }
      });
    }
    // å¯†ç ä¸æ­£ç¡®ï¼Œç™»å½•å¤±è´¥ï¼Œå°† Promise è®¾ç½®ä¸º Rejected çŠ¶æ€
    reject({
      code: 1001,
      message: &#39;å¯†ç ä¸æ­£ç¡®ï¼Œç™»å½•å¤±è´¥&#39;,
    });
  });
};


// æ¨¡æ‹Ÿç™»å½•æ•™åŠ¡ç³»ç»Ÿ
const loginEducationSystem = (name, pwd) =&amp;gt; {
  // ç™»å½•é€»è¾‘...
  // ç™»å½•æˆåŠŸ
  resolve();
  // ç™»å½•å¤±è´¥
  reject({
    code: 1002,
    message: &#39;æ¨¡æ‹Ÿç™»å½•æ•™åŠ¡ç³»ç»Ÿå¤±è´¥&#39;,
  });
};


// å°†ç”¨æˆ·åå¯†ç å­˜å…¥æ•°æ®åº“
const saveUserToDB(name, pwd) =&amp;gt; {
  // æ•°æ®åº“å­˜å‚¨æ“ä½œ
  if (dbError) {
    // æ•°æ®åº“å­˜å‚¨å‡ºé”™ï¼Œå°† promise è®¾ç½®ä¸º rejected
    reject({
      code: 1004,
      message: &#39;æ•°æ®åº“å­˜å‚¨å‡ºé”™ï¼Œå°†å‡ºç°å¼‚å¸¸&#39;,
    });
  }
  // æ•°æ®åº“å­˜å‚¨æ“ä½œæˆåŠŸ
  resolve();
};


findUserByName(name)
.then(() =&amp;gt; {
  return loginEducationSystem(name, pwd);
})
.then(() =&amp;gt; {
  return saveUserToDB(name, pwd);
})
.catch(e =&amp;gt; {
  // åˆ¤æ–­å¼‚å¸¸å‡ºç°åŸå› 
  if (e.notRealPromiseException) {
    // æ­£å¸¸ä¸­æ­¢ promise è€Œæ•…æ„è®¾ç½®çš„å¼‚å¸¸
    return res.json(e.data);
  }
  // å‡ºç°é”™è¯¯æˆ–å¼‚å¸¸
  return res.json(e);
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå®ä¾‹åŒ–äº†ä¸‰ä¸ª promise å¯¹è±¡ï¼Œåˆ†åˆ«å®ç°ä¸šåŠ¡éœ€æ±‚ä¸­çš„ä¸‰ä¸ªåŠŸèƒ½ã€‚ç„¶åé€šè¿‡ promise æ–¹æ³•é“¾æ¥è°ƒç”¨ã€‚ç›¸æ¯”ç”¨å›è°ƒå‡½æ•°è€Œè¨€ï¼Œä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œä¹Ÿæ›´æ˜“è¯»æ˜“æ‡‚è€¦åˆåº¦æ›´ä½æ›´æ˜“æ‰©å±•äº†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;promise-all-promise-race&#34;&gt;Promise.all &amp;amp;&amp;amp; Promise.race&lt;/h2&gt;

&lt;p&gt;ä»”ç»†è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œåœ¨ä¸Šé¢çš„ promise ä»£ç ä¸­ï¼Œ&lt;code&gt;loginEducationSystem&lt;/code&gt; å’Œ &lt;code&gt;saveUserToDB&lt;/code&gt; ä¸¤ä¸ªæ–¹æ³•æ‰§è¡Œæœ‰å…ˆåé¡ºåºè¦æ±‚ï¼Œä½†æ²¡æœ‰æ•°æ®ä¼ é€’ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å® promise æ–¹æ³•é“¾æ›´å¥½ç”¨çš„ä¸€ç‚¹æ˜¯ï¼Œå½“ä¸‹ä¸€ä¸ªæ“ä½œä¾èµ–äºä¸Šä¸€ä¸ªæ“ä½œçš„ç»“æœçš„æ—¶å€™ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°é€šè¿‡ then æ–¹æ³•çš„å‚æ•°æ¥ä¼ é€’æ•°æ®ã€‚å‰é¢é¡µæåˆ°è¿‡ï¼Œä¸‹ä¸€ä¸ª then æ–¹æ³•çš„å‚æ•°å°±æ˜¯ä¸Šä¸€ä¸ª then æ–¹æ³•é‡Œé¢ &lt;code&gt;resolve&lt;/code&gt; çš„å‚æ•°ï¼Œæ‰€ä»¥å½“ç„¶å°±å¯ä»¥æŠŠä¸Šä¸€ä¸ª then æ–¹æ³•çš„æ‰§è¡Œç»“æœä½œä¸ºå‚æ•°ä¼ é€’ç»™ä¸‹ä¸€ä¸ª then æ–¹æ³•äº†ã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰äº›æ—¶å€™ï¼Œå¯èƒ½ then æ–¹æ³•çš„æ‰§è¡Œé¡ºåºä¹Ÿæ²¡æœ‰å¤ªå¤šè¦æ±‚ï¼Œåªéœ€è¦ promise æ–¹æ³•é“¾ä¸­çš„ä¸¤ä¸ªæˆ–å¤šä¸ª promise å…¨éƒ¨éƒ½æ‰§è¡Œæ­£ç¡®ã€‚è¿™æ—¶ï¼Œå¦‚æœä¾æ—§ä¸€ä¸ªä¸€ä¸ªå»å†™ then å¯èƒ½å°±æ¯”è¾ƒéº»çƒ¦ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;function p1() {
  return new Promise((resolve) =&amp;gt; {
    console.log(1);
    resolve();
  });
}

function p2() {
  return new Promise((resolve) =&amp;gt; {
    console.log(2);
    resolve();
  });
}

function p3() {
  return new Promise((resolve) =&amp;gt; {
    console.log(3);
    resolve();
  });
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç°åœ¨åªéœ€è¦ &lt;code&gt;p1&lt;/code&gt; &lt;code&gt;p2&lt;/code&gt;  &lt;code&gt;p3&lt;/code&gt; è¿™ä¸‰ä¸ª promise éƒ½æ‰§è¡Œï¼Œå¹¶ä¸” promise æœ€ç»ˆçŠ¶æ€éƒ½æ˜¯ Fulfilledï¼Œé‚£ä¹ˆå¦‚æœè¿˜æ˜¯ä½¿ç”¨æ–¹æ³•é“¾ï¼Œè¿™æ˜¯è¿™æ ·è°ƒç”¨ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;p1()
.then(() =&amp;gt; {
  return p2();
})
.then(() =&amp;gt; {
  return p3();
})
.then(() =&amp;gt; {
  console.log(&#39;all done&#39;);
})
.catch(e =&amp;gt; {
  console.log(&#39;e: &#39;, e);
});

// è¾“å‡ºç»“æœï¼š
// 1
// 2
// 3
// all done
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»£ç è²Œä¼¼å°±ä¸é‚£ä¹ˆç²¾ç‚¼äº†ã€‚è¿™ä¸ªæ—¶å€™å°±æœ‰äº† &lt;code&gt;Promise.all&lt;/code&gt; è¿™ä¸ªæ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Promise.all&lt;/code&gt; æ¥æ”¶ä¸€ä¸ª promiseå¯¹è±¡çš„æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå½“è¿™ä¸ªæ•°ç»„é‡Œçš„æ‰€æœ‰ promise å¯¹è±¡å…¨éƒ¨å˜ä¸º resolve æˆ– reject çŠ¶æ€çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šå»è°ƒç”¨ &lt;code&gt;then&lt;/code&gt; æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;äºæ˜¯ï¼Œè°ƒç”¨è¿™å‡ ä¸ª promise çš„ä»£ç å°±å¯ä»¥è¿™æ ·å†™äº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;p1()
.then(() =&amp;gt; {
  return Promise.all([
    p2(),
    p3(),
  ]);
})
.then(() =&amp;gt; {
  console.log(&#39;all done&#39;);
})
.catch((e) =&amp;gt; {
  console.log(&#39;e: &#39;, e);
});

// è¾“å‡ºç»“æœï¼š
// 1
// 2
// 3
// all done
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·çœ‹èµ·æ¥è²Œä¼¼å°±ç²¾ç‚¼äº›äº†ã€‚&lt;/p&gt;

&lt;p&gt;è€Œå¯¹äº &lt;code&gt;Promise.race&lt;/code&gt;ï¼Œå…¶å‚æ•°ä¹Ÿè·Ÿ &lt;code&gt;Promise.all&lt;/code&gt; ä¸€æ ·æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚åªæ˜¯æ•°ç»„ä¸­çš„ä»»ä½•ä¸€ä¸ª promise å¯¹è±¡å¦‚æœå˜ä¸º resolve æˆ–è€…reject çš„è¯ï¼Œè¯¥å‡½æ•°å°±ä¼šè¿”å›ï¼Œå¹¶ä½¿ç”¨è¿™ä¸ª promise å¯¹è±¡çš„å€¼è¿›è¡Œ resolve æˆ–è€… rejectã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œå°±ä¸ä¸¾ä¾‹äº†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å°±åŸºæœ¬äº†è§£äº† Promise çš„ç”¨æ³•åŠç‰¹ç‚¹ï¼Œå¹¶å®ç°ç”¨ Promise é‡æ„ç”¨å›è°ƒå‡½æ•°å†™çš„å¼‚æ­¥æ“ä½œã€‚ç°åœ¨å¯¹ Promise çš„ä½¿ç”¨ï¼Œåº”è¯¥é©¾è½»å°±ç†Ÿäº†ã€‚&lt;/p&gt;

&lt;p&gt;å®Œã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Github Issue: &lt;a href=&#34;https://github.com/nodejh/nodejh.github.io/issues/23&#34;&gt;https://github.com/nodejh/nodejh.github.io/issues/23&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Symmetric Difference</title>
      <link>http://nodejh.com/post/Symmetric-Difference/</link>
      <pubDate>Sat, 29 Oct 2016 00:43:22 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Symmetric-Difference/</guid>
      <description>&lt;p&gt;&lt;strong&gt;é¢˜ç›®&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ï¼Œè¿”å›æ‰€ç»™æ•°ç»„çš„ å¯¹ç­‰å·®åˆ†(symmetric difference) (â–³ or âŠ•)æ•°ç»„.&lt;/p&gt;

&lt;p&gt;ç»™å‡ºä¸¤ä¸ªé›†åˆ (å¦‚é›†åˆ A = {1, 2, 3} å’Œé›†åˆ B = {2, 3, 4}), è€Œæ•°å­¦æœ¯è¯­ &amp;ldquo;å¯¹ç­‰å·®åˆ†&amp;rdquo; çš„é›†åˆå°±æ˜¯æŒ‡ç”±æ‰€æœ‰åªåœ¨ä¸¤ä¸ªé›†åˆå…¶ä¸­ä¹‹ä¸€çš„å…ƒç´ ç»„æˆçš„é›†åˆ(A â–³ B = C = {1, 4}). å¯¹äºä¼ å…¥çš„é¢å¤–é›†åˆ (å¦‚ D = {2, 3}), ä½ åº”è¯¥å®‰è£…å‰é¢åŸåˆ™æ±‚å‰ä¸¤ä¸ªé›†åˆçš„ç»“æœä¸æ–°é›†åˆçš„å¯¹ç­‰å·®åˆ†é›†åˆ (C â–³ D = {1, 4} â–³ {2, 3} = {1, 2, 3, 4}).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è§£é¢˜æ€è·¯&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;a href=&#34;https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce&#34;&gt;Array.prototype.reduce&lt;/a&gt; å¯¹æ•°ç»„è¿›è¡Œéå†ã€‚ä¼ å…¥çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ prev (å¯¹ç­‰å·®åˆ†åæ•°ç»„)ï¼Œcurrï¼ˆå½“å‰æ•°ç»„ï¼‰&lt;/li&gt;
&lt;li&gt;å°† sym() çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºåˆå§‹å¯¹ç­‰å·®åˆ†æ•°ç»„ï¼Œå³ç¬¬ä¸€ä¸ª prev&lt;/li&gt;
&lt;li&gt;å¯¹ prev æ•°ç»„å’Œ curr æ•°ç»„å»é‡ï¼Œé˜²æ­¢é‡å¤å…ƒç´ å½±å“å¯¹ç­‰å·®åˆ†çš„ç»“æœ&lt;/li&gt;
&lt;li&gt;éå† curr æ•°ç»„ï¼Œä»¥æ­¤åˆ¤æ–­ curr æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ˜¯å¦åœ¨ prev ä¸­å‡ºç°ã€‚å¦‚æœå‡ºç°ï¼Œåˆ™ä» prev ä¸­åˆ é™¤è¯¥å…ƒç´ ï¼›å¦‚æœæ²¡æœ‰å‡ºç°ï¼Œåˆ™å°†å…¶åŠ å…¥åˆ° prev ä¸­&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// å¯¹ç­‰å·®åˆ†
function sym(args) {
  var arr = Array.prototype.slice.call(arguments);
  return arr.reduce(function(prev, curr) {
      prev = unique(prev);
      curr = unique(curr);
      for (var i=0; i&amp;lt;curr.length; i++) {
          if (prev.indexOf(curr[i]) === -1) {
             prev.push(curr[i]);
          } else {
              prev.splice(prev.indexOf(curr[i]), 1);
          }
          console.log(&#39;new: &#39;, prev);
      }
      return prev.sort();
  });
}


// æ•°ç»„å»é‡
function unique(arr) {
    var res = [];
    for (var i=0; i&amp;lt;arr.length; i++) {
        if (res.indexOf(arr[i]) === -1) {
            res.push(arr[i]);
        }
    }
    return res;
}


// sym([1, 2, 3], [5, 2, 1, 4]);
sym([1, 1, 2, 5], [2, 2, 3, 5], [3, 4, 5, 5])

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿è¡Œæ•ˆæœï¼š&lt;a href=&#34;https://www.freecodecamp.cn/challenges/symmetric-difference&#34;&gt;Symmetric Difference&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Github Issue: &lt;a href=&#34;https://github.com/nodejh/nodejh.github.io/issues/1&#34;&gt;https://github.com/nodejh/nodejh.github.io/issues/1&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Build MXNet on macOS</title>
      <link>http://nodejh.com/post/Install-MXNet-on-macOS/</link>
      <pubDate>Thu, 27 Oct 2016 15:37:29 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Install-MXNet-on-macOS/</guid>
      <description>

&lt;p&gt;MXNet æ˜¯ä¸€ä¸ªæ·±åº¦å­¦ä¹ ç³»ç»Ÿã€‚å…³äº MXNet çš„ä»‹ç»å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š&lt;a href=&#34;https://github.com/dmlc/mxnet/issues/797&#34;&gt;ã€ŠMXNetè®¾è®¡å’Œå®ç°ç®€ä»‹ã€‹&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ macOS ä¸Šç¼–è¯‘å®‰è£… MXNet çš„å¤§ä½“æ­¥éª¤éƒ½æ˜¯æŒ‰ç…§å®˜æ–¹æ–‡æ¡£æ¥è¿›è¡Œå®‰è£…å³å¯ã€‚ä½†ç”±äºæ¯ä¸ªäººç”µè„‘ç¯å¢ƒä¸åŒï¼Œæ‰€ä»¥å¯èƒ½ä¼šå‡ºç°ä¸€äº›ä¾èµ–åº“ï¼åŒ…çš„ç¼ºå¤±ï¼Œå¯¼è‡´å®‰è£…å¤±è´¥ã€‚&lt;/p&gt;

&lt;h4 id=&#34;å®‰è£…ä¾èµ–è½¯ä»¶&#34;&gt;å®‰è£…ä¾èµ–è½¯ä»¶&lt;/h4&gt;

&lt;p&gt;åœ¨ macOS ä¸Šï¼Œé¦–å…ˆéœ€è¦å…·æœ‰ä»¥ä¸‹è½¯ä»¶ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Homebrew (to install dependencies)&lt;/li&gt;
&lt;li&gt;Git (to pull code from GitHub)&lt;/li&gt;
&lt;li&gt;Homebrew/science (for linear algebraic operations)&lt;/li&gt;
&lt;li&gt;OpenCV (for computer vision operations)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¦‚æœä¸Šè¿°å·²ç»å®‰è£…äº†ï¼Œå°±ä¸éœ€è¦å†å®‰è£…ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤å®‰è£…ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# å®‰è£… Homebrew
$ /usr/bin/ruby -e &amp;quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&amp;quot;
# å®‰è£… Git å’Œ OpenCV
$ brew update
$ brew install git
$ brew tap homebrew/science
$ brew info opencv
$ brew install opencv
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;ç¼–è¯‘-mxnet&#34;&gt;ç¼–è¯‘ MXNet&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;# ä¸‹è½½æºç 
$ git clone --recursive https://github.com/dmlc/mxnet
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åè¿˜éœ€è¦å®‰è£… &lt;code&gt;openblas&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# å®‰è£… openblas
$ brew install --fresh -vd openblas
...
Generally there are no consequences of this for you. If you build your
own software and it requires this formula, you&#39;ll need to add to your
build variables:

    LDFLAGS:  -L/usr/local/opt/openblas/lib
    CPPFLAGS: -I/usr/local/opt/openblas/include

==&amp;gt; Summary
ğŸº  /usr/local/Cellar/openblas/0.2.18_2: 20 files, 41.8M, built in 12 minutes 33 seconds
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚æœæ²¡æœ‰å®‰è£… &lt;code&gt;openblas&lt;/code&gt;ï¼Œåˆ™ä¼šæœ‰ç±»ä¼¼ &lt;code&gt;fatal error: &#39;cblas.h&#39; file not found&lt;/code&gt; çš„é”™è¯¯ï¼Œè¯¦è§ &lt;a href=&#34;https://github.com/dmlc/mxnet/issues/572&#34;&gt;https://github.com/dmlc/mxnet/issues/572&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ cd mxnet
$ cp make/osx.mk ./config.mk
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç”¨ vim æˆ–å…¶ä»–ç¼–è¾‘å™¨æ‰“å¼€ &lt;code&gt;config.mk&lt;/code&gt;ï¼Œåœ¨ &lt;code&gt;USE_BLAS = apple&lt;/code&gt; ä¸‹é¢åŠ å…¥å¦‚ä¸‹ &lt;code&gt;ADD_LDFLAGS = -I/usr/local/opt/openblas/lib&lt;/code&gt; å’Œ &lt;code&gt;ADD_CFLAGS =  -I/usr/local/opt/openblas/include&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;USE_BLAS = apple
ADD_LDFLAGS = -I/usr/local/opt/openblas/lib
ADD_CFLAGS =  -I/usr/local/opt/openblas/include
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ€åå†ç¼–è¯‘å³å¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ make -j$(sysctl -n hw.ncpu)
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;åœ¨-python-ä¸­ä½¿ç”¨-mxnet&#34;&gt;åœ¨ Python ä¸­ä½¿ç”¨ MXNet&lt;/h4&gt;

&lt;p&gt;ç¼–è¯‘å®‰è£…å®Œæˆä¹‹åï¼Œè‹¥è¦ä½¿ç”¨ MXNet çš„ Python æ¥å£ï¼Œè¿˜éœ€è¦å°† mxnet/python æ·»åŠ åˆ° Python çš„åŒ…æœç´¢è·¯å¾„ã€‚è‡³å°‘æœ‰ä¸‰ç§æ–¹å¼å¯ä»¥å®ç°ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1. python ä»£ç æ‰‹åŠ¨åŠ è½½&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;import os, sys;
cur_path = os.path.abspath(os.path.dirname(__file__));
mxnet_lib_path = os.path.join(cur_path, &#39;mxnet/python&#39;);
sys.path.append(mxnet_lib_path);
import mxnet as mx;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨æ²¡æœ‰å°† &lt;code&gt;mxnet/python&lt;/code&gt; æ·»åŠ åˆ° PYTHONPATH ä¹‹å‰ï¼Œä¾æ—§å¯ä»¥è¿è¡Œ &lt;code&gt;/example/image-classification&lt;/code&gt; é‡Œé¢çš„ä¸€äº›æµ‹è¯•æ¡ˆä¾‹ï¼Œå°±æ˜¯å› ä¸ºæ¡ˆä¾‹é‡Œé¢æœ‰ä¸€è¡Œ &lt;code&gt;import find_mxnet&lt;/code&gt;ï¼Œè€Œ &lt;code&gt;find_mxnet&lt;/code&gt; çš„ä½œç”¨å°±æ˜¯æ‰‹åŠ¨åŠ è½½ &lt;code&gt;mxnet/python&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# find_mxnet.py
try:
    import mxnet as mx
except ImportError:
    import os, sys
    curr_path = os.path.abspath(os.path.dirname(__file__))
    sys.path.append(os.path.join(curr_path, &amp;quot;../../python&amp;quot;))
    import mxnet as mx

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;2. å°†è·¯å¾„åŠ åˆ°ç¯å¢ƒå˜é‡ PYTHONPATH ä¸­&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è¿™ç§æ–¹æ³•éœ€è¦ä¿®æ”¹ shell çš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœä½¿ç”¨çš„ bashï¼Œåˆ™ä¿®æ”¹ &lt;code&gt;~/.bashrc&lt;/code&gt;ï¼›è‹¥ä½¿ç”¨çš„æ˜¯ zshï¼Œåˆ™ä¿®æ”¹ &lt;code&gt;~/.zshrc&lt;/code&gt;ï¼›å…¶ä»–ç±»ä¼¼ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ bash é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä¸‹é¢è¿™ä¸€è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;export PYTHONPATH=path_to_mxnet_root/python
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…¶ä¸­ &lt;code&gt;path_to_mxnet_root&lt;/code&gt; æ˜¯ä¸‹è½½çš„ mxnet æºç ç›®å½•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;3. å…¨å±€å®‰è£… mxnet&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ç›´æ¥è¿è¡Œ &lt;code&gt;mxnet/python/setup.py&lt;/code&gt;ï¼Œå°† mxnet æ·»åŠ åˆ°å…¨å±€è·¯å¾„å³å¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;python setup.py install --user
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿è¡Œä¸Šé¢çš„å‘½ä»¤åï¼Œè„šæœ¬ä¼šåœ¨ &lt;code&gt;~/.local&lt;/code&gt; ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª &lt;code&gt;lib&lt;/code&gt; ç›®å½•ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª &lt;code&gt;python-2.7/site-packages&lt;/code&gt; æ–‡ä»¶å¤¹ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæ˜¯ &lt;code&gt;sudo python setup.py install&lt;/code&gt;ï¼Œåˆ™ä¸Šé¢çš„ç›®å½•ä¼šåœ¨ &lt;code&gt;/usr/lib&lt;/code&gt; ä¸‹ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://mxnet.io/get_started/setup.html#build-mxnet-on-os-x-mac&#34;&gt;Build MXNet on OS X (Mac)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.cnblogs.com/dengdan890730/p/5587542.html&#34;&gt;mxnetçš„pythonåŒ…å¯¼å…¥çš„å‰å‰åå&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;Github Issue: &lt;a href=&#34;https://github.com/nodejh/nodejh.github.io/issues/10&#34;&gt;https://github.com/nodejh/nodejh.github.io/issues/10&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Get the Max Number in Array</title>
      <link>http://nodejh.com/post/Get-the-Max-Number-in-Array/</link>
      <pubDate>Mon, 24 Oct 2016 19:20:03 +0800</pubDate>
      
      <guid>http://nodejh.com/post/Get-the-Max-Number-in-Array/</guid>
      <description>

&lt;p&gt;æœ¬æ–‡ä»‹ç» JavaScript çš„å‡ ç§ä»æ•°ç»„ä¸­æ‰¾å‡ºæœ€å¤§å€¼çš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h4 id=&#34;ä½¿ç”¨é€’å½’å‡½æ•°&#34;&gt;ä½¿ç”¨é€’å½’å‡½æ•°&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;var arr = [9,8,55,66,49,68,109,55,33,6,2,1];
var max = arr[0];
function findMax( i ){
  if( i == arr.length ) return max;
  if( max &amp;lt; arr[i] ) max = arr[i];
  findMax(i+1);
}

findMax(1);
console.log(max);
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;ä½¿ç”¨-for-å¾ªç¯éå†&#34;&gt;ä½¿ç”¨ for å¾ªç¯éå†&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;var arr = [9,8,55,66,49,68,109,55,33,6,2,1];  
var max = arr[0];
for(var i = 1; i &amp;lt; arr.length; i++){
  if( max &amp;lt; arr[i] ){
    max = arr[i];
  }
}

console.log(max);
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;ä½¿ç”¨applyå°†æ•°ç»„ä¼ å…¥maxæ–¹æ³•ä¸­ç›´æ¥è¿”å›&#34;&gt;ä½¿ç”¨applyå°†æ•°ç»„ä¼ å…¥maxæ–¹æ³•ä¸­ç›´æ¥è¿”å›&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;Math.max.apply(null,[9,8,55,66,49,68,109,55,33,6,2,1])
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šæ•°ç»„æ’åºæ–¹å¼ï¼Œéƒ½å¯ä»¥åœ¨æ’åºåï¼Œæ ¹æ®æ–°æ•°ç»„ç´¢å¼•å€¼è·å– æœ€å¤§/æœ€å° å€¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;var a=[1,2,3,5];
console.log(Math.max.apply(null, a));//æœ€å¤§å€¼
console.log(Math.min.apply(null, a));//æœ€å°å€¼
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¤šç»´æ•°ç»„å¯ä»¥è¿™ä¹ˆä¿®æ”¹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;var a=[1,2,3,[5,6],[1,4,8]];
var ta=a.join(&amp;quot;,&amp;quot;).split(&amp;quot;,&amp;quot;);//è½¬åŒ–ä¸ºä¸€ç»´æ•°ç»„
console.log(Math.max.apply(null,ta));//æœ€å¤§å€¼
console.log(Math.min.apply(null,ta));//æœ€å°å€¼
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;p&gt;Github Issue: &lt;a href=&#34;https://github.com/nodejh/nodejh.github.io/issues/9&#34;&gt;https://github.com/nodejh/nodejh.github.io/issues/9&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>